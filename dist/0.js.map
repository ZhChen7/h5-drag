{"version":3,"sources":["webpack:///./node_modules/@antv/f2/dist/f2.js"],"names":["global","factory","exports","isArrayLike","value","isFinite","length","contains","arr","indexOf","filter","func","result","index","push","toString","isType","type","call","isFunction","isNil","isArray","Array","isObject","elements","rst","i","len","k","hasOwnProperty","keys","Object","obj","each","key","attrs","_keys","isObjectLike","isPlainObject","getPrototypeOf","proto","predicate","_predicate","a","isMatch","getRange","values","filterValues","v","isNaN","min","max","tmp","concat","Math","apply","isString","str","uniq","resultArr","item","o","fixedBase","base","round","substr","parseFloat","toFixed","isNumber","toString$1","lowerFirst","charAt","toLowerCase","substring","upperFirst","toUpperCase","toString$2","getType","replace","isBoolean","isDate","objectProto","prototype","isPrototype","Ctor","constructor","dist","undefined","src1","src2","src3","_mix","MAX_MIX_LEVEL","src","level","maxLevel","_deepMix","deepMix","args","_i","arguments","m","size","isEqual","other","valueKeys","otherKeys","map","dataArray","data","name","tmpMap","val","fields","callback","row","unique","l","groups","appendConditions","groupToMap","array","_values","splice","freeze","__proto__","merge","firstValue","group","remove","getRange$1","supportsEventListenerOptions","supports","options","defineProperty","get","window","addEventListener","e","eventListenerOptions","passive","isWx","wx","getSystemInfoSync","isMy","my","isNode","isBrowser","document","sessionStorage","el","nodeType","nodeName","isCanvasElement","devicePixelRatio","property","currentStyle","defaultView","getComputedStyle","getPropertyValue","width","getStyle","offsetWidth","height","offsetHeight","id","getElementById","point","canvas","canvasDom","_canvasDom$getBoundin","getBoundingClientRect","top","right","bottom","left","paddingLeft","paddingTop","paddingRight","paddingBottom","pixelRatio","mouseX","x","mouseY","y","source","listener","removeEventListener","chart","nativeEvent","event","clientPoint","touches","touch","changedTouches","clientX","clientY","createEventObj","getRelativePosition","text","font","ctx","createElement","getContext","measureText","b","assign","aProps","getOwnPropertyNames","bProps","propName","padding","mode","dir","Date","getTime","Util","mix","find","isObjectValueEqual","parsePadding","directionEnabled","toTimeStamp","getPixelRatio","getWidth","getHeight","getDomById","createEvent","color1","color2","defaultAxis","label","fill","fontSize","line","stroke","lineWidth","grid","lineDash","tickLine","labelOffset","Theme","fontFamily","defaultColor","appendPadding","colors","shapes","sizes","axis","common","circle","radius","shape","lineJoin","lineCap","area","fillOpacity","_defaultAxis","Global","version","scales","widthRatio","column","rose","multiplePie","setTheme","theme","enumerable","configurable","writable","_extends","target","subClass","superClass","create","self","ReferenceError","EVENT_AFTER_INIT","EVENT_BEFORE_RENDER","EVENT_AFTER_RENDER","EVENT_BEFORE_DATA_CHANGE","EVENT_AFTER_DATA_CHANGE","EVENT_AFTER_SIZE_CHANGE","EVENT_AFTER_GEOM_INIT","EVENT_BEFORE_GEOM_DRAW","EVENT_AFTER_GEOM_DRAW","EVENT_CLEAR","EVENT_CLEAR_INNER","EVENT_REPAINT","EventEmit","__events","_proto","on","events","emit","_this","forEach","off","Base","_Emit","_inheritsLoose","getDefaultCfg","cfg","defaultCfg","_attrs","set","destroy","destroyed","Plot","_init","start","end","xMin","xMax","yMin","yMax","tl","tr","bl","br","reset","isInRange","Matrix","generateDefault","isChanged","multiply","m1","m2","m11","m12","m21","m22","dx","dy","scale","out","rotate","radian","c","cos","s","sin","translate","transform","actions","action","Vector2","sqrt","normalize","add","v1","v2","sub","dot","direction","angle","theta","acos","angleTo","angleLargeThanPI","PI","zero","distance","clone","transformMat2d","defaultMatrix","Base$1","_initDefaultCfg","plot","init","_scale","s1","s2","matrix","center","convertPoint","_this$_convertPoint","_convertPoint","vector","invertPoint","_invertPoint","Cartesian","_Base","transposed","isRect","xDim","yDim","Rect","invert","AttributeBase","method","linear","mixedCallback","defaultCallback","userCallback","_len","params","_key","ret","_getAttrValue","isCategory","percent","getLinearValue","steps","step","floor","leftPercent","rstValue","getNames","names","getFields","field","getScale","mapping","_len2","_key2","_toOriginParam","param","isLinear","toScaleString","Position","coord","scaleX","scaleY","rstX","rstY","j","xLen","yLen","yVal","xVal","Shape","gradient","Size","toRGBValue","rgb","arr2hex","getValue","parseInt","colorCache","black","blue","grey","green","orange","pink","purple","red","white","yellow","color","hex","r","g","match","shift","points","split","toHex","hex2arr","calColor","Color","gradient$1","Attr","Shape$1","ShapeBase","_coord","draw","container","drawShape","setCoord","parsePoint","isPolar","parsePoints","ShapeFactoryBase","defaultShapeType","getShape","getShapePoints","fn","getPoints","getDefaultPoints","registerFactory","factoryName","className","geomObj","registerShape","shapeType","shapeObj","registShape","getShapeFactory","mix$1","_mix$1","mix_1","Adjust","adjustNames","processAdjust","GROUP_ATTRS","FIELD_ORIGIN","FIELD_ORIGIN_Y","Geom","styleOptions","generatePoints","attrOptions","sortable","startOnZero","visible","connectNulls","ignoreEmptyGroup","isInit","_initAttrs","_processData","_getGroupScales","attrName","attr","getAttr","attrScales","_groupData","colDefs","groupScales","_setAttrOptions","attrCfg","_createAttr","_createAttrOption","defaultValues","option","parseFields","_createScale","yScale","hasAdjust","change","nice","createScale","groupedArray","getYScale","some","subData","tempData","_saveOrigin","_numberic","_adjustData","_sort","origin","positionAttr","count","adjust","adjustType","Error","xScale","getXScale","xField","yField","adjustObject","_updateStackRange","mergeArray","tmpMin","tmpMax","mappedArray","itemArr","sort","obj1","obj2","paint","shapeFactory","_beforeMapping","mappedData","_mapping","mappedCache","record","mappedRecord","_getAttrValues","_name","getAttrValue","_generatePoints","isInCircle","getCallbackCfg","tmpCfg","getDrawCfg","opacity","style","nextPoints","_origin","shapeData","gShape","shapeAttr","createShapePointsCfg","nextData","_normalizeValues","y0","getYMinValue","_getSnap","getSnapRecords","xfield","invertPointX","rangeMax","rangeMin","xValue","originValue","_isEqual","yValue","getRecords","position","animate","changeData","clearInner","clear","_display","show","hide","methodCache","Scale","isContinuous","isIdentity","range","ticks","__cfg__","initCfg","getTicks","tick","idx","getText","tickValue","formatter","res","getConfig","setDomain","isEmpty","calculateTicks","tickMethod","getTickMethod","head","last","calcPercent","NaN","calcValue","extendStatics","d","setPrototypeOf","p","__","il","jl","Category","_super","__extends","order","scaledValue","domainRange","includes","__spreadArrays","token","twoDigitsOptional","twoDigits","threeDigits","fourDigits","word","literal","sLen","newArr","monthUpdate","arrName","i18n","lowerCaseArr","origObj","_a","args_1","dayNames","monthNames","monthNamesShort","shorten","dayNamesShort","defaultI18n","amPm","DoFn","dayOfMonth","globalI18n","setGlobalDateI18n","regexEscape","pad","String","formatFlags","D","dateObj","getDate","DD","Do","getDay","dd","ddd","dddd","M","getMonth","MM","MMM","MMMM","YY","getFullYear","YYYY","h","getHours","hh","H","HH","getMinutes","mm","getSeconds","ss","S","getMilliseconds","SS","SSS","A","ZZ","offset","getTimezoneOffset","abs","Z","monthParse","emptyDigits","emptyWord","timezoneOffset","parts","minutes","parseFlags","now","cent","globalMasks","shortDate","mediumDate","longDate","fullDate","isoDate","isoDateTime","shortTime","mediumTime","longTime","setGlobalDateMasks","masks","format","mask","literals","$0","$1","combinedI18nSettings","dateStr","today","dateInfo","year","month","day","hour","minute","second","millisecond","isPm","parseInfo","newFormat","specifiedFields","requiredFields","info","regex","requiredField","matches","RegExp","parser","dateWithoutTZ","validateFields","UTC","fecha","parse","fecha1","getter","_lo","_hi","lo","hi","mid","FORMAT_METHOD","time","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","intervals","tickCount","bisector","interval","TimeCat","toTimeStamp$1","tickIndex","timeFormat","Continuous","getScalePercent","firstTick","lastTick","minLimit","maxLimit","getInvertPercent","Linear","E","pow","log","positiveMin","Log","appendPercent","getLogPositiveMin","Pow","exponent","calBase","factor","Time","numberValue","minConfig","maxConfig","timeStamps_1","min_1","Infinity","secondMin_1","max_1","timeStamp","TypeError","minTickInterval","Quantize","minIndex","minTick","nextTick","minIndexPercent","maxIndexPercent","unshift","Quantile","map$1","cls","getClass","Identity","DEFAULT_Q","eps","Number","EPSILON","n","q","Q","lmin","lmax","lstep","mod","dmin","dmax","rt","span","half","onlyLoose","w","best","score","Q_1","sm","simplicityMax","dm","densityMax","delta","z","ceil","log10","cm","coverageMax","minStart","maxStart","simplicity","coverage","density","legibility","isInteger","tickInterval","ticks_1","extended","valid","slice","D3Linear","domain","DEFAULT_COUNT","e10","e5","e2","_domain","from","_b","i0","i1","stop","tickIncrement","d3ArrayTicks","reverse","power","LN10","error","snapType","div","snapMultiple","maxTick","defaultMin","defaultMax","tickMin","tickMax","d3Linear","strictLimit","intervalTicks","avg","h5","unit","nu","ns","pretty","sorted","quantileSorted","getTickInterval","ratio","calculateCatTicks","lastValue","date","minYear","getYear","maxYear","minMonth","maxMonth","yearInterval","createYear","monthInterval","mmMoth","dMonths","diffMonth","creatMonth","mday","ddays","diffDay","hours","dHours","diffHour","dMinus","diffMinus","minSecond","dSeconds","seconds","registerTickMethod","calculateTimeCatTicks","linearPretty","calculateTimeTicks","timePretty","calculateLogTicks","calculatePowTicks","d3LinearTickMethod","registerClass","CatTick","SNAP_COUNT_ARRAY","DEFAULT_COUNT$1","LinearTick","_ref","_ref2","getBestInterval","intervalCount","tickLength","fixedLength","getFixedLength","DECIMAL_LENGTH","number","_ref3","getFactor","avgInterval","calInterval","calMax","calMin","similarityIndex","similarityInterval","getInterval","startIndex","verify","intervalIsVerify","_ref4","num","indexOfExp","Linear$1","Identity$1","Category$1","TimeCat$1","Cat","startAngle","endAngle","ScaleController","defs","setFieldDef","updateScales","_getDef","def","_getDefaultType","_getScaleDef","values$1","_Array$getRange","isRounding","_adjustRange","isFullCircle","_getScaleCfg","firstObj","firstValue$1","_this$_getScaleCfg","newScale","_updateScale","_getScaleData","_this$_getScaleCfg2","adjustStartZero","clearObj","Abastract","offsetFactor","frontContainer","backContainer","gridPoints","drawGrid","drawTicks","drawLine","drawLabels","tickCfg","getContainer","getOffsetPoint","getSidePoint","addShape","x1","y1","x2","y2","_id","labels","labelShape","_self$getSidePoint","getTextAlignInfo","gridCfg","subPoints","executedGrid","getAxisVector","getOffsetVector","axisVector","normal","verticalVector","offsetVector","align","baseLine","textAlign","textBaseline","isTop","Line","_Abstract","lineCfg","calcDirection","xDistance","yDistance","calcDistance","point1","point2","getCenter","convertPoints","ev","_point","PRESS_DELAY","EventController","_defineProperty","emitEvent","startTime","startPoints","startDistance","pressTimeout","setTimeout","eventType","emitStart","clearPressTimeout","currentDistance","zoom","deltaX","deltaY","getEventType","prevMoveTime","lastMoveTime","prevMovePoints","lastMovePoints","emitEnd","intervalTime","velocity","_start","delegateEvent","processEvent","canvasEl","_click","_move","_end","_cancel","panEventListeners","pan","enable","isProcess","_this2","clearTimeout","pinch","CanvasElement","_EventEmit","context","dispatchEvent","support","Event","CanvasElement$1","supportEventListener","addColorStop","_mod","_shape$getBBox","getBBox","minX","minY","maxX","maxY","tanTheta","tan","tanTheta2","createLinearGradient","_addStop","circleCfg","fx","fy","fr","_color","_shape$getBBox2","createRadialGradient","firstCode","_parseLineGradient","_parseRadialGradient","console","ALIAS_ATTRS_MAP","SHAPE_ATTRS","CLIP_SHAPES","Element","_initProperties","zIndex","initAttrs","initTransform","isGroup","isShape","getDefaultAttrs","_setAttr","_setAttrClip","alias","_getAttr","clip","argumentsLen","bbox","_afterAttrsSet","getParent","setContext","drawInner","restoreContext","save","resetTransform","createPath","resetContext","restore","elAttrs","parseStyle","setLineDash","hasFill","fillStyle","hasStroke","strokeStyle","isVisible","_removeFromParent","parent","children","getMatrix","setMatrix","setTransform","rad","sx","sy","moveTo","cx","cy","mo","isDestroyed","Shape$2","_Element","originOpacity","globalAlpha","strokeOpacity","calculateBox","SHAPE_MAP","INDEX","compare","Container","getGroupClass","getChildren","addGroup","groupClass","contain","child","getComparer","items","descendants","_setEvn","Group","box","leftTop","leftBottom","rightTop","rightBottom","requestAnimationFrame","Canvas","_initPixelRatio","_initCanvas","beforeDraw","clearRect","changeSize","eventController","canvasDOM","getPointByClient","_beginDraw","toDraw","_endDraw","warn","minWidth","minHeight","_Shape","canFill","canStroke","beginPath","rect","parseRadius","lineTo","arc","closePath","ImageShape","loading","image","drawImage","Image","_image","crossOrigin","onload","swidth","sheight","Circle","extremity","startPt","controlPt1","controlPt2","endPt","T","CubicN","t2","t3","c1","c2","t","pt","getCubicBezierXYatT","x0","anticlockwise","diff","cubicBezierBounds","Line$1","getBBoxFromLine","Polygon","getBBoxFromPoints","smooth","isLoop","constraint","cps","prevPoint","nextPoint","hasConstraint","getPoint","d0","d1","sum","cp0","cp1","pointList","controlPointList","smoothBezier","cp2","filteredPoints","Polyline","_filterPoints","constaint","sps","catmullRom2bezier","sp","bezierCurveTo","newPoints","lastPoint","getBBoxFromBezierGroup","Arc","getBBoxFromArc","Sector","r0","unitX","unitY","outerBBox","innerBBox","Rect$1","calcRotatedBox","absRotate","textWidthCacheCounter","textWidthCache","TEXT_CACHE_MAX","Text","lineCount","fontStyle","fontWeight","fontVariant","lineHeight","textArr","_getFontStyle","_getTextHeight","spaceingY","_getSpaceingY","subY","subText","fillText","_subText","strokeText","_getTextWidth","rotatedBox","Custom","G","first","AxisController","axisCfg","frontPlot","backPlot","axes","_isHide","_getLinePosition","dimType","_getLineCfg","_getCircleCfg","circleRadius","_getRadiusCfg","_getAxisCfg","verticalScale","maxWidth","maxHeight","labelCfg","executedLabel","textStyle","axisLabel","_axisLabel$getBBox","_createAxis","coordType","createAxis","yScales","_isAutoPadding","userPadding","legendRange","circleAxis","_axes$right","_maxWidth","_labelOffset","_axes$left","_maxWidth2","_labelOffset2","_axes$bottom","_maxHeight","_labelOffset3","_updateLayout","appendCfg","verticalTicks","formatTicks","verticalTick","margin","isClip","Helper","getClip","isPointInPlot","compareScale","flag","scaleValues","compareScaleValues","Chart","initPlugins","_plugins","_cacheId","register","plugins","plugin","unregister","getAll","notify","hook","descriptors","ilen","descriptor","cache","rendered","geoms","filters","_syncYScales","syncY","syncScales","geom","_getFieldsForLegend","filteredData","legendFields","_adjustScale","scaleController","_removeGeoms","_clearGeoms","_clearInner","_initFilteredData","_changeGeomsData","_initGeom","middlePlot","_initGeoms","_initCoord","coordCfg","C","_initLayout","newPlot","_initLayers","_initEvents","_initScaleController","_clearScaleController","_assertThisInitialized","geomConstructor","methodName","addGeom","axisController","condition","render","_renderAxis","repaint","_interactions","interaction","getPosition","getYScales","getRecord","getLegendItems","legendItems","colorAttr","_isScaleExist","scaleValue","join","marker","symbol","dataValue","checked","registerPlugins","chartPlugins","track","yItem","SHAPES","Point","pointInfo","splitPoints","pointCfg","getPointsCfg","Point$1","_Geom","hasStack","Line$2","topPoints","bottomPoints","isStack","topShape","bottomShape","SHAPES$1","getStyle$1","drawLines","Path","splitArrayObj","splitArray","splitedIndex","Line$3","_Path","notEmpty","eqls","equals","isSmooth","filterPoints","pointsLen","topSps","bottomSps","_n","_sp","equalsCenter","drawRectShape","Area","SHAPES$2","drawShape$1","Area$1","splitArrayfn","SizeMixin","initEvent","getDefaultSize","defaultSize","normalizeSize","getDimWidth","dimName","_getWidth","_toNormalizedSize","_toCoordSize","getNormalizedSize","getSize","ymin","ymax","xmin","xmax","xValues","yValues","Interval","getRectPoints","_cfg$center","v0","rectCfg","getRectRange","polygonPoints","getMiddlePoint","Interval$1","Polygon$1","Polygon$2","temp","xCount","yCount","xOffset","yOffset","_sortValue","Schema","getCandlePoints","Schema$1","toString$3","isType$1","isType_1","isArray$1","isArray_1","isNil$1","isNil_1","Stack","_Adjust","_inheritsLoose$1","processStack","stackCache","positive","negative","reverseOrder","xkey","_typeof","Symbol","iterator","isObject$1","isObject_1","each$1","each_1","MARGIN_RATIO","DODGE_RATIO","Dodge","_inheritsLoose$2","marginRatio","dodgeRatio","getDodgeOffset","pre","next","dodgeValue","isFunction$1","isFunction_1","maxBy","maxData","maxBy_1","merge$1","merge_1","ArrayUtil","Symmetric","_inheritsLoose$3","cacheMax","groupFields","_getMax","dim","mergeData","maxRecord","maxValue","_getXValuesMax","_processSymmetric","valueMax","subVal","Polar","inner","innerRadius","maxRadius","startV","pointV","percentX","percentY","Circle$1","_getCirclePoint","KEYWORDS_PERCENT","median","GuideBase","_getNormalizedValue","parsePercentPoint","xPercent","yPercent","limitInPlot","element","changeVisible","display","Arc$1","_GuideBase","coordCenter","atan2","alignX","alignY","DOM","CSS","innerHTML","childNodes","Html","offsetX","offsetY","html","myNode","createDom","modifyCSS","visibility","parentNode","wrapperNode","appendChild","canvasOffsetTop","offsetTop","canvasOffsetLeft","offsetLeft","newOffset","getOffsetFromAlign","removeChild","Line$4","Rect$2","Text$1","content","Tag","direct","autoAdjust","side","background","withPoint","pointStyle","_getDirect","tagWidth","tagHeight","clientWidth","clientHeight","vertical","horizontal","wrapperContainer","pointShape","tagContainer","tagText","textBBox","tagBg","arrowPoints","sideShape","Point$2","SYMBOLS","square","Marker","MARKER_RADIUS","List","showTitle","title","titleGap","itemGap","itemMarginBottom","itemFormatter","itemWidth","wordSpace","layout","joinString","_renderTitle","_renderItems","wrapper","itemsGroup","titleShape","titleHeight","titleStyle","_titleHeight","reversed","_addItem","_adjustItems","_renderBackground","_wrapper$getBBox","backShape","itemGroup","unCheckStyle","unCheckColor","nameStyle","valueStyle","startX","markerAttrs","markerShape","nameText","_formatItemValue","valueX","_getMaxItemWidth","maxItemWidth","_children$i$getBBox","_width","maxLength","twoAvgWidth","threeAvgWidth","_adjustHorizontal","rowWidth","legendHitBoxes","childHeight","childWidth","_adjustVertical","colHeight","totalWidth","setItems","clearItems","setTitle","TextBox","updateContent","updatePosition","backgroundShape","textShape","_getBBox","_this$_getBBox","tipWidth","tipHeight","_height","_this$_getBBox2","GAP","Tooltip","showCrosshairs","crosshairsStyle","crosshairsType","showXTip","showYTip","xTip","xTipBackground","xTipTextStyle","yTip","yTipBackground","yTipTextStyle","custom","fixed","tooltipArrow","xTipBox","yTipBox","_renderCrosshairs","setContent","setYTipContent","setYTipPosition","pos","plotRange","crosshairsShapeX","yTipHeight","yTipWidth","posX","posY","setXTipContent","setXTipPosition","crosshairsShapeY","canvasHeight","xTipWidth","xTipHeight","setXCrosshairPosition","setYCrosshairPosition","setPosition","containerBBox","_x","setMarkers","_cfg","markerGroup","_getMarkerGroup","clearMarkers","tooltip","triggerOn","triggerOff","alwaysShow","showTooltipMarker","showItemMarker","itemMarkerStyle","snap","colorScale","nameScale","valueScale","_getTooltipValueScale","_indexOfArray","arr1","arr2","JSON","stringify","TooltipController","_tooltipCfg","hideTooltip","lastTimeStamp","showTooltip","_chart","_setCrosshairsCfg","_getMaxLength","tooltipCfg","prePoint","bindEvents","unBindEvents","_lastActive","_getTooltipMarkerStyle","_cfg2","_chart$get","firstItem","lastItem","intervalWidth","tooltipMarkerStyle","_setTooltip","tooltipMarkerCfg","lastActive","_uniqItems","tip","onShow","isEqual$1","onChange","xTipPosX","yTipPosY","markerItems","tooltipMarkerType","tooltipMarkerItems","records","tooltipItem","getTooltipName","getTooltipValue","getTooltipTitle","onHide","_handleEvent","aMethod","handleShowEvent","handleHideEvent","tooltipController","afterGeomDraw","Tooltip$1","guide","tag","GuideController","guides","guideShapes","_toString","_getId","_createGuide","ClassName","regionFilter","guideController","init$1","afterGeomDraw$1","Guide","LEGEND_GAP","MARKER_SIZE","DEFAULT_CFG","selectedMode","legend","LegendController","legends","legendPosX","legendPosY","clickedItem","clickedLegend","_createEvent","clicked","findItem","clickable","onClick","filteredVals","isSingeSelected","legendCfg","addLegend","fieldCfg","addCustomLegend","_addCategoryLegend","_isFiltered","lastCfg","_alignLegend","_self$plotRange","chartWidth","chartHeight","legendHeight","legendWidth","verticalAlign","preWidth","alignLegends","handleEvent","legendController","getPaddingByPos","init$2","beforeGeomDraw","afterGeomDraw$2","clearInner$1","Legend","clock","performance","Timeline","anims","playing","play","update","pushAnim","animInfo","currentTime","propertyAnim","hasEnded","startState","endState","interpolate","duration","hasStarted","onStart","easing","onFrame","newValue","aLen","onUpdate","endTime","onEnd","asin","bounceOut","bounceIn","Easing","linear$1","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","elasticIn","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceInOut","nb","na","interpolateNumber","Animator","timeline","to","delay","startValue","endValue","plainArray","interpolateArray","frame","defaultAnimationCfg","appear","enter","leave","Animate","Action","getAnimation","geomType","animationType","geomAnimateCfg","animation","getAnimateCfg","geomConfig","registerAnimation","animationName","animationFun","_extends2","scaledMatrix","_matrix","_matrix2","animateCfg","_getAnimateParam","getAnimateParam","anim","doAnimation","ShapeAction","fadeIn","zeroY","_getCoordInfo","getCoordInfo","endMatrix","getScaledMatrix","_groupScaleIn","_shapeScale","isTransposed","GroupAction","groupWaveIn","groupScaleInX","groupScaleInY","groupScaleInXY","shapesScaleInX","shapesScaleInY","shapesScaleInXY","path","GROUP_ANIMATION","schema","fromAttrs","toAttrs","dataObj","geomIdx","groupScale","geomContainer","geomShapes","_getAnimateCfgByShapeType","_getShapeId","updateShapes","newShapes","deletedShape","getAnimate","tempShape","updateShape","cacheAttrs","newShape","lastShape","isUpdate","caches","cacheShapes","getShapes","axisShapes","componentShapes","addAnimate","geomCfg","appearCfg","_animate","detail","afterCanvasInit","beforeCanvasDraw","afterCanvasDestroyed","Animation","_Interactions","registerInteraction","getInteraction","interactions","interact","clearInteraction","newValues","lastIndex","defaultRange","Context","getPinchScale","minScale","minCount","updateRange","updateTicks","_initEvent","_afterinit","_afterdatachange","getFollowScale","startRange","lastTickCount","doZoom","leftScale","rightScale","zoomOffset","rangeLen","rangeOffset","leftOffset","rightOffset","newStart","newEnd","newRange","doMove","valueStart","valueEnd","currentValues","isValuesEqual","updateScale","updateFollowScale","pinchScale","pinchValues","followScale","pinchField","pinchScaleType","followField","pinchValueMap","_getRange","newTickCount","catTicks","Base$2","getInteractionContext","interactionContext","preStart","preProcess","process","onProcess","preEnd","preReset","onReset","_bindEvents","startEvent","endEvent","resetEvent","_process","_reset","_clearEvents","Pan","preventDefault","coordWidth","Pinch","_assertThisInitialize","leftLen","rightLen","Component"],"mappings":"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","file":"0.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.F2 = {}));\n}(this, (function (exports) { 'use strict';\n\n    var isArrayLike = function (value) {\n      /**\n       * isArrayLike([1, 2, 3]) => true\n       * isArrayLike(document.body.children) => true\n       * isArrayLike('abc') => true\n       * isArrayLike(Function) => false\n       */\n      return value !== null && typeof value !== 'function' && isFinite(value.length);\n    };\n\n    var contains = function (arr, value) {\n      if (!isArrayLike(arr)) {\n        return false;\n      }\n\n      return arr.indexOf(value) > -1;\n    };\n\n    var filter = function (arr, func) {\n      if (!isArrayLike(arr)) {\n        return arr;\n      }\n\n      var result = [];\n\n      for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n\n        if (func(value, index)) {\n          result.push(value);\n        }\n      }\n\n      return result;\n    };\n\n    var toString = {}.toString;\n\n    var isType = function (value, type) {\n      return toString.call(value) === '[object ' + type + ']';\n    };\n\n    /**\n     * 是否为函数\n     * @param  {*} fn 对象\n     * @return {Boolean}  是否函数\n     */\n    var isFunction = (function (value) {\n      return isType(value, 'Function');\n    });\n\n    // isFinite,\n    var isNil = function (value) {\n      /**\n       * isNil(null) => true\n       * isNil() => true\n       */\n      return value === null || value === undefined;\n    };\n\n    var isArray = (function (value) {\n      return Array.isArray ? Array.isArray(value) : isType(value, 'Array');\n    });\n\n    var isObject = (function (value) {\n      /**\n       * isObject({}) => true\n       * isObject([1, 2, 3]) => true\n       * isObject(Function) => true\n       * isObject(null) => false\n       */\n      var type = typeof value;\n      return value !== null && type === 'object' || type === 'function';\n    });\n\n    function each(elements, func) {\n      if (!elements) {\n        return;\n      }\n\n      var rst;\n\n      if (isArray(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n          rst = func(elements[i], i);\n\n          if (rst === false) {\n            break;\n          }\n        }\n      } else if (isObject(elements)) {\n        for (var k in elements) {\n          if (elements.hasOwnProperty(k)) {\n            rst = func(elements[k], k);\n\n            if (rst === false) {\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    var keys = Object.keys ? function (obj) {\n      return Object.keys(obj);\n    } : function (obj) {\n      var result = [];\n      each(obj, function (value, key) {\n        if (!(isFunction(obj) && key === 'prototype')) {\n          result.push(key);\n        }\n      });\n      return result;\n    };\n\n    function isMatch(obj, attrs) {\n      var _keys = keys(attrs);\n\n      var length = _keys.length;\n      if (isNil(obj)) return !length;\n\n      for (var i = 0; i < length; i += 1) {\n        var key = _keys[i];\n\n        if (attrs[key] !== obj[key] || !(key in obj)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var isObjectLike = function (value) {\n      /**\n       * isObjectLike({}) => true\n       * isObjectLike([1, 2, 3]) => true\n       * isObjectLike(Function) => false\n       * isObjectLike(null) => false\n       */\n      return typeof value === 'object' && value !== null;\n    };\n\n    var isPlainObject = function (value) {\n      /**\n       * isObjectLike(new Foo) => false\n       * isObjectLike([1, 2, 3]) => false\n       * isObjectLike({ x: 0, y: 0 }) => true\n       * isObjectLike(Object.create(null)) => true\n       */\n      if (!isObjectLike(value) || !isType(value, 'Object')) {\n        return false;\n      }\n\n      if (Object.getPrototypeOf(value) === null) {\n        return true;\n      }\n\n      var proto = value;\n\n      while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n      }\n\n      return Object.getPrototypeOf(value) === proto;\n    };\n\n    function find(arr, predicate) {\n      if (!isArray(arr)) return null;\n\n      var _predicate;\n\n      if (isFunction(predicate)) {\n        _predicate = predicate;\n      }\n\n      if (isPlainObject(predicate)) {\n        _predicate = function (a) {\n          return isMatch(a, predicate);\n        };\n      }\n\n      if (_predicate) {\n        for (var i = 0; i < arr.length; i += 1) {\n          if (_predicate(arr[i])) {\n            return arr[i];\n          }\n        }\n      }\n\n      return null;\n    }\n\n    var getRange = function (values) {\n      // 存在 NaN 时，min,max 判定会出问题\n      var filterValues = values.filter(function (v) {\n        return !isNaN(v);\n      });\n\n      if (!filterValues.length) {\n        // 如果没有数值则直接返回0\n        return {\n          min: 0,\n          max: 0\n        };\n      }\n\n      if (isArray(values[0])) {\n        var tmp = [];\n\n        for (var i = 0; i < values.length; i++) {\n          tmp = tmp.concat(values[i]);\n        }\n\n        filterValues = tmp;\n      }\n\n      var max = Math.max.apply(null, filterValues);\n      var min = Math.min.apply(null, filterValues);\n      return {\n        min: min,\n        max: max\n      };\n    };\n\n    var isString = (function (str) {\n      return isType(str, 'String');\n    });\n\n    var uniq = function (arr) {\n      var resultArr = [];\n      each(arr, function (item) {\n        if (!contains(resultArr, item)) {\n          resultArr.push(item);\n        }\n      });\n      return resultArr;\n    };\n\n    function head(o) {\n      if (isArrayLike(o)) {\n        return o[0];\n      }\n\n      return undefined;\n    }\n\n    function last(o) {\n      if (isArrayLike(o)) {\n        var arr = o;\n        return arr[arr.length - 1];\n      }\n\n      return undefined;\n    }\n\n    var fixedBase = function (v, base) {\n      var str = base.toString();\n      var index = str.indexOf('.');\n\n      if (index === -1) {\n        return Math.round(v);\n      }\n\n      var length = str.substr(index + 1).length;\n\n      if (length > 20) {\n        length = 20;\n      }\n\n      return parseFloat(v.toFixed(length));\n    };\n\n    /**\n     * 判断是否数字\n     * @return {Boolean} 是否数字\n     */\n\n    var isNumber = function (value) {\n      return isType(value, 'Number');\n    };\n\n    var toString$1 = (function (value) {\n      if (isNil(value)) return '';\n      return value.toString();\n    });\n\n    var lowerFirst = function (value) {\n      var str = toString$1(value);\n      return str.charAt(0).toLowerCase() + str.substring(1);\n    };\n\n    var upperFirst = function (value) {\n      var str = toString$1(value);\n      return str.charAt(0).toUpperCase() + str.substring(1);\n    };\n\n    var toString$2 = {}.toString;\n\n    var getType = function (value) {\n      return toString$2.call(value).replace(/^\\[object /, '').replace(/]$/, '');\n    };\n\n    /**\n     * 是否是布尔类型\n     *\n     * @param {Object} value 测试的值\n     * @return {Boolean}\n     */\n\n    var isBoolean = function (value) {\n      return isType(value, 'Boolean');\n    };\n\n    var isDate = function (value) {\n      return isType(value, 'Date');\n    };\n\n    var objectProto = Object.prototype;\n\n    var isPrototype = function (value) {\n      var Ctor = value && value.constructor;\n      var proto = typeof Ctor === 'function' && Ctor.prototype || objectProto;\n      return value === proto;\n    };\n\n    // FIXME: Mutable param should be forbidden in static lang.\n    function _mix(dist, obj) {\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {\n          dist[key] = obj[key];\n        }\n      }\n    }\n\n    function mix(dist, src1, src2, src3) {\n      if (src1) _mix(dist, src1);\n      if (src2) _mix(dist, src2);\n      if (src3) _mix(dist, src3);\n      return dist;\n    }\n\n    var MAX_MIX_LEVEL = 5;\n\n    function _deepMix(dist, src, level, maxLevel) {\n      level = level || 0;\n      maxLevel = maxLevel || MAX_MIX_LEVEL;\n\n      for (var key in src) {\n        if (src.hasOwnProperty(key)) {\n          var value = src[key];\n\n          if (value !== null && isPlainObject(value)) {\n            if (!isPlainObject(dist[key])) {\n              dist[key] = {};\n            }\n\n            if (level < maxLevel) {\n              _deepMix(dist[key], value, level + 1, maxLevel);\n            } else {\n              dist[key] = src[key];\n            }\n          } else if (isArray(value)) {\n            dist[key] = [];\n            dist[key] = dist[key].concat(value);\n          } else if (value !== undefined) {\n            dist[key] = value;\n          }\n        }\n      }\n    } // todo 重写\n\n\n    var deepMix = function (rst) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      for (var i = 0; i < args.length; i += 1) {\n        _deepMix(rst, args[i]);\n      }\n\n      return rst;\n    };\n\n    var indexOf = function (arr, obj) {\n      if (!isArrayLike(arr)) {\n        return -1;\n      }\n\n      var m = Array.prototype.indexOf;\n\n      if (m) {\n        return m.call(arr, obj);\n      }\n\n      var index = -1;\n\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i] === obj) {\n          index = i;\n          break;\n        }\n      }\n\n      return index;\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function isEmpty(value) {\n      /**\n       * isEmpty(null) => true\n       * isEmpty() => true\n       * isEmpty(true) => true\n       * isEmpty(1) => true\n       * isEmpty([1, 2, 3]) => false\n       * isEmpty('abc') => false\n       * isEmpty({ a: 1 }) => false\n       */\n      if (isNil(value)) {\n        return true;\n      }\n\n      if (isArrayLike(value)) {\n        return !value.length;\n      }\n\n      var type = getType(value);\n\n      if (type === 'Map' || type === 'Set') {\n        return !value.size;\n      }\n\n      if (isPrototype(value)) {\n        return !Object.keys(value).length;\n      }\n\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var isEqual = function (value, other) {\n      if (value === other) {\n        return true;\n      }\n\n      if (!value || !other) {\n        return false;\n      }\n\n      if (isString(value) || isString(other)) {\n        return false;\n      }\n\n      if (isArrayLike(value) || isArrayLike(other)) {\n        if (value.length !== other.length) {\n          return false;\n        }\n\n        var rst = true;\n\n        for (var i = 0; i < value.length; i++) {\n          rst = isEqual(value[i], other[i]);\n\n          if (!rst) {\n            break;\n          }\n        }\n\n        return rst;\n      }\n\n      if (isObjectLike(value) || isObjectLike(other)) {\n        var valueKeys = Object.keys(value);\n        var otherKeys = Object.keys(other);\n\n        if (valueKeys.length !== otherKeys.length) {\n          return false;\n        }\n\n        var rst = true;\n\n        for (var i = 0; i < valueKeys.length; i++) {\n          rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);\n\n          if (!rst) {\n            break;\n          }\n        }\n\n        return rst;\n      }\n\n      return false;\n    };\n\n    var map = function (arr, func) {\n      if (!isArrayLike(arr)) {\n        // @ts-ignore\n        return arr;\n      }\n\n      var result = [];\n\n      for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n        result.push(func(value, index));\n      }\n\n      return result;\n    };\n\n    function size(o) {\n      if (isNil(o)) {\n        return 0;\n      }\n\n      if (isArrayLike(o)) {\n        return o.length;\n      }\n\n      return Object.keys(o).length;\n    }\n\n    function merge(dataArray) {\n      var rst = [];\n\n      for (var i = 0, len = dataArray.length; i < len; i++) {\n        rst = rst.concat(dataArray[i]);\n      }\n\n      return rst;\n    }\n\n    function values(data, name) {\n      var rst = [];\n      var tmpMap = {};\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var obj = data[i];\n        var value = obj[name];\n\n        if (!isNil(value)) {\n          if (!isArray(value)) {\n            if (!tmpMap[value]) {\n              rst.push(value);\n              tmpMap[value] = true;\n            }\n          } else {\n            each(value, function (val) {\n              if (!tmpMap[val]) {\n                rst.push(val);\n                tmpMap[val] = true;\n              }\n            });\n          }\n        }\n      }\n\n      return rst;\n    }\n\n    function firstValue(data, name) {\n      var rst = null;\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var obj = data[i];\n        var value = obj[name];\n\n        if (!isNil(value)) {\n          if (isArray(value)) {\n            rst = value[0];\n          } else {\n            rst = value;\n          }\n\n          break;\n        }\n      }\n\n      return rst;\n    }\n\n    function groupToMap(data, fields) {\n      if (!fields) {\n        return {\n          0: data\n        };\n      }\n\n      var callback = function callback(row) {\n        var unique = '_';\n\n        for (var i = 0, l = fields.length; i < l; i++) {\n          unique += row[fields[i]] && row[fields[i]].toString();\n        }\n\n        return unique;\n      };\n\n      var groups = {};\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var row = data[i];\n        var key = callback(row);\n\n        if (groups[key]) {\n          groups[key].push(row);\n        } else {\n          groups[key] = [row];\n        }\n      }\n\n      return groups;\n    }\n\n    function group(data, fields, appendConditions) {\n      if (appendConditions === void 0) {\n        appendConditions = {};\n      }\n\n      if (!fields) {\n        return [data];\n      }\n\n      var groups = groupToMap(data, fields);\n      var array = [];\n\n      if (fields.length === 1 && appendConditions[fields[0]]) {\n        var _values = appendConditions[fields[0]];\n        each(_values, function (value) {\n          value = '_' + value;\n          array.push(groups[value]);\n        });\n      } else {\n        for (var i in groups) {\n          array.push(groups[i]);\n        }\n      }\n\n      return array;\n    }\n\n    function remove(arr, obj) {\n      if (!arr) {\n        return;\n      }\n\n      var index = arr.indexOf(obj);\n\n      if (index !== -1) {\n        arr.splice(index, 1);\n      }\n    }\n\n    function getRange$1(values) {\n      if (!values.length) {\n        return {\n          min: 0,\n          max: 0\n        };\n      }\n\n      var max = Math.max.apply(null, values);\n      var min = Math.min.apply(null, values);\n      return {\n        min: min,\n        max: max\n      };\n    }\n\n    var array = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        merge: merge,\n        values: values,\n        firstValue: firstValue,\n        group: group,\n        groupToMap: groupToMap,\n        remove: remove,\n        getRange: getRange$1\n    });\n\n    /**\n     * Detects support for options object argument in addEventListener.\n     * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n     * @private\n     */\n    var supportsEventListenerOptions = function () {\n      var supports = false;\n\n      try {\n        var options = Object.defineProperty({}, 'passive', {\n          get: function get() {\n            supports = true;\n          }\n        });\n        window.addEventListener('e', null, options);\n      } catch (e) {// continue regardless of error\n      }\n\n      return supports;\n    }(); // Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n    // https://github.com/chartjs/Chart.js/issues/4287\n\n\n    var eventListenerOptions = supportsEventListenerOptions ? {\n      passive: true\n    } : false;\n    /* global wx, my */\n    // weixin miniprogram\n\n    var isWx = typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function'; // ant miniprogram\n\n    var isMy = typeof my === 'object' && typeof my.getSystemInfoSync === 'function'; // in node\n\n    var isNode = typeof global && !typeof window; // in browser\n\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.sessionStorage !== 'undefined';\n\n    function isCanvasElement(el) {\n      if (!el || typeof el !== 'object') return false;\n\n      if (el.nodeType === 1 && el.nodeName) {\n        // HTMLCanvasElement\n        return true;\n      } // CanvasElement\n\n\n      return !!el.isCanvasElement;\n    }\n\n    function getPixelRatio() {\n      return window && window.devicePixelRatio || 1;\n    }\n\n    function getStyle(el, property) {\n      return el.currentStyle ? el.currentStyle[property] : document.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n    }\n\n    function getWidth(el) {\n      var width = getStyle(el, 'width');\n\n      if (width === 'auto') {\n        width = el.offsetWidth;\n      }\n\n      return parseFloat(width);\n    }\n\n    function getHeight(el) {\n      var height = getStyle(el, 'height');\n\n      if (height === 'auto') {\n        height = el.offsetHeight;\n      }\n\n      return parseFloat(height);\n    }\n\n    function getDomById(id) {\n      if (!id) {\n        return null;\n      }\n\n      return document.getElementById(id);\n    }\n\n    function getRelativePosition(point, canvas) {\n      var canvasDom = canvas.get('el');\n      if (!canvasDom) return point;\n\n      var _canvasDom$getBoundin = canvasDom.getBoundingClientRect(),\n          top = _canvasDom$getBoundin.top,\n          right = _canvasDom$getBoundin.right,\n          bottom = _canvasDom$getBoundin.bottom,\n          left = _canvasDom$getBoundin.left;\n\n      var paddingLeft = parseFloat(getStyle(canvasDom, 'padding-left'));\n      var paddingTop = parseFloat(getStyle(canvasDom, 'padding-top'));\n      var paddingRight = parseFloat(getStyle(canvasDom, 'padding-right'));\n      var paddingBottom = parseFloat(getStyle(canvasDom, 'padding-bottom'));\n      var width = right - left - paddingLeft - paddingRight;\n      var height = bottom - top - paddingTop - paddingBottom;\n      var pixelRatio = canvas.get('pixelRatio');\n      var mouseX = (point.x - left - paddingLeft) / width * canvasDom.width / pixelRatio;\n      var mouseY = (point.y - top - paddingTop) / height * canvasDom.height / pixelRatio;\n      return {\n        x: mouseX,\n        y: mouseY\n      };\n    }\n\n    function addEventListener(source, type, listener) {\n      source.addEventListener(type, listener, eventListenerOptions);\n    }\n\n    function removeEventListener(source, type, listener) {\n      source.removeEventListener(type, listener, eventListenerOptions);\n    }\n\n    function createEventObj(type, chart, x, y, nativeEvent) {\n      return {\n        type: type,\n        chart: chart,\n        \"native\": nativeEvent || null,\n        x: x !== undefined ? x : null,\n        y: y !== undefined ? y : null\n      };\n    }\n\n    function createEvent(event, chart) {\n      var type = event.type;\n      var clientPoint; // 说明是touch相关事件\n\n      if (event.touches) {\n        // https://developer.mozilla.org/zh-CN/docs/Web/API/TouchEvent/changedTouches\n        // 这里直接拿changedTouches就可以了，不管是touchstart, touchmove, touchend changedTouches 都是有的\n        // 为了以防万一，做个空判断\n        var touch = event.changedTouches[0] || {}; // x, y: 相对canvas原点的位置，clientX, clientY 相对于可视窗口的位置\n\n        var x = touch.x,\n            y = touch.y,\n            clientX = touch.clientX,\n            clientY = touch.clientY; // 小程序环境会有x,y，这里就直接返回\n\n        if (x && y) {\n          return createEventObj(type, chart, x, y, event);\n        }\n\n        clientPoint = {\n          x: clientX,\n          y: clientY\n        };\n      } else {\n        // mouse相关事件\n        clientPoint = {\n          x: event.clientX,\n          y: event.clientY\n        };\n      } // 理论上应该是只有有在浏览器环境才会走到这里\n\n\n      var canvas = chart.get('canvas'); // 通过clientX, clientY 计算x, y\n\n      var point = getRelativePosition(clientPoint, canvas);\n      return createEventObj(type, chart, point.x, point.y, event);\n    }\n\n    function measureText(text, font, ctx) {\n      if (!ctx) {\n        ctx = document.createElement('canvas').getContext('2d');\n      }\n\n      ctx.font = font || '12px sans-serif';\n      return ctx.measureText(text);\n    }\n\n    /**\n     * @fileOverview Utility for F2\n     * @author dxq613 @gmail.com\n     * @author sima.zhang1990@gmail.com\n     */\n\n    function isObjectValueEqual(a, b) {\n      // for vue.js\n      a = Object.assign({}, a);\n      b = Object.assign({}, b);\n      var aProps = Object.getOwnPropertyNames(a);\n      var bProps = Object.getOwnPropertyNames(b);\n\n      if (aProps.length !== bProps.length) {\n        return false;\n      }\n\n      for (var i = 0, len = aProps.length; i < len; i++) {\n        var propName = aProps[i];\n\n        if (a[propName] !== b[propName]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    function parsePadding(padding) {\n      var top;\n      var right;\n      var bottom;\n      var left;\n\n      if (isNumber(padding) || isString(padding)) {\n        top = bottom = left = right = padding;\n      } else if (isArray(padding)) {\n        top = padding[0];\n        right = !isNil(padding[1]) ? padding[1] : padding[0];\n        bottom = !isNil(padding[2]) ? padding[2] : padding[0];\n        left = !isNil(padding[3]) ? padding[3] : right;\n      }\n\n      return [top, right, bottom, left];\n    }\n\n    function directionEnabled(mode, dir) {\n      if (mode === undefined) {\n        return true;\n      } else if (typeof mode === 'string') {\n        return mode.indexOf(dir) !== -1;\n      }\n\n      return false;\n    }\n\n    function toTimeStamp(value) {\n      if (isString(value)) {\n        if (value.indexOf('T') > 0) {\n          value = new Date(value).getTime();\n        } else {\n          // new Date('2010/01/10') 和 new Date('2010-01-10') 的差别在于:\n          // 如果仅有年月日时，前者是带有时区的: Fri Jan 10 2020 02:40:13 GMT+0800 (中国标准时间)\n          // 后者会格式化成 Sun Jan 10 2010 08:00:00 GMT+0800 (中国标准时间)\n          value = new Date(value.replace(/-/gi, '/')).getTime();\n        }\n      }\n\n      if (isDate(value)) {\n        value = value.getTime();\n      }\n\n      return value;\n    }\n\n    var Util = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Array: array,\n        upperFirst: upperFirst,\n        lowerFirst: lowerFirst,\n        isString: isString,\n        isNumber: isNumber,\n        isBoolean: isBoolean,\n        isFunction: isFunction,\n        isDate: isDate,\n        isArray: isArray,\n        isNil: isNil,\n        isObject: isObject,\n        isPlainObject: isPlainObject,\n        isEqual: isEqual,\n        deepMix: deepMix,\n        mix: mix,\n        each: each,\n        uniq: uniq,\n        find: find,\n        isObjectValueEqual: isObjectValueEqual,\n        parsePadding: parsePadding,\n        directionEnabled: directionEnabled,\n        toTimeStamp: toTimeStamp,\n        isWx: isWx,\n        isMy: isMy,\n        isNode: isNode,\n        isBrowser: isBrowser,\n        isCanvasElement: isCanvasElement,\n        getPixelRatio: getPixelRatio,\n        getStyle: getStyle,\n        getWidth: getWidth,\n        getHeight: getHeight,\n        getDomById: getDomById,\n        getRelativePosition: getRelativePosition,\n        addEventListener: addEventListener,\n        removeEventListener: removeEventListener,\n        createEvent: createEvent,\n        measureText: measureText\n    });\n\n    /**\n     * @fileOverview default theme\n     * @author dxq613@gail.com\n     */\n    var color1 = '#E8E8E8'; // color of axis-line and axis-grid\n\n    var color2 = '#808080'; // color of axis label\n\n    var defaultAxis = {\n      label: {\n        fill: color2,\n        fontSize: 10\n      },\n      line: {\n        stroke: color1,\n        lineWidth: 1\n      },\n      grid: {\n        type: 'line',\n        stroke: color1,\n        lineWidth: 1,\n        lineDash: [2]\n      },\n      tickLine: null,\n      labelOffset: 7.5\n    };\n    var Theme = {\n      fontFamily: '\"Helvetica Neue\", \"San Francisco\", Helvetica, Tahoma, Arial, \"PingFang SC\", \"Hiragino Sans GB\", \"Heiti SC\", \"Microsoft YaHei\", sans-serif',\n      defaultColor: '#1890FF',\n      pixelRatio: 1,\n      padding: 'auto',\n      appendPadding: 15,\n      colors: ['#1890FF', '#2FC25B', '#FACC14', '#223273', '#8543E0', '#13C2C2', '#3436C7', '#F04864'],\n      shapes: {\n        line: ['line', 'dash'],\n        point: ['circle', 'hollowCircle']\n      },\n      sizes: [4, 10],\n      axis: {\n        common: defaultAxis,\n        // common axis configuration\n        bottom: mix({}, defaultAxis, {\n          grid: null\n        }),\n        left: mix({}, defaultAxis, {\n          line: null\n        }),\n        right: mix({}, defaultAxis, {\n          line: null\n        }),\n        circle: mix({}, defaultAxis, {\n          line: null\n        }),\n        radius: mix({}, defaultAxis, {\n          labelOffset: 4\n        })\n      },\n      shape: {\n        line: {\n          lineWidth: 2,\n          lineJoin: 'round',\n          lineCap: 'round'\n        },\n        point: {\n          lineWidth: 0,\n          size: 3\n        },\n        area: {\n          fillOpacity: 0.1\n        }\n      },\n      _defaultAxis: defaultAxis\n    };\n\n    var Global = {\n      version: '3.7.7',\n      scales: {},\n      widthRatio: {\n        column: 1 / 2,\n        rose: 0.999999,\n        multiplePie: 3 / 4\n      },\n      lineDash: [4, 4]\n    };\n\n    Global.setTheme = function (theme) {\n      deepMix(this, theme);\n    };\n\n    Global.setTheme(Theme);\n\n    function _defineProperty(obj, key, value) {\n      if (key in obj) {\n        Object.defineProperty(obj, key, {\n          value: value,\n          enumerable: true,\n          configurable: true,\n          writable: true\n        });\n      } else {\n        obj[key] = value;\n      }\n\n      return obj;\n    }\n\n    function _extends() {\n      _extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n      return _extends.apply(this, arguments);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    function _assertThisInitialized(self) {\n      if (self === void 0) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n\n      return self;\n    }\n\n    var EVENT_AFTER_INIT = 'afterinit';\n    var EVENT_BEFORE_RENDER = 'beforerender';\n    var EVENT_AFTER_RENDER = 'afterrender';\n    var EVENT_BEFORE_DATA_CHANGE = 'beforedatachange';\n    var EVENT_AFTER_DATA_CHANGE = 'afterdatachange';\n    var EVENT_AFTER_SIZE_CHANGE = '_aftersizechange';\n    var EVENT_AFTER_GEOM_INIT = '_aftergeominit';\n    var EVENT_BEFORE_GEOM_DRAW = 'beforegeomdraw';\n    var EVENT_AFTER_GEOM_DRAW = 'aftergeomdraw';\n    var EVENT_CLEAR = 'clear';\n    var EVENT_CLEAR_INNER = 'clearinner';\n    var EVENT_REPAINT = 'repaint';\n\n    // 实现简单的事件机制\n\n    var EventEmit = /*#__PURE__*/function () {\n      function EventEmit() {\n        this.__events = {};\n      }\n\n      var _proto = EventEmit.prototype;\n\n      _proto.on = function on(type, listener) {\n        if (!type || !listener) {\n          return;\n        }\n\n        var events = this.__events[type] || [];\n        events.push(listener);\n        this.__events[type] = events;\n      };\n\n      _proto.emit = function emit(type, e) {\n        var _this = this;\n\n        if (isObject(type)) {\n          e = type;\n          type = e && e.type;\n        }\n\n        if (!type) {\n          return;\n        }\n\n        var events = this.__events[type];\n\n        if (!events || !events.length) {\n          return;\n        }\n\n        events.forEach(function (listener) {\n          listener.call(_this, e);\n        });\n      };\n\n      _proto.off = function off(type, listener) {\n        var __events = this.__events;\n        var events = __events[type];\n\n        if (!events || !events.length) {\n          return;\n        } // 如果没有指定方法，则删除所有项\n\n\n        if (!listener) {\n          delete __events[type];\n          return;\n        } // 删除指定的 listener\n\n\n        for (var i = 0, len = events.length; i < len; i++) {\n          if (events[i] === listener) {\n            events.splice(i, 1);\n            i--;\n          }\n        }\n      };\n\n      return EventEmit;\n    }();\n\n    var Base = /*#__PURE__*/function (_Emit) {\n      _inheritsLoose(Base, _Emit);\n\n      var _proto = Base.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {};\n      };\n\n      function Base(cfg) {\n        var _this;\n\n        _this = _Emit.call(this) || this;\n        var attrs = {};\n\n        var defaultCfg = _this.getDefaultCfg();\n\n        _this._attrs = attrs;\n        mix(attrs, defaultCfg, cfg);\n        return _this;\n      }\n\n      _proto.get = function get(name) {\n        return this._attrs[name];\n      };\n\n      _proto.set = function set(name, value) {\n        this._attrs[name] = value;\n      };\n\n      _proto.destroy = function destroy() {\n        this._attrs = {};\n        this.destroyed = true;\n      };\n\n      return Base;\n    }(EventEmit);\n\n    var Plot = /*#__PURE__*/function () {\n      function Plot(cfg) {\n        mix(this, cfg);\n\n        this._init();\n      }\n\n      var _proto = Plot.prototype;\n\n      _proto._init = function _init() {\n        var self = this;\n        var start = self.start;\n        var end = self.end;\n        var xMin = Math.min(start.x, end.x);\n        var xMax = Math.max(start.x, end.x);\n        var yMin = Math.min(start.y, end.y);\n        var yMax = Math.max(start.y, end.y);\n        this.tl = {\n          x: xMin,\n          y: yMin\n        };\n        this.tr = {\n          x: xMax,\n          y: yMin\n        };\n        this.bl = {\n          x: xMin,\n          y: yMax\n        };\n        this.br = {\n          x: xMax,\n          y: yMax\n        };\n        this.width = xMax - xMin;\n        this.height = yMax - yMin;\n      }\n      /**\n       * reset\n       * @param  {Object} start start point\n       * @param  {Object} end end point\n       */\n      ;\n\n      _proto.reset = function reset(start, end) {\n        this.start = start;\n        this.end = end;\n\n        this._init();\n      }\n      /**\n       * check the point is in the range of plot\n       * @param  {Number}  x x value\n       * @param  {[type]}  y y value\n       * @return {Boolean} return the result\n       */\n      ;\n\n      _proto.isInRange = function isInRange(x, y) {\n        if (isObject(x)) {\n          y = x.y;\n          x = x.x;\n        }\n\n        var tl = this.tl;\n        var br = this.br;\n        return tl.x <= x && x <= br.x && tl.y <= y && y <= br.y;\n      };\n\n      return Plot;\n    }();\n\n    var Matrix = {\n      generateDefault: function generateDefault() {\n        return [1, 0, 0, 1, 0, 0];\n      },\n      isChanged: function isChanged(m) {\n        return m[0] !== 1 || m[1] !== 0 || m[2] !== 0 || m[3] !== 1 || m[4] !== 0 || m[5] !== 0;\n      },\n      multiply: function multiply(m1, m2) {\n        var m11 = m1[0] * m2[0] + m1[2] * m2[1];\n        var m12 = m1[1] * m2[0] + m1[3] * m2[1];\n        var m21 = m1[0] * m2[2] + m1[2] * m2[3];\n        var m22 = m1[1] * m2[2] + m1[3] * m2[3];\n        var dx = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n        var dy = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n        return [m11, m12, m21, m22, dx, dy];\n      },\n      scale: function scale(out, m, v) {\n        out[0] = m[0] * v[0];\n        out[1] = m[1] * v[0];\n        out[2] = m[2] * v[1];\n        out[3] = m[3] * v[1];\n        out[4] = m[4];\n        out[5] = m[5];\n        return out;\n      },\n      rotate: function rotate(out, m, radian) {\n        var c = Math.cos(radian);\n        var s = Math.sin(radian);\n        var m11 = m[0] * c + m[2] * s;\n        var m12 = m[1] * c + m[3] * s;\n        var m21 = m[0] * -s + m[2] * c;\n        var m22 = m[1] * -s + m[3] * c;\n        out[0] = m11;\n        out[1] = m12;\n        out[2] = m21;\n        out[3] = m22;\n        out[4] = m[4];\n        out[5] = m[5];\n        return out;\n      },\n      translate: function translate(out, m, v) {\n        out[0] = m[0];\n        out[1] = m[1];\n        out[2] = m[2];\n        out[3] = m[3];\n        out[4] = m[4] + m[0] * v[0] + m[2] * v[1];\n        out[5] = m[5] + m[1] * v[0] + m[3] * v[1];\n        return out;\n      },\n      transform: function transform(m, actions) {\n        var out = [].concat(m);\n\n        for (var i = 0, len = actions.length; i < len; i++) {\n          var action = actions[i];\n\n          switch (action[0]) {\n            case 't':\n              Matrix.translate(out, out, [action[1], action[2]]);\n              break;\n\n            case 's':\n              Matrix.scale(out, out, [action[1], action[2]]);\n              break;\n\n            case 'r':\n              Matrix.rotate(out, out, action[1]);\n              break;\n          }\n        }\n\n        return out;\n      }\n    };\n\n    /**\n     * 2 Dimensional Vector\n     * @module vector2\n     */\n    var Vector2 = {\n      /**\n       * Creates a new, empty vector2\n       *\n       * @return {vector2} a new 2D vector\n       */\n      create: function create() {\n        return [0, 0];\n      },\n\n      /**\n       * Calculates the length of a vector2\n       *\n       * @param {vector2} v vector to calculate length of\n       * @return {Number} length of v\n       */\n      length: function length(v) {\n        var x = v[0];\n        var y = v[1];\n        return Math.sqrt(x * x + y * y);\n      },\n\n      /**\n       * Normalize a vector2\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v vector to normalize\n       * @return {vector2} out\n       */\n      normalize: function normalize(out, v) {\n        var len = this.length(v);\n\n        if (len === 0) {\n          out[0] = 0;\n          out[1] = 0;\n        } else {\n          out[0] = v[0] / len;\n          out[1] = v[1] / len;\n        }\n\n        return out;\n      },\n\n      /**\n       * Adds two vector2's\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      add: function add(out, v1, v2) {\n        out[0] = v1[0] + v2[0];\n        out[1] = v1[1] + v2[1];\n        return out;\n      },\n\n      /**\n       * Subtracts vector v2 from vector v1\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      sub: function sub(out, v1, v2) {\n        out[0] = v1[0] - v2[0];\n        out[1] = v1[1] - v2[1];\n        return out;\n      },\n\n      /**\n       * Scales a vector2 by a scalar number\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v the vector to scale\n       * @param {Number} s amount to scale the vector by\n       * @return {vector2} out\n       */\n      scale: function scale(out, v, s) {\n        out[0] = v[0] * s;\n        out[1] = v[1] * s;\n        return out;\n      },\n\n      /**\n       * Calculates the dot product of two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Number} dot product of v1 and v2\n       */\n      dot: function dot(v1, v2) {\n        return v1[0] * v2[0] + v1[1] * v2[1];\n      },\n\n      /**\n       * Calculates the direction of two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Boolean} the direction of v1 and v2\n       */\n      direction: function direction(v1, v2) {\n        return v1[0] * v2[1] - v2[0] * v1[1];\n      },\n\n      /**\n       * Calculates the angle of two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Number} angle of v1 and v2\n       */\n      angle: function angle(v1, v2) {\n        var theta = this.dot(v1, v2) / (this.length(v1) * this.length(v2));\n        return Math.acos(theta);\n      },\n\n      /**\n       * Calculates the angle of two vector2's with direction\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @param {Boolean} direction the direction of two vector2's\n       * @return {Number} angle of v1 and v2\n       */\n      angleTo: function angleTo(v1, v2, direction) {\n        var angle = this.angle(v1, v2);\n        var angleLargeThanPI = this.direction(v1, v2) >= 0;\n\n        if (direction) {\n          if (angleLargeThanPI) {\n            return Math.PI * 2 - angle;\n          }\n\n          return angle;\n        }\n\n        if (angleLargeThanPI) {\n          return angle;\n        }\n\n        return Math.PI * 2 - angle;\n      },\n\n      /**\n       * whether a vector2 is zero vector\n       *\n       * @param  {vector2} v vector to calculate\n       * @return {Boolean}   is or not a zero vector\n       */\n      zero: function zero(v) {\n        return v[0] === 0 && v[1] === 0;\n      },\n\n      /**\n       * Calculates the euclidian distance between two vector2's\n       *\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {Number} distance between a and b\n       */\n      distance: function distance(v1, v2) {\n        var x = v2[0] - v1[0];\n        var y = v2[1] - v1[1];\n        return Math.sqrt(x * x + y * y);\n      },\n\n      /**\n       * Creates a new vector2 initialized with values from an existing vector\n       *\n       * @param {vector2} v vector to clone\n       * @return {Array} a new 2D vector\n       */\n      clone: function clone(v) {\n        return [v[0], v[1]];\n      },\n\n      /**\n       * Return the minimum of two vector2's\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      min: function min(out, v1, v2) {\n        out[0] = Math.min(v1[0], v2[0]);\n        out[1] = Math.min(v1[1], v2[1]);\n        return out;\n      },\n\n      /**\n       * Return the maximum of two vector2's\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v1 the first operand\n       * @param {vector2} v2 the second operand\n       * @return {vector2} out\n       */\n      max: function max(out, v1, v2) {\n        out[0] = Math.max(v1[0], v2[0]);\n        out[1] = Math.max(v1[1], v2[1]);\n        return out;\n      },\n\n      /**\n       * Transforms the vector2 with a mat2d\n       *\n       * @param {vector2} out the receiving vector\n       * @param {vector2} v the vector to transform\n       * @param {mat2d} m matrix to transform with\n       * @return {vector2} out\n       */\n      transformMat2d: function transformMat2d(out, v, m) {\n        var x = v[0];\n        var y = v[1];\n        out[0] = m[0] * x + m[2] * y + m[4];\n        out[1] = m[1] * x + m[3] * y + m[5];\n        return out;\n      }\n    };\n\n    var defaultMatrix = [1, 0, 0, 1, 0, 0];\n\n    var Base$1 = /*#__PURE__*/function () {\n      var _proto = Base.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {};\n\n      function Base(cfg) {\n        this._initDefaultCfg();\n\n        mix(this, cfg);\n        var start;\n        var end;\n\n        if (this.plot) {\n          start = this.plot.bl;\n          end = this.plot.tr;\n          this.start = start;\n          this.end = end;\n        } else {\n          start = this.start;\n          end = this.end;\n        }\n\n        this.init(start, end);\n      }\n\n      _proto._scale = function _scale(s1, s2) {\n        var matrix = this.matrix;\n        var center = this.center;\n        Matrix.translate(matrix, matrix, [center.x, center.y]);\n        Matrix.scale(matrix, matrix, [s1, s2]);\n        Matrix.translate(matrix, matrix, [-center.x, -center.y]);\n      };\n\n      _proto.init = function init(start, end) {\n        this.matrix = [].concat(defaultMatrix); // 设置中心点\n\n        this.center = {\n          x: (end.x - start.x) / 2 + start.x,\n          y: (end.y - start.y) / 2 + start.y\n        };\n\n        if (this.scale) {\n          this._scale(this.scale[0], this.scale[1]);\n        }\n      };\n\n      _proto.convertPoint = function convertPoint(point) {\n        var _this$_convertPoint = this._convertPoint(point),\n            x = _this$_convertPoint.x,\n            y = _this$_convertPoint.y;\n\n        if (!Matrix.isChanged(this.matrix)) {\n          return {\n            x: x,\n            y: y\n          };\n        }\n\n        var vector = [x, y];\n        Vector2.transformMat2d(vector, vector, this.matrix);\n        return {\n          x: vector[0],\n          y: vector[1]\n        };\n      };\n\n      _proto.invertPoint = function invertPoint(point) {\n        return this._invertPoint(point);\n      };\n\n      _proto._convertPoint = function _convertPoint(point) {\n        return point;\n      };\n\n      _proto._invertPoint = function _invertPoint(point) {\n        return point;\n      };\n\n      _proto.reset = function reset(plot) {\n        this.plot = plot;\n        var bl = plot.bl,\n            tr = plot.tr;\n        this.start = bl;\n        this.end = tr;\n        this.init(bl, tr);\n      };\n\n      return Base;\n    }();\n\n    var Cartesian = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Cartesian, _Base);\n\n      function Cartesian() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Cartesian.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'cartesian';\n        this.transposed = false;\n        this.isRect = true;\n      };\n\n      _proto.init = function init(start, end) {\n        _Base.prototype.init.call(this, start, end);\n\n        this.x = {\n          start: start.x,\n          end: end.x\n        };\n        this.y = {\n          start: start.y,\n          end: end.y\n        };\n      };\n\n      _proto._convertPoint = function _convertPoint(point) {\n        var self = this;\n        var transposed = self.transposed;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var x = self.x;\n        var y = self.y;\n        return {\n          x: x.start + (x.end - x.start) * point[xDim],\n          y: y.start + (y.end - y.start) * point[yDim]\n        };\n      };\n\n      _proto._invertPoint = function _invertPoint(point) {\n        var self = this;\n        var transposed = self.transposed;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var x = self.x;\n        var y = self.y;\n        var rst = {};\n        rst[xDim] = (point.x - x.start) / (x.end - x.start);\n        rst[yDim] = (point.y - y.start) / (y.end - y.start);\n        return rst;\n      };\n\n      return Cartesian;\n    }(Base$1);\n\n    Base$1.Cartesian = Cartesian;\n    Base$1.Rect = Cartesian;\n\n    /**\n     * @fileOverview the Attribute base class\n     */\n\n    function toScaleString(scale, value) {\n      if (isString(value)) {\n        return value;\n      }\n\n      return scale.invert(scale.scale(value));\n    }\n    /**\n     * 所有视觉通道属性的基类\n     * @class Attr\n     */\n\n\n    var AttributeBase = /*#__PURE__*/function () {\n      function AttributeBase(cfg) {\n        var _this = this;\n\n        /**\n         * 属性的类型\n         * @type {String}\n         */\n        this.type = 'base';\n        /**\n         * 属性的名称\n         * @type {String}\n         */\n\n        this.name = null;\n        /**\n         * 回调函数\n         * @type {Function}\n         */\n\n        this.method = null;\n        /**\n         * 备选的值数组\n         * @type {Array}\n         */\n\n        this.values = [];\n        /**\n         * 属性内部的度量\n         * @type {Array}\n         */\n\n        this.scales = [];\n        /**\n         * 是否通过线性取值, 如果未指定，则根据数值的类型判定\n         * @type {Boolean}\n         */\n\n        this.linear = null;\n        /**\n         * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\n         */\n\n        var mixedCallback = null;\n        var defaultCallback = this.callback;\n\n        if (cfg.callback) {\n          var userCallback = cfg.callback;\n\n          mixedCallback = function mixedCallback() {\n            for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n              params[_key] = arguments[_key];\n            }\n\n            var ret = userCallback.apply(void 0, params);\n\n            if (isNil(ret)) {\n              ret = defaultCallback.apply(_this, params);\n            }\n\n            return ret;\n          };\n        }\n\n        mix(this, cfg);\n\n        if (mixedCallback) {\n          mix(this, {\n            callback: mixedCallback\n          });\n        }\n      } // 获取属性值，将值映射到视觉通道\n\n\n      var _proto = AttributeBase.prototype;\n\n      _proto._getAttrValue = function _getAttrValue(scale, value) {\n        var values = this.values;\n\n        if (scale.isCategory && !this.linear) {\n          var index = scale.translate(value);\n          return values[index % values.length];\n        }\n\n        var percent = scale.scale(value);\n        return this.getLinearValue(percent);\n      }\n      /**\n       * 如果进行线性映射，返回对应的映射值\n       * @protected\n       * @param  {Number} percent 百分比\n       * @return {*}  颜色值、形状、大小等\n       */\n      ;\n\n      _proto.getLinearValue = function getLinearValue(percent) {\n        var values = this.values;\n        var steps = values.length - 1;\n        var step = Math.floor(steps * percent);\n        var leftPercent = steps * percent - step;\n        var start = values[step];\n        var end = step === steps ? start : values[step + 1];\n        var rstValue = start + (end - start) * leftPercent;\n        return rstValue;\n      }\n      /**\n       * 默认的回调函数\n       * @param {*} value 回调函数的值\n       * @type {Function}\n       * @return {Array} 返回映射后的值\n       */\n      ;\n\n      _proto.callback = function callback(value) {\n        var self = this;\n        var scale = self.scales[0];\n        var rstValue = null;\n\n        if (scale.type === 'identity') {\n          rstValue = scale.value;\n        } else {\n          rstValue = self._getAttrValue(scale, value);\n        }\n\n        return rstValue;\n      }\n      /**\n       * 根据度量获取属性名\n       * @return {Array} dims of this Attribute\n       */\n      ;\n\n      _proto.getNames = function getNames() {\n        var scales = this.scales;\n        var names = this.names;\n        var length = Math.min(scales.length, names.length);\n        var rst = [];\n\n        for (var i = 0; i < length; i++) {\n          rst.push(names[i]);\n        }\n\n        return rst;\n      }\n      /**\n       * 根据度量获取维度名\n       * @return {Array} dims of this Attribute\n       */\n      ;\n\n      _proto.getFields = function getFields() {\n        var scales = this.scales;\n        var rst = [];\n        each(scales, function (scale) {\n          rst.push(scale.field);\n        });\n        return rst;\n      }\n      /**\n       * 根据名称获取度量\n       * @param  {String} name the name of scale\n       * @return {Scale} scale\n       */\n      ;\n\n      _proto.getScale = function getScale(name) {\n        var scales = this.scales;\n        var names = this.names;\n        var index = names.indexOf(name);\n        return scales[index];\n      }\n      /**\n       * 映射数据\n       * @param {*} param1...paramn 多个数值\n       * @return {Array} 映射的值组成的数组\n       */\n      ;\n\n      _proto.mapping = function mapping() {\n        var scales = this.scales;\n        var callback = this.callback;\n\n        for (var _len2 = arguments.length, params = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          params[_key2] = arguments[_key2];\n        }\n\n        var values = params;\n\n        if (callback) {\n          for (var i = 0, len = params.length; i < len; i++) {\n            params[i] = this._toOriginParam(params[i], scales[i]);\n          }\n\n          values = callback.apply(this, params);\n        }\n\n        values = [].concat(values);\n        return values;\n      } // 原始的参数\n      ;\n\n      _proto._toOriginParam = function _toOriginParam(param, scale) {\n        var rst = param;\n\n        if (!scale.isLinear) {\n          if (isArray(param)) {\n            rst = [];\n\n            for (var i = 0, len = param.length; i < len; i++) {\n              rst.push(toScaleString(scale, param[i]));\n            }\n          } else {\n            rst = toScaleString(scale, param);\n          }\n        }\n\n        return rst;\n      };\n\n      return AttributeBase;\n    }();\n\n    var Position = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Position, _Base);\n\n      function Position(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['x', 'y'];\n        _this.type = 'position';\n        return _this;\n      }\n\n      var _proto = Position.prototype;\n\n      _proto.mapping = function mapping(x, y) {\n        var scales = this.scales;\n        var coord = this.coord;\n        var scaleX = scales[0];\n        var scaleY = scales[1];\n        var rstX;\n        var rstY;\n        var obj;\n\n        if (isNil(x) || isNil(y)) {\n          return [];\n        }\n\n        if (isArray(y) && isArray(x)) {\n          rstX = [];\n          rstY = [];\n\n          for (var i = 0, j = 0, xLen = x.length, yLen = y.length; i < xLen && j < yLen; i++, j++) {\n            obj = coord.convertPoint({\n              x: scaleX.scale(x[i]),\n              y: scaleY.scale(y[j])\n            });\n            rstX.push(obj.x);\n            rstY.push(obj.y);\n          }\n        } else if (isArray(y)) {\n          x = scaleX.scale(x);\n          rstY = [];\n          each(y, function (yVal) {\n            yVal = scaleY.scale(yVal);\n            obj = coord.convertPoint({\n              x: x,\n              y: yVal\n            });\n\n            if (rstX && rstX !== obj.x) {\n              if (!isArray(rstX)) {\n                rstX = [rstX];\n              }\n\n              rstX.push(obj.x);\n            } else {\n              rstX = obj.x;\n            }\n\n            rstY.push(obj.y);\n          });\n        } else if (isArray(x)) {\n          y = scaleY.scale(y);\n          rstX = [];\n          each(x, function (xVal) {\n            xVal = scaleX.scale(xVal);\n            obj = coord.convertPoint({\n              x: xVal,\n              y: y\n            });\n\n            if (rstY && rstY !== obj.y) {\n              if (!isArray(rstY)) {\n                rstY = [rstY];\n              }\n\n              rstY.push(obj.y);\n            } else {\n              rstY = obj.y;\n            }\n\n            rstX.push(obj.x);\n          });\n        } else {\n          x = scaleX.scale(x);\n          y = scaleY.scale(y);\n          var point = coord.convertPoint({\n            x: x,\n            y: y\n          });\n          rstX = point.x;\n          rstY = point.y;\n        }\n\n        return [rstX, rstY];\n      };\n\n      return Position;\n    }(AttributeBase);\n\n    var Shape = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Shape, _Base);\n\n      function Shape(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['shape'];\n        _this.type = 'shape';\n        _this.gradient = null;\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      var _proto = Shape.prototype;\n\n      _proto.getLinearValue = function getLinearValue(percent) {\n        var values = this.values;\n        var index = Math.round((values.length - 1) * percent);\n        return values[index];\n      };\n\n      return Shape;\n    }(AttributeBase);\n\n    var Size = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Size, _Base);\n\n      function Size(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['size'];\n        _this.type = 'size';\n        _this.gradient = null;\n        return _this;\n      }\n\n      return Size;\n    }(AttributeBase);\n\n    function getValue(start, end, percent, index) {\n      var value = start[index] + (end[index] - start[index]) * percent;\n      return value;\n    } // convert to hex\n\n\n    function arr2hex(arr) {\n      return '#' + toRGBValue(arr[0]) + toRGBValue(arr[1]) + toRGBValue(arr[2]);\n    }\n\n    function toRGBValue(value) {\n      value = Math.round(value);\n      value = value.toString(16);\n\n      if (value.length === 1) {\n        value = '0' + value;\n      }\n\n      return value;\n    }\n\n    function calColor(colors, percent) {\n      var steps = colors.length - 1;\n      var step = Math.floor(steps * percent);\n      var left = steps * percent - step;\n      var start = colors[step];\n      var end = step === steps ? start : colors[step + 1];\n      var rgb = arr2hex([getValue(start, end, left, 0), getValue(start, end, left, 1), getValue(start, end, left, 2)]);\n      return rgb;\n    }\n\n    function hex2arr(str) {\n      var arr = [];\n      arr.push(parseInt(str.substr(1, 2), 16));\n      arr.push(parseInt(str.substr(3, 2), 16));\n      arr.push(parseInt(str.substr(5, 2), 16));\n      return arr;\n    }\n\n    var colorCache = {\n      black: '#000000',\n      blue: '#0000ff',\n      grey: '#808080',\n      green: '#008000',\n      orange: '#ffa500',\n      pink: '#ffc0cb',\n      purple: '#800080',\n      red: '#ff0000',\n      white: '#ffffff',\n      yellow: '#ffff00'\n    };\n    /**\n     * Returns a hexadecimal string representing this color in RGB space, such as #f7eaba.\n     * @param  {String} color color value\n     * @return {String} Returns a hexadecimal string\n     */\n\n    function toHex(color) {\n      if (colorCache[color]) {\n        return colorCache[color];\n      }\n\n      if (color[0] === '#') {\n        if (color.length === 7) {\n          return color;\n        }\n\n        var hex = color.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, function (m, r, g, b) {\n          return '#' + r + r + g + g + b + b;\n        }); // hex3 to hex6\n\n        colorCache[color] = hex;\n        return hex;\n      } // rgb/rgba to hex\n\n\n      var rst = color.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n      rst.shift();\n      rst = arr2hex(rst);\n      colorCache[color] = rst;\n      return rst;\n    }\n    /**\n     * handle the gradient color\n     * @param  {Array} colors the colors\n     * @return {String} return the color value\n     */\n\n\n    function gradient(colors) {\n      var points = [];\n\n      if (isString(colors)) {\n        colors = colors.split('-');\n      }\n\n      each(colors, function (color) {\n        if (color.indexOf('#') === -1) {\n          color = toHex(color);\n        }\n\n        points.push(hex2arr(color));\n      });\n      return function (percent) {\n        return calColor(points, percent);\n      };\n    }\n\n    var Color = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Color, _Base);\n\n      function Color(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n        _this.names = ['color'];\n        _this.type = 'color';\n        _this.gradient = null;\n\n        if (isString(_this.values)) {\n          _this.linear = true;\n        }\n\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      var _proto = Color.prototype;\n\n      _proto.getLinearValue = function getLinearValue(percent) {\n        var gradient$1 = this.gradient;\n\n        if (!gradient$1) {\n          var values = this.values;\n          gradient$1 = gradient(values);\n          this.gradient = gradient$1;\n        }\n\n        return gradient$1(percent);\n      };\n\n      return Color;\n    }(AttributeBase);\n\n    var Attr = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Position: Position,\n        Shape: Shape,\n        Size: Size,\n        Color: Color\n    });\n\n    var Shape$1 = {};\n    var ShapeBase = {\n      _coord: null,\n\n      /**\n       * draw the shape\n       * @param {Object} cfg options\n       * @param {Object} container container to store the shapes\n       */\n      draw: function draw(cfg, container) {\n        if (this.drawShape) {\n          this.drawShape(cfg, container);\n        }\n      },\n\n      /**\n       * set the coordinate instance\n       * @param {Coord} coord coordinate instance\n       */\n      setCoord: function setCoord(coord) {\n        this._coord = coord;\n      },\n\n      /**\n       * convert the normalized value to the canvas position\n       * @param  {point} point the point to convert\n       * @return {point} point return the result\n       */\n      parsePoint: function parsePoint(point) {\n        var coord = this._coord;\n\n        if (coord.isPolar) {\n          if (point.x === 1) point.x = 0.9999999;\n          if (point.y === 1) point.y = 0.9999999;\n        }\n\n        return coord.convertPoint(point);\n      },\n\n      /**\n       * convert the normalized value to the canvas position\n       * @param  {points} points the array that store the points\n       * @return {points} points return the result\n       */\n      parsePoints: function parsePoints(points) {\n        if (!points) return false;\n        var self = this;\n        var rst = [];\n        points.forEach(function (point) {\n          rst.push(self.parsePoint(point));\n        });\n        return rst;\n      }\n    };\n    var ShapeFactoryBase = {\n      defaultShapeType: null,\n      setCoord: function setCoord(coord) {\n        this._coord = coord;\n      },\n      getShape: function getShape(type) {\n        var self = this;\n\n        if (isArray(type)) {\n          type = type[0];\n        }\n\n        var shape = self[type] || self[self.defaultShapeType];\n        shape._coord = self._coord;\n        return shape;\n      },\n      getShapePoints: function getShapePoints(type, cfg) {\n        var shape = this.getShape(type);\n        var fn = shape.getPoints || shape.getShapePoints || this.getDefaultPoints;\n        var points = fn(cfg);\n        return points;\n      },\n      getDefaultPoints: function getDefaultPoints()\n      /* cfg */\n      {\n        return [];\n      },\n      drawShape: function drawShape(type, cfg, container) {\n        var shape = this.getShape(type);\n\n        if (!cfg.color) {\n          cfg.color = Global.colors[0];\n        }\n\n        return shape.draw(cfg, container);\n      }\n    };\n\n    Shape$1.registerFactory = function (factoryName, cfg) {\n      var className = upperFirst(factoryName);\n      var geomObj = mix({}, ShapeFactoryBase, cfg);\n      Shape$1[className] = geomObj;\n      geomObj.name = factoryName;\n      return geomObj;\n    };\n\n    Shape$1.registerShape = function (factoryName, shapeType, cfg) {\n      var className = upperFirst(factoryName);\n      var factory = Shape$1[className];\n      var shapeObj = mix({}, ShapeBase, cfg);\n      factory[shapeType] = shapeObj;\n      return shapeObj;\n    };\n\n    Shape$1.registShape = Shape$1.registerShape;\n\n    Shape$1.getShapeFactory = function (factoryName) {\n      var self = this;\n      factoryName = factoryName || 'point';\n      var className = upperFirst(factoryName);\n      return self[className];\n    };\n\n    function _mix$1(dist, obj) {\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {\n          dist[key] = obj[key];\n        }\n      }\n    }\n\n    var mix$1 = function mix(dist, src1, src2, src3) {\n      if (src1) _mix$1(dist, src1);\n      if (src2) _mix$1(dist, src2);\n      if (src3) _mix$1(dist, src3);\n      return dist;\n    };\n\n    var mix_1 = mix$1;\n\n    var Adjust = /*#__PURE__*/function () {\n      var _proto = Adjust.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.adjustNames = ['x', 'y']; // 调整的维度，默认,x,y都做调整\n      };\n\n      function Adjust(cfg) {\n        this._initDefaultCfg();\n\n        mix_1(this, cfg);\n      }\n      /**\n       * @override\n       */\n\n\n      _proto.processAdjust = function processAdjust()\n      /* dataArray */\n      {};\n\n      return Adjust;\n    }();\n\n    var base = Adjust;\n\n    var GROUP_ATTRS = ['color', 'size', 'shape'];\n    var FIELD_ORIGIN = '_origin';\n    var FIELD_ORIGIN_Y = '_originY';\n\n    function parseFields(field) {\n      if (isArray(field)) {\n        return field;\n      }\n\n      if (isString(field)) {\n        return field.split('*');\n      }\n\n      return [field];\n    }\n    /**\n     * The parent class for Geometry\n     * @class Geom\n     */\n\n\n    var Geom = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Geom, _Base);\n\n      function Geom() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Geom.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          /**\n           * geometry type\n           * @type {String}\n           */\n          type: null,\n\n          /**\n           * the data of geometry\n           * @type {Array}\n           */\n          data: null,\n\n          /**\n           * the attrs of geo,etry\n           * @type {Object}\n           */\n          attrs: {},\n          scales: {},\n\n          /**\n           * group for storing the shapes\n           * @type {Canvas}\n           */\n          container: null,\n\n          /**\n           * style options\n           * @type {Object}\n           */\n          styleOptions: null,\n          chart: null,\n          shapeType: '',\n\n          /**\n           * wether to generate key points for each shape\n           * @protected\n           * @type {Boolean}\n           */\n          generatePoints: false,\n          attrOptions: {},\n          sortable: false,\n          startOnZero: true,\n          visible: true,\n          connectNulls: false,\n          // 是否丢弃没有值的分组。\n          ignoreEmptyGroup: false,\n          // 是否已经初始化\n          isInit: false\n        };\n      };\n\n      _proto.init = function init() {\n        var self = this;\n        var isInit = self.get('isInit');\n\n        if (isInit) {\n          return;\n        }\n\n        self._initAttrs();\n\n        self._processData();\n\n        self.set('isInit', true);\n      };\n\n      _proto._getGroupScales = function _getGroupScales() {\n        var self = this;\n        var scales = [];\n        each(GROUP_ATTRS, function (attrName) {\n          var attr = self.getAttr(attrName);\n\n          if (attr) {\n            var attrScales = attr.scales;\n            each(attrScales, function (scale) {\n              if (scale && scale.isCategory && scales.indexOf(scale) === -1) {\n                scales.push(scale);\n              }\n            });\n          }\n        });\n        return scales;\n      };\n\n      _proto._groupData = function _groupData(data) {\n        var self = this;\n        var colDefs = self.get('colDefs');\n\n        var groupScales = self._getGroupScales();\n\n        if (groupScales.length) {\n          var appendConditions = {};\n          var names = [];\n          each(groupScales, function (scale) {\n            var field = scale.field;\n            names.push(field);\n\n            if (colDefs && colDefs[field] && colDefs[field].values) {\n              // users have defined\n              appendConditions[scale.field] = colDefs[field].values;\n            }\n          });\n          return group(data, names, appendConditions);\n        }\n\n        return [data];\n      };\n\n      _proto._setAttrOptions = function _setAttrOptions(attrName, attrCfg) {\n        var options = this.get('attrOptions');\n        options[attrName] = attrCfg;\n        var attrs = this.get('attrs'); // 说明已经初始化过了\n\n        if (Object.keys(attrs).length) {\n          this._createAttr(attrName, attrCfg);\n        }\n      };\n\n      _proto._createAttrOption = function _createAttrOption(attrName, field, cfg, defaultValues) {\n        var attrCfg = {};\n        attrCfg.field = field;\n\n        if (cfg) {\n          if (isFunction(cfg)) {\n            attrCfg.callback = cfg;\n          } else {\n            attrCfg.values = cfg;\n          }\n        } else {\n          attrCfg.values = defaultValues;\n        }\n\n        this._setAttrOptions(attrName, attrCfg);\n      };\n\n      _proto._createAttr = function _createAttr(type, option) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var coord = self.get('coord');\n        var className = upperFirst(type);\n        var fields = parseFields(option.field);\n\n        if (type === 'position') {\n          option.coord = coord;\n        }\n\n        var scales = [];\n\n        for (var i = 0, len = fields.length; i < len; i++) {\n          var field = fields[i];\n\n          var scale = self._createScale(field);\n\n          scales.push(scale);\n        }\n\n        if (type === 'position') {\n          var yScale = scales[1]; // 饼图的处理，但是还不知道为啥\n\n          if (coord.type === 'polar' && coord.transposed && self.hasAdjust('stack')) {\n            if (yScale.values.length) {\n              yScale.change({\n                nice: false,\n                min: 0,\n                max: Math.max.apply(null, yScale.values)\n              });\n            }\n          }\n        }\n\n        option.scales = scales;\n        var attr = new Attr[className](option);\n        attrs[type] = attr;\n        return attr;\n      };\n\n      _proto._initAttrs = function _initAttrs() {\n        var self = this;\n        var attrOptions = self.get('attrOptions');\n\n        for (var type in attrOptions) {\n          if (attrOptions.hasOwnProperty(type)) {\n            this._createAttr(type, attrOptions[type]);\n          }\n        }\n      };\n\n      _proto._createScale = function _createScale(field) {\n        var scales = this.get('scales');\n        var scale = scales[field];\n\n        if (!scale) {\n          scale = this.get('chart').createScale(field);\n          scales[field] = scale;\n        }\n\n        return scale;\n      };\n\n      _proto._processData = function _processData() {\n        var self = this;\n        var data = this.get('data');\n        var dataArray = [];\n\n        var groupedArray = this._groupData(data);\n\n        if (this.get('ignoreEmptyGroup')) {\n          var yScale = this.getYScale();\n          groupedArray = groupedArray.filter(function (group) {\n            return group.some(function (item) {\n              return typeof item[yScale.field] !== 'undefined';\n            });\n          });\n        }\n\n        for (var i = 0, len = groupedArray.length; i < len; i++) {\n          var subData = groupedArray[i];\n\n          var tempData = self._saveOrigin(subData);\n\n          if (this.hasAdjust('dodge')) {\n            self._numberic(tempData);\n          }\n\n          dataArray.push(tempData);\n        }\n\n        if (self.get('adjust')) {\n          self._adjustData(dataArray);\n        }\n\n        if (self.get('sortable')) {\n          self._sort(dataArray);\n        }\n\n        self.emit('afterprocessdata', {\n          dataArray: dataArray\n        });\n        self.set('mappingData', dataArray);\n        self.set('dataArray', dataArray);\n        return dataArray;\n      };\n\n      _proto._saveOrigin = function _saveOrigin(data) {\n        var rst = [];\n\n        for (var i = 0, len = data.length; i < len; i++) {\n          var origin = data[i];\n          var obj = {};\n\n          for (var k in origin) {\n            obj[k] = origin[k];\n          }\n\n          obj[FIELD_ORIGIN] = origin;\n          rst.push(obj);\n        }\n\n        return rst;\n      };\n\n      _proto._numberic = function _numberic(data) {\n        var positionAttr = this.getAttr('position');\n        var scales = positionAttr.scales;\n\n        for (var j = 0, len = data.length; j < len; j++) {\n          var obj = data[j];\n          var count = Math.min(2, scales.length);\n\n          for (var i = 0; i < count; i++) {\n            var scale = scales[i];\n\n            if (scale.isCategory) {\n              var field = scale.field;\n              obj[field] = scale.translate(obj[field]);\n            }\n          }\n        }\n      };\n\n      _proto._adjustData = function _adjustData(dataArray) {\n        var self = this;\n        var adjust = self.get('adjust');\n\n        if (adjust) {\n          var adjustType = upperFirst(adjust.type);\n\n          if (!base[adjustType]) {\n            throw new Error('not support such adjust : ' + adjust);\n          }\n\n          var xScale = self.getXScale();\n          var yScale = self.getYScale();\n          var cfg = mix({\n            xField: xScale.field,\n            yField: yScale.field\n          }, adjust);\n          var adjustObject = new base[adjustType](cfg);\n          adjustObject.processAdjust(dataArray);\n\n          if (adjustType === 'Stack') {\n            self._updateStackRange(yScale.field, yScale, dataArray);\n          }\n        }\n      };\n\n      _proto._updateStackRange = function _updateStackRange(field, scale, dataArray) {\n        var mergeArray = merge(dataArray);\n        var min = scale.min;\n        var max = scale.max;\n\n        for (var i = 0, len = mergeArray.length; i < len; i++) {\n          var obj = mergeArray[i];\n          var tmpMin = Math.min.apply(null, obj[field]);\n          var tmpMax = Math.max.apply(null, obj[field]);\n\n          if (tmpMin < min) {\n            min = tmpMin;\n          }\n\n          if (tmpMax > max) {\n            max = tmpMax;\n          }\n        }\n\n        if (min < scale.min || max > scale.max) {\n          scale.change({\n            min: min,\n            max: max\n          });\n        }\n      };\n\n      _proto._sort = function _sort(mappedArray) {\n        var self = this;\n        var xScale = self.getXScale();\n        var field = xScale.field,\n            type = xScale.type;\n\n        if (type !== 'identity' && xScale.values.length > 1) {\n          each(mappedArray, function (itemArr) {\n            itemArr.sort(function (obj1, obj2) {\n              if (type === 'timeCat') {\n                return toTimeStamp(obj1[FIELD_ORIGIN][field]) - toTimeStamp(obj2[FIELD_ORIGIN][field]);\n              }\n\n              return xScale.translate(obj1[FIELD_ORIGIN][field]) - xScale.translate(obj2[FIELD_ORIGIN][field]);\n            });\n          });\n        }\n\n        self.set('hasSorted', true);\n        self.set('dataArray', mappedArray);\n      };\n\n      _proto.paint = function paint() {\n        var self = this;\n        var dataArray = self.get('mappingData');\n        var mappedArray = [];\n        var shapeFactory = self.getShapeFactory();\n        shapeFactory.setCoord(self.get('coord'));\n\n        self._beforeMapping(dataArray);\n\n        for (var i = 0, len = dataArray.length; i < len; i++) {\n          var data = dataArray[i];\n\n          if (data.length) {\n            var mappedData = self._mapping(data);\n\n            mappedArray.push(mappedData);\n            self.draw(mappedData, shapeFactory);\n          }\n        }\n\n        self.set('dataArray', mappedArray);\n      };\n\n      _proto.getShapeFactory = function getShapeFactory() {\n        var shapeFactory = this.get('shapeFactory');\n\n        if (!shapeFactory) {\n          var shapeType = this.get('shapeType');\n          shapeFactory = Shape$1.getShapeFactory(shapeType);\n          this.set('shapeFactory', shapeFactory);\n        }\n\n        return shapeFactory;\n      };\n\n      _proto._mapping = function _mapping(data) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var yField = self.getYScale().field; // 用来缓存转换的值，减少mapping耗时\n\n        var mappedCache = {};\n        var mappedData = new Array(data.length);\n\n        for (var k in attrs) {\n          if (attrs.hasOwnProperty(k)) {\n            var attr = attrs[k];\n            var names = attr.names;\n            var scales = attr.scales;\n\n            for (var i = 0, len = data.length; i < len; i++) {\n              var record = data[i];\n\n              var mappedRecord = _extends({}, record, mappedData[i]);\n\n              mappedRecord[FIELD_ORIGIN_Y] = record[yField]; // 获取视觉属性对应的value值\n              // 位置的缓存命中率低，还是每次单独计算\n\n              if (attr.type === 'position') {\n                var values = self._getAttrValues(attr, record);\n\n                for (var j = 0, _len = values.length; j < _len; j++) {\n                  var val = values[j];\n                  var name = names[j];\n                  mappedRecord[name] = isArray(val) && val.length === 1 ? val[0] : val;\n                }\n              } else {\n                // 除了position其他都只有一项\n                var _name = names[0];\n                var field = scales[0].field;\n                var value = record[field];\n                var key = \"\" + _name + value;\n                var _values = mappedCache[key];\n\n                if (!_values) {\n                  _values = self._getAttrValues(attr, record);\n                  mappedCache[key] = _values;\n                }\n\n                mappedRecord[_name] = _values[0];\n              } // 设置新数组\n\n\n              mappedData[i] = mappedRecord;\n            }\n          }\n        }\n\n        return mappedData;\n      };\n\n      _proto._getAttrValues = function _getAttrValues(attr, record) {\n        var scales = attr.scales;\n        var params = [];\n\n        for (var i = 0, len = scales.length; i < len; i++) {\n          var scale = scales[i];\n          var field = scale.field;\n\n          if (scale.type === 'identity') {\n            params.push(scale.value);\n          } else {\n            params.push(record[field]);\n          }\n        }\n\n        var values = attr.mapping.apply(attr, params);\n        return values;\n      };\n\n      _proto.getAttrValue = function getAttrValue(attrName, record) {\n        var attr = this.getAttr(attrName);\n        var rst = null;\n\n        if (attr) {\n          var values = this._getAttrValues(attr, record);\n\n          rst = values[0];\n        }\n\n        return rst;\n      };\n\n      _proto._beforeMapping = function _beforeMapping(dataArray) {\n        var self = this;\n\n        if (self.get('generatePoints')) {\n          self._generatePoints(dataArray);\n        }\n      };\n\n      _proto.isInCircle = function isInCircle() {\n        var coord = this.get('coord');\n        return coord && coord.isPolar;\n      };\n\n      _proto.getCallbackCfg = function getCallbackCfg(fields, cfg, origin) {\n        if (!fields) {\n          return cfg;\n        }\n\n        var tmpCfg = {};\n        var params = fields.map(function (field) {\n          return origin[field];\n        });\n        each(cfg, function (v, k) {\n          if (isFunction(v)) {\n            tmpCfg[k] = v.apply(null, params);\n          } else {\n            tmpCfg[k] = v;\n          }\n        });\n        return tmpCfg;\n      };\n\n      _proto.getDrawCfg = function getDrawCfg(obj) {\n        var self = this;\n        var isInCircle = self.isInCircle();\n        var cfg = {\n          origin: obj,\n          x: obj.x,\n          y: obj.y,\n          color: obj.color,\n          size: obj.size,\n          shape: obj.shape,\n          isInCircle: isInCircle,\n          opacity: obj.opacity\n        };\n        var styleOptions = self.get('styleOptions');\n\n        if (styleOptions && styleOptions.style) {\n          cfg.style = self.getCallbackCfg(styleOptions.fields, styleOptions.style, obj[FIELD_ORIGIN]);\n        }\n\n        if (self.get('generatePoints')) {\n          cfg.points = obj.points;\n          cfg.nextPoints = obj.nextPoints;\n        }\n\n        if (isInCircle) {\n          cfg.center = self.get('coord').center;\n        }\n\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        var yScale = self.getYScale();\n        each(data, function (obj, index) {\n          if (yScale && isNil(obj._origin[yScale.field])) {\n            return;\n          }\n\n          obj.index = index;\n          var cfg = self.getDrawCfg(obj);\n          var shape = obj.shape;\n          self.drawShape(shape, obj, cfg, container, shapeFactory);\n        });\n      };\n\n      _proto.drawShape = function drawShape(shape, shapeData, cfg, container, shapeFactory) {\n        var gShape = shapeFactory.drawShape(shape, cfg, container);\n\n        if (gShape) {\n          each([].concat(gShape), function (s) {\n            s.set('origin', shapeData);\n          });\n        }\n      };\n\n      _proto._generatePoints = function _generatePoints(dataArray) {\n        var self = this;\n        var shapeFactory = self.getShapeFactory();\n        var shapeAttr = self.getAttr('shape');\n        each(dataArray, function (data) {\n          for (var i = 0, len = data.length; i < len; i++) {\n            var obj = data[i];\n            var cfg = self.createShapePointsCfg(obj);\n            var shape = shapeAttr ? self._getAttrValues(shapeAttr, obj) : null;\n            var points = shapeFactory.getShapePoints(shape, cfg);\n            obj.points = points;\n          }\n        }); // 添加nextPoints\n\n        each(dataArray, function (data, index) {\n          var nextData = dataArray[index + 1];\n\n          if (nextData) {\n            data[0].nextPoints = nextData[0].points;\n          }\n        });\n      }\n      /**\n       * get the info of each shape\n       * @protected\n       * @param  {Object} obj the data item\n       * @return {Object} cfg return the result\n       */\n      ;\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var xScale = this.getXScale();\n        var yScale = this.getYScale();\n\n        var x = this._normalizeValues(obj[xScale.field], xScale);\n\n        var y;\n\n        if (yScale) {\n          y = this._normalizeValues(obj[yScale.field], yScale);\n        } else {\n          y = obj.y ? obj.y : 0.1;\n        }\n\n        return {\n          x: x,\n          y: y,\n          y0: yScale ? yScale.scale(this.getYMinValue()) : undefined\n        };\n      };\n\n      _proto.getYMinValue = function getYMinValue() {\n        var yScale = this.getYScale();\n        var min = yScale.min,\n            max = yScale.max;\n        var value;\n\n        if (this.get('startOnZero')) {\n          if (max <= 0 && min <= 0) {\n            value = max;\n          } else {\n            value = min >= 0 ? min : 0;\n          }\n        } else {\n          value = min;\n        }\n\n        return value;\n      };\n\n      _proto._normalizeValues = function _normalizeValues(values, scale) {\n        var rst = [];\n\n        if (isArray(values)) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            var v = values[i];\n            rst.push(scale.scale(v));\n          }\n        } else {\n          rst = scale.scale(values);\n        }\n\n        return rst;\n      };\n\n      _proto.getAttr = function getAttr(name) {\n        return this.get('attrs')[name];\n      };\n\n      _proto.getXScale = function getXScale() {\n        return this.getAttr('position').scales[0];\n      };\n\n      _proto.getYScale = function getYScale() {\n        return this.getAttr('position').scales[1];\n      };\n\n      _proto.hasAdjust = function hasAdjust(adjust) {\n        return this.get('adjust') && this.get('adjust').type === adjust;\n      };\n\n      _proto._getSnap = function _getSnap(scale, item, arr) {\n        var i = 0;\n        var values;\n        var yField = this.getYScale().field; // 叠加的维度\n\n        if (this.hasAdjust('stack') && scale.field === yField) {\n          values = [];\n          arr.forEach(function (obj) {\n            values.push(obj[FIELD_ORIGIN_Y]);\n          });\n\n          for (var len = values.length; i < len; i++) {\n            if (values[0][0] > item) {\n              break;\n            }\n\n            if (values[values.length - 1][1] <= item) {\n              i = values.length - 1;\n              break;\n            }\n\n            if (values[i][0] <= item && values[i][1] > item) {\n              break;\n            }\n          }\n        } else {\n          values = scale.values;\n          values.sort(function (a, b) {\n            return a - b;\n          });\n\n          for (var _len2 = values.length; i < _len2; i++) {\n            // 如果只有1个点直接返回第1个点\n            if (_len2 <= 1) {\n              break;\n            } // 第1个点和第2个点之间\n\n\n            if ((values[0] + values[1]) / 2 > item) {\n              break;\n            } // 中间的点\n\n\n            if ((values[i - 1] + values[i]) / 2 <= item && (values[i + 1] + values[i]) / 2 > item) {\n              break;\n            } // 最后2个点\n\n\n            if ((values[values.length - 2] + values[values.length - 1]) / 2 <= item) {\n              i = values.length - 1;\n              break;\n            }\n          }\n        }\n\n        var result = values[i];\n        return result;\n      };\n\n      _proto.getSnapRecords = function getSnapRecords(point) {\n        var self = this;\n        var coord = self.get('coord');\n        var xScale = self.getXScale();\n        var yScale = self.getYScale();\n        var xfield = xScale.field;\n        var dataArray = self.get('dataArray');\n\n        if (!this.get('hasSorted')) {\n          this._sort(dataArray);\n        }\n\n        var rst = [];\n        var invertPoint = coord.invertPoint(point);\n        var invertPointX = invertPoint.x;\n\n        if (self.isInCircle() && !coord.transposed && invertPointX > (1 + xScale.rangeMax()) / 2) {\n          invertPointX = xScale.rangeMin();\n        }\n\n        var xValue = xScale.invert(invertPointX);\n\n        if (!xScale.isCategory) {\n          xValue = self._getSnap(xScale, xValue);\n        }\n\n        var tmp = [];\n        dataArray.forEach(function (data) {\n          data.forEach(function (obj) {\n            var originValue = isNil(obj[FIELD_ORIGIN]) ? obj[xfield] : obj[FIELD_ORIGIN][xfield];\n\n            if (self._isEqual(originValue, xValue, xScale)) {\n              tmp.push(obj);\n            }\n          });\n        }); // special for pie chart\n\n        if (this.hasAdjust('stack') && coord.isPolar && coord.transposed) {\n          if (invertPointX >= 0 && invertPointX <= 1) {\n            var yValue = yScale.invert(invertPoint.y);\n            yValue = self._getSnap(yScale, yValue, tmp);\n            tmp.forEach(function (obj) {\n              if (isArray(yValue) ? obj[FIELD_ORIGIN_Y].toString() === yValue.toString() : obj[FIELD_ORIGIN_Y] === yValue) {\n                rst.push(obj);\n              }\n            });\n          }\n        } else {\n          rst = tmp;\n        }\n\n        return rst;\n      };\n\n      _proto.getRecords = function getRecords(value) {\n        var _this = this;\n\n        var xScale = this.getXScale();\n        var dataArray = this.get('dataArray');\n        var xfield = xScale.field;\n        return dataArray.map(function (data) {\n          for (var len = data.length, i = len - 1; i >= 0; i--) {\n            var obj = data[i];\n            var originValue = isNil(obj[FIELD_ORIGIN]) ? obj[xfield] : obj[FIELD_ORIGIN][xfield];\n\n            if (_this._isEqual(originValue, value, xScale)) {\n              return obj;\n            }\n          }\n\n          return null;\n        });\n      };\n\n      _proto._isEqual = function _isEqual(originValue, value, scale) {\n        if (scale.type === 'timeCat') {\n          return toTimeStamp(originValue) === value;\n        }\n\n        return value === originValue;\n      };\n\n      _proto.position = function position(field) {\n        this._setAttrOptions('position', {\n          field: field\n        });\n\n        return this;\n      };\n\n      _proto.color = function color(field, values) {\n        this._createAttrOption('color', field, values, Global.colors);\n\n        return this;\n      };\n\n      _proto.size = function size(field, values) {\n        this._createAttrOption('size', field, values, Global.sizes);\n\n        return this;\n      };\n\n      _proto.shape = function shape(field, values) {\n        var type = this.get('type');\n        var shapes = Global.shapes[type] || [];\n\n        this._createAttrOption('shape', field, values, shapes);\n\n        return this;\n      };\n\n      _proto.style = function style(field, cfg) {\n        var styleOptions = this.get('styleOptions');\n\n        if (!styleOptions) {\n          styleOptions = {};\n          this.set('styleOptions', styleOptions);\n        }\n\n        if (isObject(field)) {\n          cfg = field;\n          field = null;\n        }\n\n        var fields;\n\n        if (field) {\n          fields = parseFields(field);\n        }\n\n        styleOptions.fields = fields;\n        styleOptions.style = cfg;\n        return this;\n      };\n\n      _proto.adjust = function adjust(type) {\n        if (isString(type)) {\n          type = {\n            type: type\n          };\n        }\n\n        this.set('adjust', type);\n        return this;\n      };\n\n      _proto.animate = function animate(cfg) {\n        this.set('animateCfg', cfg);\n        return this;\n      };\n\n      _proto.changeData = function changeData(data) {\n        this.set('data', data); // 改变数据后，情况度量，因为需要重新实例化\n\n        this.set('scales', {});\n        if (!this.get('isInit')) return;\n        this.set('isInit', false);\n        this.init();\n      };\n\n      _proto.clearInner = function clearInner() {\n        var container = this.get('container');\n\n        if (container) {\n          container.clear(); // container.setMatrix([ 1, 0, 0, 1, 0, 0 ]);\n        }\n      };\n\n      _proto.reset = function reset() {\n        this.set('isInit', false);\n        this.set('attrs', {});\n        this.set('attrOptions', {});\n        this.set('adjust', null);\n        this.clearInner();\n      };\n\n      _proto.clear = function clear() {\n        this.clearInner();\n      };\n\n      _proto.destroy = function destroy() {\n        this.set('isInit', false);\n        this.clear();\n\n        _Base.prototype.destroy.call(this);\n      };\n\n      _proto._display = function _display(visible) {\n        this.set('visible', visible);\n        var container = this.get('container');\n        var canvas = container.get('canvas');\n        container.set('visible', visible);\n        canvas.draw();\n      };\n\n      _proto.show = function show() {\n        this._display(true);\n      };\n\n      _proto.hide = function hide() {\n        this._display(false);\n      };\n\n      return Geom;\n    }(Base);\n\n    var methodCache = {};\n    /**\n     * 获取计算 ticks 的方法\n     * @param key 键值\n     * @returns 计算 ticks 的方法\n     */\n\n    function getTickMethod(key) {\n      return methodCache[key];\n    }\n    /**\n     * 注册计算 ticks 的方法\n     * @param key 键值\n     * @param method 方法\n     */\n\n    function registerTickMethod(key, method) {\n      methodCache[key] = method;\n    }\n\n    var Scale =\n    /** @class */\n    function () {\n      function Scale(cfg) {\n        /**\n         * 度量的类型\n         */\n        this.type = 'base';\n        /**\n         * 是否分类类型的度量\n         */\n\n        this.isCategory = false;\n        /**\n         * 是否线性度量，有linear, time 度量\n         */\n\n        this.isLinear = false;\n        /**\n         * 是否连续类型的度量，linear,time,log, pow, quantile, quantize 都支持\n         */\n\n        this.isContinuous = false;\n        /**\n         * 是否是常量的度量，传入和传出一致\n         */\n\n        this.isIdentity = false;\n        this.values = [];\n        this.range = [0, 1];\n        this.ticks = [];\n        this.__cfg__ = cfg;\n        this.initCfg();\n        this.init();\n      } // 对于原始值的必要转换，如分类、时间字段需转换成数值，用transform/map命名可能更好\n\n\n      Scale.prototype.translate = function (v) {\n        return v;\n      };\n      /** 重新初始化 */\n\n\n      Scale.prototype.change = function (cfg) {\n        // 覆盖配置项，而不替代\n        mix(this.__cfg__, cfg);\n        this.init();\n      };\n\n      Scale.prototype.clone = function () {\n        return this.constructor(this.__cfg__);\n      };\n      /** 获取坐标轴需要的ticks */\n\n\n      Scale.prototype.getTicks = function () {\n        var _this = this;\n\n        return map(this.ticks, function (tick, idx) {\n          if (isObject(tick)) {\n            // 仅当符合Tick类型时才有意义\n            return tick;\n          }\n\n          return {\n            text: _this.getText(tick, idx),\n            tickValue: tick,\n            value: _this.scale(tick)\n          };\n        });\n      };\n      /** 获取Tick的格式化结果 */\n\n\n      Scale.prototype.getText = function (value, key) {\n        var formatter = this.formatter;\n        var res = formatter ? formatter(value, key) : value;\n\n        if (isNil(res) || !isFunction(res.toString)) {\n          return '';\n        }\n\n        return res.toString();\n      }; // 获取配置项中的值，当前 scale 上的值可能会被修改\n\n\n      Scale.prototype.getConfig = function (key) {\n        return this.__cfg__[key];\n      }; // scale初始化\n\n\n      Scale.prototype.init = function () {\n        mix(this, this.__cfg__);\n        this.setDomain();\n\n        if (isEmpty(this.getConfig('ticks'))) {\n          this.ticks = this.calculateTicks();\n        }\n      }; // 子类上覆盖某些属性，不能直接在类上声明，否则会被覆盖\n\n\n      Scale.prototype.initCfg = function () {};\n\n      Scale.prototype.setDomain = function () {};\n\n      Scale.prototype.calculateTicks = function () {\n        var tickMethod = this.tickMethod;\n        var ticks = [];\n\n        if (isString(tickMethod)) {\n          var method = getTickMethod(tickMethod);\n\n          if (!method) {\n            throw new Error('There is no method to to calculate ticks!');\n          }\n\n          ticks = method(this);\n        } else if (isFunction(tickMethod)) {\n          ticks = tickMethod(this);\n        }\n\n        return ticks;\n      }; // range 的最小值\n\n\n      Scale.prototype.rangeMin = function () {\n        return head(this.range);\n      }; // range 的最大值\n\n\n      Scale.prototype.rangeMax = function () {\n        return last(this.range);\n      };\n      /** 定义域转 0~1 */\n\n\n      Scale.prototype.calcPercent = function (value, min, max) {\n        if (isNumber(value)) {\n          return (value - min) / (max - min);\n        }\n\n        return NaN;\n      };\n      /** 0~1转定义域 */\n\n\n      Scale.prototype.calcValue = function (percent, min, max) {\n        return min + percent * (max - min);\n      };\n\n      return Scale;\n    }();\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation.\r\n\r\n    Permission to use, copy, modify, and/or distribute this software for any\r\n    purpose with or without fee is hereby granted.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n    PERFORMANCE OF THIS SOFTWARE.\r\n    ***************************************************************************** */\n\n    /* global Reflect, Promise */\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n\n      return extendStatics(d, b);\n    };\n\n    function __extends(d, b) {\n      extendStatics(d, b);\n\n      function __() {\n        this.constructor = d;\n      }\n\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n      for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n      return r;\n    }\n\n    /**\n     * 分类度量\n     * @class\n     */\n\n    var Category =\n    /** @class */\n    function (_super) {\n      __extends(Category, _super);\n\n      function Category() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'cat';\n        _this.isCategory = true;\n        return _this;\n      }\n\n      Category.prototype.translate = function (value) {\n        var index = indexOf(this.values, value);\n\n        if (index === -1) {\n          return isNumber(value) ? value : NaN;\n        }\n\n        return index;\n      };\n\n      Category.prototype.scale = function (value) {\n        var order = this.translate(value); // 分类数据允许 0.5 范围内调整\n        // if (order < this.min - 0.5 || order > this.max + 0.5) {\n        //   return NaN;\n        // }\n\n        var percent = this.calcPercent(order, this.min, this.max);\n        return this.calcValue(percent, this.rangeMin(), this.rangeMax());\n      };\n\n      Category.prototype.invert = function (scaledValue) {\n        var domainRange = this.max - this.min;\n        var percent = this.calcPercent(scaledValue, this.rangeMin(), this.rangeMax());\n        var idx = Math.round(domainRange * percent) + this.min;\n\n        if (idx < this.min || idx > this.max) {\n          return NaN;\n        }\n\n        return this.values[idx];\n      };\n\n      Category.prototype.getText = function (value) {\n        var args = [];\n\n        for (var _i = 1; _i < arguments.length; _i++) {\n          args[_i - 1] = arguments[_i];\n        }\n\n        var v = value; // value为index\n\n        if (isNumber(value) && !this.values.includes(value)) {\n          v = this.values[v];\n        }\n\n        return _super.prototype.getText.apply(this, __spreadArrays([v], args));\n      }; // 复写属性\n\n\n      Category.prototype.initCfg = function () {\n        this.tickMethod = 'cat';\n      }; // 设置 min, max\n\n\n      Category.prototype.setDomain = function () {\n        // 用户有可能设置 min\n        if (isNil(this.getConfig('min'))) {\n          this.min = 0;\n        }\n\n        if (isNil(this.getConfig('max'))) {\n          var size = this.values.length;\n          this.max = size > 1 ? size - 1 : size;\n        }\n      };\n\n      return Category;\n    }(Scale);\n\n    var token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\n    var twoDigitsOptional = \"[1-9]\\\\d?\";\n    var twoDigits = \"\\\\d\\\\d\";\n    var threeDigits = \"\\\\d{3}\";\n    var fourDigits = \"\\\\d{4}\";\n    var word = \"[^\\\\s]+\";\n    var literal = /\\[([^]*?)\\]/gm;\n\n    function shorten(arr, sLen) {\n      var newArr = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        newArr.push(arr[i].substr(0, sLen));\n      }\n\n      return newArr;\n    }\n\n    var monthUpdate = function (arrName) {\n      return function (v, i18n) {\n        var lowerCaseArr = i18n[arrName].map(function (v) {\n          return v.toLowerCase();\n        });\n        var index = lowerCaseArr.indexOf(v.toLowerCase());\n\n        if (index > -1) {\n          return index;\n        }\n\n        return null;\n      };\n    };\n\n    function assign(origObj) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n        var obj = args_1[_a];\n\n        for (var key in obj) {\n          // @ts-ignore ex\n          origObj[key] = obj[key];\n        }\n      }\n\n      return origObj;\n    }\n\n    var dayNames = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var monthNamesShort = shorten(monthNames, 3);\n    var dayNamesShort = shorten(dayNames, 3);\n    var defaultI18n = {\n      dayNamesShort: dayNamesShort,\n      dayNames: dayNames,\n      monthNamesShort: monthNamesShort,\n      monthNames: monthNames,\n      amPm: [\"am\", \"pm\"],\n      DoFn: function (dayOfMonth) {\n        return dayOfMonth + [\"th\", \"st\", \"nd\", \"rd\"][dayOfMonth % 10 > 3 ? 0 : (dayOfMonth - dayOfMonth % 10 !== 10 ? 1 : 0) * dayOfMonth % 10];\n      }\n    };\n    var globalI18n = assign({}, defaultI18n);\n\n    var setGlobalDateI18n = function (i18n) {\n      return globalI18n = assign(globalI18n, i18n);\n    };\n\n    var regexEscape = function (str) {\n      return str.replace(/[|\\\\{()[^$+*?.-]/g, \"\\\\$&\");\n    };\n\n    var pad = function (val, len) {\n      if (len === void 0) {\n        len = 2;\n      }\n\n      val = String(val);\n\n      while (val.length < len) {\n        val = \"0\" + val;\n      }\n\n      return val;\n    };\n\n    var formatFlags = {\n      D: function (dateObj) {\n        return String(dateObj.getDate());\n      },\n      DD: function (dateObj) {\n        return pad(dateObj.getDate());\n      },\n      Do: function (dateObj, i18n) {\n        return i18n.DoFn(dateObj.getDate());\n      },\n      d: function (dateObj) {\n        return String(dateObj.getDay());\n      },\n      dd: function (dateObj) {\n        return pad(dateObj.getDay());\n      },\n      ddd: function (dateObj, i18n) {\n        return i18n.dayNamesShort[dateObj.getDay()];\n      },\n      dddd: function (dateObj, i18n) {\n        return i18n.dayNames[dateObj.getDay()];\n      },\n      M: function (dateObj) {\n        return String(dateObj.getMonth() + 1);\n      },\n      MM: function (dateObj) {\n        return pad(dateObj.getMonth() + 1);\n      },\n      MMM: function (dateObj, i18n) {\n        return i18n.monthNamesShort[dateObj.getMonth()];\n      },\n      MMMM: function (dateObj, i18n) {\n        return i18n.monthNames[dateObj.getMonth()];\n      },\n      YY: function (dateObj) {\n        return pad(String(dateObj.getFullYear()), 4).substr(2);\n      },\n      YYYY: function (dateObj) {\n        return pad(dateObj.getFullYear(), 4);\n      },\n      h: function (dateObj) {\n        return String(dateObj.getHours() % 12 || 12);\n      },\n      hh: function (dateObj) {\n        return pad(dateObj.getHours() % 12 || 12);\n      },\n      H: function (dateObj) {\n        return String(dateObj.getHours());\n      },\n      HH: function (dateObj) {\n        return pad(dateObj.getHours());\n      },\n      m: function (dateObj) {\n        return String(dateObj.getMinutes());\n      },\n      mm: function (dateObj) {\n        return pad(dateObj.getMinutes());\n      },\n      s: function (dateObj) {\n        return String(dateObj.getSeconds());\n      },\n      ss: function (dateObj) {\n        return pad(dateObj.getSeconds());\n      },\n      S: function (dateObj) {\n        return String(Math.round(dateObj.getMilliseconds() / 100));\n      },\n      SS: function (dateObj) {\n        return pad(Math.round(dateObj.getMilliseconds() / 10), 2);\n      },\n      SSS: function (dateObj) {\n        return pad(dateObj.getMilliseconds(), 3);\n      },\n      a: function (dateObj, i18n) {\n        return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1];\n      },\n      A: function (dateObj, i18n) {\n        return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();\n      },\n      ZZ: function (dateObj) {\n        var offset = dateObj.getTimezoneOffset();\n        return (offset > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(offset) / 60) * 100 + Math.abs(offset) % 60, 4);\n      },\n      Z: function (dateObj) {\n        var offset = dateObj.getTimezoneOffset();\n        return (offset > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(offset) / 60), 2) + \":\" + pad(Math.abs(offset) % 60, 2);\n      }\n    };\n\n    var monthParse = function (v) {\n      return +v - 1;\n    };\n\n    var emptyDigits = [null, twoDigitsOptional];\n    var emptyWord = [null, word];\n    var amPm = [\"isPm\", word, function (v, i18n) {\n      var val = v.toLowerCase();\n\n      if (val === i18n.amPm[0]) {\n        return 0;\n      } else if (val === i18n.amPm[1]) {\n        return 1;\n      }\n\n      return null;\n    }];\n    var timezoneOffset = [\"timezoneOffset\", \"[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z?\", function (v) {\n      var parts = (v + \"\").match(/([+-]|\\d\\d)/gi);\n\n      if (parts) {\n        var minutes = +parts[1] * 60 + parseInt(parts[2], 10);\n        return parts[0] === \"+\" ? minutes : -minutes;\n      }\n\n      return 0;\n    }];\n    var parseFlags = {\n      D: [\"day\", twoDigitsOptional],\n      DD: [\"day\", twoDigits],\n      Do: [\"day\", twoDigitsOptional + word, function (v) {\n        return parseInt(v, 10);\n      }],\n      M: [\"month\", twoDigitsOptional, monthParse],\n      MM: [\"month\", twoDigits, monthParse],\n      YY: [\"year\", twoDigits, function (v) {\n        var now = new Date();\n        var cent = +(\"\" + now.getFullYear()).substr(0, 2);\n        return +(\"\" + (+v > 68 ? cent - 1 : cent) + v);\n      }],\n      h: [\"hour\", twoDigitsOptional, undefined, \"isPm\"],\n      hh: [\"hour\", twoDigits, undefined, \"isPm\"],\n      H: [\"hour\", twoDigitsOptional],\n      HH: [\"hour\", twoDigits],\n      m: [\"minute\", twoDigitsOptional],\n      mm: [\"minute\", twoDigits],\n      s: [\"second\", twoDigitsOptional],\n      ss: [\"second\", twoDigits],\n      YYYY: [\"year\", fourDigits],\n      S: [\"millisecond\", \"\\\\d\", function (v) {\n        return +v * 100;\n      }],\n      SS: [\"millisecond\", twoDigits, function (v) {\n        return +v * 10;\n      }],\n      SSS: [\"millisecond\", threeDigits],\n      d: emptyDigits,\n      dd: emptyDigits,\n      ddd: emptyWord,\n      dddd: emptyWord,\n      MMM: [\"month\", word, monthUpdate(\"monthNamesShort\")],\n      MMMM: [\"month\", word, monthUpdate(\"monthNames\")],\n      a: amPm,\n      A: amPm,\n      ZZ: timezoneOffset,\n      Z: timezoneOffset\n    }; // Some common format strings\n\n    var globalMasks = {\n      default: \"ddd MMM DD YYYY HH:mm:ss\",\n      shortDate: \"M/D/YY\",\n      mediumDate: \"MMM D, YYYY\",\n      longDate: \"MMMM D, YYYY\",\n      fullDate: \"dddd, MMMM D, YYYY\",\n      isoDate: \"YYYY-MM-DD\",\n      isoDateTime: \"YYYY-MM-DDTHH:mm:ssZ\",\n      shortTime: \"HH:mm\",\n      mediumTime: \"HH:mm:ss\",\n      longTime: \"HH:mm:ss.SSS\"\n    };\n\n    var setGlobalDateMasks = function (masks) {\n      return assign(globalMasks, masks);\n    };\n    /***\n     * Format a date\n     * @method format\n     * @param {Date|number} dateObj\n     * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n     * @returns {string} Formatted date string\n     */\n\n\n    var format = function (dateObj, mask, i18n) {\n      if (mask === void 0) {\n        mask = globalMasks[\"default\"];\n      }\n\n      if (i18n === void 0) {\n        i18n = {};\n      }\n\n      if (typeof dateObj === \"number\") {\n        dateObj = new Date(dateObj);\n      }\n\n      if (Object.prototype.toString.call(dateObj) !== \"[object Date]\" || isNaN(dateObj.getTime())) {\n        throw new Error(\"Invalid Date pass to format\");\n      }\n\n      mask = globalMasks[mask] || mask;\n      var literals = []; // Make literals inactive by replacing them with @@@\n\n      mask = mask.replace(literal, function ($0, $1) {\n        literals.push($1);\n        return \"@@@\";\n      });\n      var combinedI18nSettings = assign(assign({}, globalI18n), i18n); // Apply formatting rules\n\n      mask = mask.replace(token, function ($0) {\n        return formatFlags[$0](dateObj, combinedI18nSettings);\n      }); // Inline literal values back into the formatted value\n\n      return mask.replace(/@@@/g, function () {\n        return literals.shift();\n      });\n    };\n    /**\n     * Parse a date string into a Javascript Date object /\n     * @method parse\n     * @param {string} dateStr Date string\n     * @param {string} format Date parse format\n     * @param {i18n} I18nSettingsOptional Full or subset of I18N settings\n     * @returns {Date|null} Returns Date object. Returns null what date string is invalid or doesn't match format\n     */\n\n\n    function parse(dateStr, format, i18n) {\n      if (i18n === void 0) {\n        i18n = {};\n      }\n\n      if (typeof format !== \"string\") {\n        throw new Error(\"Invalid format in fecha parse\");\n      } // Check to see if the format is actually a mask\n\n\n      format = globalMasks[format] || format; // Avoid regular expression denial of service, fail early for really long strings\n      // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n\n      if (dateStr.length > 1000) {\n        return null;\n      } // Default to the beginning of the year.\n\n\n      var today = new Date();\n      var dateInfo = {\n        year: today.getFullYear(),\n        month: 0,\n        day: 1,\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0,\n        isPm: null,\n        timezoneOffset: null\n      };\n      var parseInfo = [];\n      var literals = []; // Replace all the literals with @@@. Hopefully a string that won't exist in the format\n\n      var newFormat = format.replace(literal, function ($0, $1) {\n        literals.push(regexEscape($1));\n        return \"@@@\";\n      });\n      var specifiedFields = {};\n      var requiredFields = {}; // Change every token that we find into the correct regex\n\n      newFormat = regexEscape(newFormat).replace(token, function ($0) {\n        var info = parseFlags[$0];\n        var field = info[0],\n            regex = info[1],\n            requiredField = info[3]; // Check if the person has specified the same field twice. This will lead to confusing results.\n\n        if (specifiedFields[field]) {\n          throw new Error(\"Invalid format. \" + field + \" specified twice in format\");\n        }\n\n        specifiedFields[field] = true; // Check if there are any required fields. For instance, 12 hour time requires AM/PM specified\n\n        if (requiredField) {\n          requiredFields[requiredField] = true;\n        }\n\n        parseInfo.push(info);\n        return \"(\" + regex + \")\";\n      }); // Check all the required fields are present\n\n      Object.keys(requiredFields).forEach(function (field) {\n        if (!specifiedFields[field]) {\n          throw new Error(\"Invalid format. \" + field + \" is required in specified format\");\n        }\n      }); // Add back all the literals after\n\n      newFormat = newFormat.replace(/@@@/g, function () {\n        return literals.shift();\n      }); // Check if the date string matches the format. If it doesn't return null\n\n      var matches = dateStr.match(new RegExp(newFormat, \"i\"));\n\n      if (!matches) {\n        return null;\n      }\n\n      var combinedI18nSettings = assign(assign({}, globalI18n), i18n); // For each match, call the parser function for that date part\n\n      for (var i = 1; i < matches.length; i++) {\n        var _a = parseInfo[i - 1],\n            field = _a[0],\n            parser = _a[2];\n        var value = parser ? parser(matches[i], combinedI18nSettings) : +matches[i]; // If the parser can't make sense of the value, return null\n\n        if (value == null) {\n          return null;\n        }\n\n        dateInfo[field] = value;\n      }\n\n      if (dateInfo.isPm === 1 && dateInfo.hour != null && +dateInfo.hour !== 12) {\n        dateInfo.hour = +dateInfo.hour + 12;\n      } else if (dateInfo.isPm === 0 && +dateInfo.hour === 12) {\n        dateInfo.hour = 0;\n      }\n\n      var dateWithoutTZ = new Date(dateInfo.year, dateInfo.month, dateInfo.day, dateInfo.hour, dateInfo.minute, dateInfo.second, dateInfo.millisecond);\n      var validateFields = [[\"month\", \"getMonth\"], [\"day\", \"getDate\"], [\"hour\", \"getHours\"], [\"minute\", \"getMinutes\"], [\"second\", \"getSeconds\"]];\n\n      for (var i = 0, len = validateFields.length; i < len; i++) {\n        // Check to make sure the date field is within the allowed range. Javascript dates allows values\n        // outside the allowed range. If the values don't match the value was invalid\n        if (specifiedFields[validateFields[i][0]] && dateInfo[validateFields[i][0]] !== dateWithoutTZ[validateFields[i][1]]()) {\n          return null;\n        }\n      }\n\n      if (dateInfo.timezoneOffset == null) {\n        return dateWithoutTZ;\n      }\n\n      return new Date(Date.UTC(dateInfo.year, dateInfo.month, dateInfo.day, dateInfo.hour, dateInfo.minute - dateInfo.timezoneOffset, dateInfo.second, dateInfo.millisecond));\n    }\n\n    var fecha = {\n      format: format,\n      parse: parse,\n      defaultI18n: defaultI18n,\n      setGlobalDateI18n: setGlobalDateI18n,\n      setGlobalDateMasks: setGlobalDateMasks\n    };\n\n    var fecha1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        'default': fecha,\n        assign: assign,\n        format: format,\n        parse: parse,\n        defaultI18n: defaultI18n,\n        setGlobalDateI18n: setGlobalDateI18n,\n        setGlobalDateMasks: setGlobalDateMasks\n    });\n\n    /**\n     * 二分右侧查找\n     * https://github.com/d3/d3-array/blob/master/src/bisector.js\n     */\n\n    function bisector (getter) {\n      /**\n       * x: 目标值\n       * lo: 起始位置\n       * hi: 结束位置\n       */\n      return function (a, x, _lo, _hi) {\n        var lo = isNil(_lo) ? 0 : _lo;\n        var hi = isNil(_hi) ? a.length : _hi;\n\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n\n          if (getter(a[mid]) > x) {\n            hi = mid;\n          } else {\n            lo = mid + 1;\n          }\n        }\n\n        return lo;\n      };\n    }\n\n    var FORMAT_METHOD = 'format';\n    function timeFormat(time, mask) {\n      var method = fecha1[FORMAT_METHOD] || fecha[FORMAT_METHOD];\n      return method(time, mask);\n    }\n    /**\n     * 转换成时间戳\n     * @param value 时间值\n     */\n\n    function toTimeStamp$1(value) {\n      if (isString(value)) {\n        if (value.indexOf('T') > 0) {\n          value = new Date(value).getTime();\n        } else {\n          // new Date('2010/01/10') 和 new Date('2010-01-10') 的差别在于:\n          // 如果仅有年月日时，前者是带有时区的: Fri Jan 10 2020 02:40:13 GMT+0800 (中国标准时间)\n          // 后者会格式化成 Sun Jan 10 2010 08:00:00 GMT+0800 (中国标准时间)\n          value = new Date(value.replace(/-/gi, '/')).getTime();\n        }\n      }\n\n      if (isDate(value)) {\n        value = value.getTime();\n      }\n\n      return value;\n    }\n    var SECOND = 1000;\n    var MINUTE = 60 * SECOND;\n    var HOUR = 60 * MINUTE;\n    var DAY = 24 * HOUR;\n    var MONTH = DAY * 31;\n    var YEAR = DAY * 365;\n    var intervals = [['HH:mm:ss', SECOND], ['HH:mm:ss', SECOND * 10], ['HH:mm:ss', SECOND * 30], ['HH:mm', MINUTE], ['HH:mm', MINUTE * 10], ['HH:mm', MINUTE * 30], ['HH', HOUR], ['HH', HOUR * 6], ['HH', HOUR * 12], ['YYYY-MM-DD', DAY], ['YYYY-MM-DD', DAY * 4], ['YYYY-WW', DAY * 7], ['YYYY-MM', MONTH], ['YYYY-MM', MONTH * 4], ['YYYY-MM', MONTH * 6], ['YYYY', DAY * 380]];\n    function getTickInterval(min, max, tickCount) {\n      var target = (max - min) / tickCount;\n      var idx = bisector(function (o) {\n        return o[1];\n      })(intervals, target) - 1;\n      var interval = intervals[idx];\n\n      if (idx < 0) {\n        interval = intervals[0];\n      } else if (idx >= intervals.length) {\n        interval = last(intervals);\n      }\n\n      return interval;\n    }\n\n    /**\n     * 时间分类度量\n     * @class\n     */\n\n    var TimeCat =\n    /** @class */\n    function (_super) {\n      __extends(TimeCat, _super);\n\n      function TimeCat() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'timeCat';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      TimeCat.prototype.translate = function (value) {\n        value = toTimeStamp$1(value);\n        var index = this.values.indexOf(value);\n\n        if (index === -1) {\n          if (isNumber(value) && value < this.values.length) {\n            index = value;\n          } else {\n            index = NaN;\n          }\n        }\n\n        return index;\n      };\n      /**\n       * 由于时间类型数据需要转换一下，所以复写 getText\n       * @override\n       */\n\n\n      TimeCat.prototype.getText = function (value, tickIndex) {\n        var index = this.translate(value);\n\n        if (index > -1) {\n          var result = this.values[index];\n          var formatter = this.formatter;\n          result = formatter ? formatter(result, tickIndex) : timeFormat(result, this.mask);\n          return result;\n        }\n\n        return value;\n      };\n\n      TimeCat.prototype.initCfg = function () {\n        this.tickMethod = 'time-cat';\n        this.mask = 'YYYY-MM-DD';\n        this.tickCount = 7; // 一般时间数据会显示 7， 14， 30 天的数字\n      };\n\n      TimeCat.prototype.setDomain = function () {\n        var values = this.values; // 针对时间分类类型，会将时间统一转换为时间戳\n\n        each(values, function (v, i) {\n          values[i] = toTimeStamp$1(v);\n        });\n        values.sort(function (v1, v2) {\n          return v1 - v2;\n        });\n\n        _super.prototype.setDomain.call(this);\n      };\n\n      return TimeCat;\n    }(Category);\n\n    /**\n     * 连续度量的基类\n     * @class\n     */\n\n    var Continuous =\n    /** @class */\n    function (_super) {\n      __extends(Continuous, _super);\n\n      function Continuous() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.isContinuous = true;\n        return _this;\n      }\n\n      Continuous.prototype.scale = function (value) {\n        if (isNil(value)) {\n          return NaN;\n        }\n\n        var rangeMin = this.rangeMin();\n        var rangeMax = this.rangeMax();\n        var max = this.max;\n        var min = this.min;\n\n        if (max === min) {\n          return rangeMin;\n        }\n\n        var percent = this.getScalePercent(value);\n        return rangeMin + percent * (rangeMax - rangeMin);\n      };\n\n      Continuous.prototype.init = function () {\n        _super.prototype.init.call(this); // init 完成后保证 min, max 包含 ticks 的范围\n\n\n        var ticks = this.ticks;\n        var firstTick = head(ticks);\n        var lastTick = last(ticks);\n\n        if (firstTick < this.min) {\n          this.min = firstTick;\n        }\n\n        if (lastTick > this.max) {\n          this.max = lastTick;\n        } // strict-limit 方式\n\n\n        if (!isNil(this.minLimit)) {\n          this.min = firstTick;\n        }\n\n        if (!isNil(this.maxLimit)) {\n          this.max = lastTick;\n        }\n      };\n\n      Continuous.prototype.setDomain = function () {\n        var _a = getRange(this.values),\n            min = _a.min,\n            max = _a.max;\n\n        if (isNil(this.min)) {\n          this.min = min;\n        }\n\n        if (isNil(this.max)) {\n          this.max = max;\n        }\n\n        if (this.min > this.max) {\n          this.min = min;\n          this.max = max;\n        }\n      };\n\n      Continuous.prototype.calculateTicks = function () {\n        var _this = this;\n\n        var ticks = _super.prototype.calculateTicks.call(this);\n\n        if (!this.nice) {\n          ticks = filter(ticks, function (tick) {\n            return tick >= _this.min && tick <= _this.max;\n          });\n        }\n\n        return ticks;\n      }; // 计算原始值值占的百分比\n\n\n      Continuous.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n        return (value - min) / (max - min);\n      };\n\n      Continuous.prototype.getInvertPercent = function (value) {\n        return (value - this.rangeMin()) / (this.rangeMax() - this.rangeMin());\n      };\n\n      return Continuous;\n    }(Scale);\n\n    /**\n     * 线性度量\n     * @class\n     */\n\n    var Linear =\n    /** @class */\n    function (_super) {\n      __extends(Linear, _super);\n\n      function Linear() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'linear';\n        _this.isLinear = true;\n        return _this;\n      }\n\n      Linear.prototype.invert = function (value) {\n        var percent = this.getInvertPercent(value);\n        return this.min + percent * (this.max - this.min);\n      };\n\n      Linear.prototype.initCfg = function () {\n        this.tickMethod = 'wilkinson-extended';\n        this.nice = false;\n      };\n\n      return Linear;\n    }(Continuous);\n\n    // 虽然数学上 b 不支持负数，但是这里需要支持 负数\n\n    function calBase(a, b) {\n      var e = Math.E;\n      var value;\n\n      if (b >= 0) {\n        value = Math.pow(e, Math.log(b) / a); // 使用换底公式求底\n      } else {\n        value = Math.pow(e, Math.log(-b) / a) * -1; // 使用换底公式求底\n      }\n\n      return value;\n    }\n    function log(a, b) {\n      if (a === 1) {\n        return 1;\n      }\n\n      return Math.log(b) / Math.log(a);\n    }\n    function getLogPositiveMin(values, base, max) {\n      if (isNil(max)) {\n        max = Math.max.apply(null, values);\n      }\n\n      var positiveMin = max;\n      each(values, function (value) {\n        if (value > 0 && value < positiveMin) {\n          positiveMin = value;\n        }\n      });\n\n      if (positiveMin === max) {\n        positiveMin = max / base;\n      }\n\n      if (positiveMin > 1) {\n        positiveMin = 1;\n      }\n\n      return positiveMin;\n    }\n\n    /**\n     * Log 度量，处理非均匀分布\n     */\n\n    var Log =\n    /** @class */\n    function (_super) {\n      __extends(Log, _super);\n\n      function Log() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'log';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      Log.prototype.invert = function (value) {\n        var base = this.base;\n        var max = log(base, this.max);\n        var rangeMin = this.rangeMin();\n        var range = this.rangeMax() - rangeMin;\n        var min;\n        var positiveMin = this.positiveMin;\n\n        if (positiveMin) {\n          if (value === 0) {\n            return 0;\n          }\n\n          min = log(base, positiveMin / base);\n          var appendPercent = 1 / (max - min) * range; // 0 到 positiveMin的占比\n\n          if (value < appendPercent) {\n            // 落到 0 - positiveMin 之间\n            return value / appendPercent * positiveMin;\n          }\n        } else {\n          min = log(base, this.min);\n        }\n\n        var percent = (value - rangeMin) / range;\n        var tmp = percent * (max - min) + min;\n        return Math.pow(base, tmp);\n      };\n\n      Log.prototype.initCfg = function () {\n        this.tickMethod = 'log';\n        this.base = 10;\n        this.tickCount = 6;\n        this.nice = true;\n      }; // 设置\n\n\n      Log.prototype.setDomain = function () {\n        _super.prototype.setDomain.call(this);\n\n        var min = this.min;\n\n        if (min < 0) {\n          throw new Error('When you use log scale, the minimum value must be greater than zero!');\n        }\n\n        if (min === 0) {\n          this.positiveMin = getLogPositiveMin(this.values, this.base, this.max);\n        }\n      }; // 根据当前值获取占比\n\n\n      Log.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n\n        if (max === min) {\n          return 0;\n        } // 如果值小于等于0，则按照0处理\n\n\n        if (value <= 0) {\n          return 0;\n        }\n\n        var base = this.base;\n        var positiveMin = this.positiveMin; // 如果min == 0, 则根据比0大的最小值，计算比例关系。这个最小值作为坐标轴上的第二个tick，第一个是0但是不显示\n\n        if (positiveMin) {\n          min = positiveMin * 1 / base;\n        }\n\n        var percent; // 如果数值小于次小值，那么就计算 value / 次小值 占整体的比例\n\n        if (value < positiveMin) {\n          percent = value / positiveMin / (log(base, max) - log(base, min));\n        } else {\n          percent = (log(base, value) - log(base, min)) / (log(base, max) - log(base, min));\n        }\n\n        return percent;\n      };\n\n      return Log;\n    }(Continuous);\n\n    /**\n     * Pow 度量，处理非均匀分布\n     */\n\n    var Pow =\n    /** @class */\n    function (_super) {\n      __extends(Pow, _super);\n\n      function Pow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'pow';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      Pow.prototype.invert = function (value) {\n        var percent = this.getInvertPercent(value);\n        var exponent = this.exponent;\n        var max = calBase(exponent, this.max);\n        var min = calBase(exponent, this.min);\n        var tmp = percent * (max - min) + min;\n        var factor = tmp >= 0 ? 1 : -1;\n        return Math.pow(tmp, exponent) * factor;\n      };\n\n      Pow.prototype.initCfg = function () {\n        this.tickMethod = 'pow';\n        this.exponent = 2;\n        this.tickCount = 5;\n        this.nice = true;\n      }; // 获取度量计算时，value占的定义域百分比\n\n\n      Pow.prototype.getScalePercent = function (value) {\n        var max = this.max;\n        var min = this.min;\n\n        if (max === min) {\n          return 0;\n        }\n\n        var exponent = this.exponent;\n        var percent = (calBase(exponent, value) - calBase(exponent, min)) / (calBase(exponent, max) - calBase(exponent, min));\n        return percent;\n      };\n\n      return Pow;\n    }(Continuous);\n\n    /**\n     * 时间度量\n     * @class\n     */\n\n    var Time =\n    /** @class */\n    function (_super) {\n      __extends(Time, _super);\n\n      function Time() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'time';\n        return _this;\n      }\n      /**\n       * @override\n       */\n\n\n      Time.prototype.getText = function (value, index) {\n        var numberValue = this.translate(value);\n        var formatter = this.formatter;\n        return formatter ? formatter(numberValue, index) : timeFormat(numberValue, this.mask);\n      };\n      /**\n       * @override\n       */\n\n\n      Time.prototype.scale = function (value) {\n        var v = value;\n\n        if (isString(v) || isDate(v)) {\n          v = this.translate(v);\n        }\n\n        return _super.prototype.scale.call(this, v);\n      };\n      /**\n       * 将时间转换成数字\n       * @override\n       */\n\n\n      Time.prototype.translate = function (v) {\n        return toTimeStamp$1(v);\n      };\n\n      Time.prototype.initCfg = function () {\n        this.tickMethod = 'time-pretty';\n        this.mask = 'YYYY-MM-DD';\n        this.tickCount = 7;\n        this.nice = false;\n      };\n\n      Time.prototype.setDomain = function () {\n        var values = this.values; // 是否设置了 min, max，而不是直接取 this.min, this.max\n\n        var minConfig = this.getConfig('min');\n        var maxConfig = this.getConfig('max'); // 如果设置了 min,max 则转换成时间戳\n\n        if (!isNil(minConfig) || !isNumber(minConfig)) {\n          this.min = this.translate(this.min);\n        }\n\n        if (!isNil(maxConfig) || !isNumber(maxConfig)) {\n          this.max = this.translate(this.max);\n        } // 没有设置 min, max 时\n\n\n        if (values && values.length) {\n          // 重新计算最大最小值\n          var timeStamps_1 = [];\n          var min_1 = Infinity; // 最小值\n\n          var secondMin_1 = min_1; // 次小值\n\n          var max_1 = 0; // 使用一个循环，计算min,max,secondMin\n\n          each(values, function (v) {\n            var timeStamp = toTimeStamp$1(v);\n\n            if (isNaN(timeStamp)) {\n              throw new TypeError(\"Invalid Time: \" + v + \" in time scale!\");\n            }\n\n            if (min_1 > timeStamp) {\n              secondMin_1 = min_1;\n              min_1 = timeStamp;\n            } else if (secondMin_1 > timeStamp) {\n              secondMin_1 = timeStamp;\n            }\n\n            if (max_1 < timeStamp) {\n              max_1 = timeStamp;\n            }\n\n            timeStamps_1.push(timeStamp);\n          }); // 存在多个值时，设置最小间距\n\n          if (values.length > 1) {\n            this.minTickInterval = secondMin_1 - min_1;\n          }\n\n          if (isNil(minConfig)) {\n            this.min = min_1;\n          }\n\n          if (isNil(maxConfig)) {\n            this.max = max_1;\n          }\n        }\n      };\n\n      return Time;\n    }(Linear);\n\n    /**\n     * 分段度量\n     */\n\n    var Quantize =\n    /** @class */\n    function (_super) {\n      __extends(Quantize, _super);\n\n      function Quantize() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'quantize';\n        return _this;\n      }\n\n      Quantize.prototype.invert = function (value) {\n        var ticks = this.ticks;\n        var length = ticks.length;\n        var percent = this.getInvertPercent(value);\n        var minIndex = Math.floor(percent * (length - 1)); // 最后一个\n\n        if (minIndex >= length - 1) {\n          return last(ticks);\n        } // 超出左边界， 则取第一个\n\n\n        if (minIndex < 0) {\n          return head(ticks);\n        }\n\n        var minTick = ticks[minIndex];\n        var nextTick = ticks[minIndex + 1]; // 比当前值小的 tick 在度量上的占比\n\n        var minIndexPercent = minIndex / (length - 1);\n        var maxIndexPercent = (minIndex + 1) / (length - 1);\n        return minTick + (percent - minIndexPercent) / (maxIndexPercent - minIndexPercent) * (nextTick - minTick);\n      };\n\n      Quantize.prototype.initCfg = function () {\n        this.tickMethod = 'r-pretty';\n        this.tickCount = 5;\n        this.nice = true;\n      };\n\n      Quantize.prototype.calculateTicks = function () {\n        var ticks = _super.prototype.calculateTicks.call(this);\n\n        if (!this.nice) {\n          // 如果 nice = false ,补充 min, max\n          if (last(ticks) !== this.max) {\n            ticks.push(this.max);\n          }\n\n          if (head(ticks) !== this.min) {\n            ticks.unshift(this.min);\n          }\n        }\n\n        return ticks;\n      }; // 计算当前值在刻度中的占比\n\n\n      Quantize.prototype.getScalePercent = function (value) {\n        var ticks = this.ticks; // 超出左边界\n\n        if (value < head(ticks)) {\n          return 0;\n        } // 超出右边界\n\n\n        if (value > last(ticks)) {\n          return 1;\n        }\n\n        var minIndex = 0;\n        each(ticks, function (tick, index) {\n          if (value >= tick) {\n            minIndex = index;\n          } else {\n            return false;\n          }\n        });\n        return minIndex / (ticks.length - 1);\n      };\n\n      return Quantize;\n    }(Continuous);\n\n    var Quantile =\n    /** @class */\n    function (_super) {\n      __extends(Quantile, _super);\n\n      function Quantile() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'quantile';\n        return _this;\n      }\n\n      Quantile.prototype.initCfg = function () {\n        this.tickMethod = 'quantile';\n        this.tickCount = 5;\n        this.nice = true;\n      };\n\n      return Quantile;\n    }(Quantize);\n\n    var map$1 = {};\n\n    function getClass(key) {\n      return map$1[key];\n    }\n\n    function registerClass(key, cls) {\n      if (getClass(key)) {\n        throw new Error(\"type '\" + key + \"' existed.\");\n      }\n\n      map$1[key] = cls;\n    }\n\n    /**\n     * identity scale原则上是定义域和值域一致，scale/invert方法也是一致的\n     * 参考R的实现：https://github.com/r-lib/scales/blob/master/R/pal-identity.r\n     * 参考d3的实现（做了下转型）：https://github.com/d3/d3-scale/blob/master/src/identity.js\n     */\n\n    var Identity =\n    /** @class */\n    function (_super) {\n      __extends(Identity, _super);\n\n      function Identity() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = 'identity';\n        _this.isIdentity = true;\n        return _this;\n      }\n\n      Identity.prototype.calculateTicks = function () {\n        return this.values;\n      };\n\n      Identity.prototype.scale = function (value) {\n        // 如果传入的值不等于 identity 的值，则直接返回，用于一维图时的 dodge\n        if (this.values[0] !== value && isNumber(value)) {\n          return value;\n        }\n\n        return this.range[0];\n      };\n\n      Identity.prototype.invert = function (value) {\n        var range = this.range;\n\n        if (value < range[0] || value > range[1]) {\n          return NaN;\n        }\n\n        return this.values[0];\n      };\n\n      return Identity;\n    }(Scale);\n\n    var DEFAULT_Q = [1, 5, 2, 2.5, 4, 3];\n    var eps = Number.EPSILON * 100; // https://stackoverflow.com/questions/4467539/javascript-modulo-gives-a-negative-result-for-negative-numbers\n\n    function mod(n, m) {\n      return (n % m + m) % m;\n    }\n\n    function simplicity(q, Q, j, lmin, lmax, lstep) {\n      var n = size(Q);\n      var i = indexOf(Q, q);\n      var v = 0;\n      var m = mod(lmin, lstep);\n\n      if ((m < eps || lstep - m < eps) && lmin <= 0 && lmax >= 0) {\n        v = 1;\n      }\n\n      return 1 - i / (n - 1) - j + v;\n    }\n\n    function simplicityMax(q, Q, j) {\n      var n = size(Q);\n      var i = indexOf(Q, q);\n      var v = 1;\n      return 1 - i / (n - 1) - j + v;\n    }\n\n    function density(k, m, dmin, dmax, lmin, lmax) {\n      var r = (k - 1) / (lmax - lmin);\n      var rt = (m - 1) / (Math.max(lmax, dmax) - Math.min(dmin, lmin));\n      return 2 - Math.max(r / rt, rt / r);\n    }\n\n    function densityMax(k, m) {\n      if (k >= m) {\n        return 2 - (k - 1) / (m - 1);\n      }\n\n      return 1;\n    }\n\n    function coverage(dmin, dmax, lmin, lmax) {\n      var range = dmax - dmin;\n      return 1 - 0.5 * (Math.pow(dmax - lmax, 2) + Math.pow(dmin - lmin, 2)) / Math.pow(0.1 * range, 2);\n    }\n\n    function coverageMax(dmin, dmax, span) {\n      var range = dmax - dmin;\n\n      if (span > range) {\n        var half = (span - range) / 2;\n        return 1 - Math.pow(half, 2) / Math.pow(0.1 * range, 2);\n      }\n\n      return 1;\n    }\n\n    function legibility() {\n      return 1;\n    }\n    /**\n     * An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes\n     * https://www.yuque.com/preview/yuque/0/2019/pdf/185317/1546999150858-45c3b9c2-4e86-4223-bf1a-8a732e8195ed.pdf\n     * @param dmin 最小值\n     * @param dmax 最大值\n     * @param m tick个数\n     * @param onlyLoose 是否允许扩展min、max，不绝对强制，例如[3, 97]\n     * @param Q nice numbers集合\n     * @param w 四个优化组件的权重\n     */\n\n\n    function extended(dmin, dmax, m, onlyLoose, Q, w) {\n      if (m === void 0) {\n        m = 5;\n      }\n\n      if (onlyLoose === void 0) {\n        onlyLoose = true;\n      }\n\n      if (Q === void 0) {\n        Q = DEFAULT_Q;\n      }\n\n      if (w === void 0) {\n        w = [0.25, 0.2, 0.5, 0.05];\n      }\n\n      if (dmin === dmax || m === 1) {\n        return {\n          min: dmin,\n          max: dmax,\n          ticks: [dmin]\n        };\n      }\n\n      var best = {\n        score: -2,\n        lmin: 0,\n        lmax: 0,\n        lstep: 0\n      };\n      var j = 1;\n\n      while (j < Infinity) {\n        for (var _i = 0, Q_1 = Q; _i < Q_1.length; _i++) {\n          var q = Q_1[_i];\n          var sm = simplicityMax(q, Q, j);\n\n          if (Number.isNaN(sm)) {\n            throw new Error('NaN');\n          }\n\n          if (w[0] * sm + w[1] + w[2] + w[3] < best.score) {\n            j = Infinity;\n            break;\n          }\n\n          var k = 2;\n\n          while (k < Infinity) {\n            var dm = densityMax(k, m);\n\n            if (w[0] * sm + w[1] + w[2] * dm + w[3] < best.score) {\n              break;\n            }\n\n            var delta = (dmax - dmin) / (k + 1) / j / q;\n            var z = Math.ceil(Math.log10(delta));\n\n            while (z < Infinity) {\n              var step = j * q * Math.pow(10, z);\n              var cm = coverageMax(dmin, dmax, step * (k - 1));\n\n              if (w[0] * sm + w[1] * cm + w[2] * dm + w[3] < best.score) {\n                break;\n              }\n\n              var minStart = Math.floor(dmax / step) * j - (k - 1) * j;\n              var maxStart = Math.ceil(dmin / step) * j;\n\n              if (minStart > maxStart) {\n                z = z + 1;\n                continue;\n              }\n\n              for (var start = minStart; start <= maxStart; start = start + 1) {\n                var lmin = start * (step / j);\n                var lmax = lmin + step * (k - 1);\n                var lstep = step;\n                var s = simplicity(q, Q, j, lmin, lmax, lstep);\n                var c = coverage(dmin, dmax, lmin, lmax);\n                var g = density(k, m, dmin, dmax, lmin, lmax);\n                var l = legibility();\n                var score = w[0] * s + w[1] * c + w[2] * g + w[3] * l;\n\n                if (score > best.score && (!onlyLoose || lmin <= dmin && lmax >= dmax)) {\n                  best.lmin = lmin;\n                  best.lmax = lmax;\n                  best.lstep = lstep;\n                  best.score = score;\n                }\n              }\n\n              z = z + 1;\n            }\n\n            k = k + 1;\n          }\n        }\n\n        j = j + 1;\n      } // 步长为浮点数时处理精度\n\n\n      var toFixed = Number.isInteger(best.lstep) ? 0 : Math.ceil(Math.abs(Math.log10(best.lstep)));\n      var range = [];\n\n      for (var tick = best.lmin; tick <= best.lmax; tick += best.lstep) {\n        range.push(tick);\n      }\n\n      var ticks = toFixed ? map(range, function (x) {\n        return Number.parseFloat(x.toFixed(toFixed));\n      }) : range;\n      return {\n        min: Math.min(dmin, head(ticks)),\n        max: Math.max(dmax, last(ticks)),\n        ticks: ticks\n      };\n    }\n\n    /**\n     * 计算分类 ticks\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculateCatTicks(cfg) {\n      var values = cfg.values,\n          tickInterval = cfg.tickInterval,\n          tickCount = cfg.tickCount;\n      var ticks = values;\n\n      if (isNumber(tickInterval)) {\n        return filter(ticks, function (__, i) {\n          return i % tickInterval === 0;\n        });\n      }\n\n      var min = cfg.min,\n          max = cfg.max;\n\n      if (isNil(min)) {\n        min = 0;\n      }\n\n      if (isNil(max)) {\n        max = values.length - 1;\n      }\n\n      if (isNumber(tickCount) && tickCount < max - min) {\n        // 简单过滤，部分情况下小数的倍数也可以是整数\n        // tslint:disable-next-line: no-shadowed-variable\n        var ticks_1 = extended(min, max, tickCount, false, [1, 2, 5, 3, 4, 7, 6, 8, 9]).ticks;\n        var valid = filter(ticks_1, function (tick) {\n          return tick >= min && tick <= max;\n        });\n        return valid.map(function (index) {\n          return values[index];\n        });\n      }\n\n      return values.slice(min, max + 1);\n    }\n\n    function d3Linear(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          nice = cfg.nice,\n          tickCount = cfg.tickCount;\n      var linear = new D3Linear();\n      linear.domain([min, max]);\n\n      if (nice) {\n        linear.nice(tickCount);\n      }\n\n      return linear.ticks(tickCount);\n    }\n    var DEFAULT_COUNT = 5;\n    var e10 = Math.sqrt(50);\n    var e5 = Math.sqrt(10);\n    var e2 = Math.sqrt(2); // https://github.com/d3/d3-scale\n\n    var D3Linear =\n    /** @class */\n    function () {\n      function D3Linear() {\n        this._domain = [0, 1];\n      }\n\n      D3Linear.prototype.domain = function (domain) {\n        if (domain) {\n          this._domain = Array.from(domain, Number);\n          return this;\n        }\n\n        return this._domain.slice();\n      };\n\n      D3Linear.prototype.nice = function (count) {\n        var _a, _b;\n\n        if (count === void 0) {\n          count = DEFAULT_COUNT;\n        }\n\n        var d = this._domain.slice();\n\n        var i0 = 0;\n        var i1 = this._domain.length - 1;\n        var start = this._domain[i0];\n        var stop = this._domain[i1];\n        var step;\n\n        if (stop < start) {\n          _a = [stop, start], start = _a[0], stop = _a[1];\n          _b = [i1, i0], i0 = _b[0], i1 = _b[1];\n        }\n\n        step = tickIncrement(start, stop, count);\n\n        if (step > 0) {\n          start = Math.floor(start / step) * step;\n          stop = Math.ceil(stop / step) * step;\n          step = tickIncrement(start, stop, count);\n        } else if (step < 0) {\n          start = Math.ceil(start * step) / step;\n          stop = Math.floor(stop * step) / step;\n          step = tickIncrement(start, stop, count);\n        }\n\n        if (step > 0) {\n          d[i0] = Math.floor(start / step) * step;\n          d[i1] = Math.ceil(stop / step) * step;\n          this.domain(d);\n        } else if (step < 0) {\n          d[i0] = Math.ceil(start * step) / step;\n          d[i1] = Math.floor(stop * step) / step;\n          this.domain(d);\n        }\n\n        return this;\n      };\n\n      D3Linear.prototype.ticks = function (count) {\n        if (count === void 0) {\n          count = DEFAULT_COUNT;\n        }\n\n        return d3ArrayTicks(this._domain[0], this._domain[this._domain.length - 1], count || DEFAULT_COUNT);\n      };\n\n      return D3Linear;\n    }();\n\n    function d3ArrayTicks(start, stop, count) {\n      var reverse;\n      var i = -1;\n      var n;\n      var ticks;\n      var step;\n      stop = +stop, start = +start, count = +count;\n\n      if (start === stop && count > 0) {\n        return [start];\n      } // tslint:disable-next-line\n\n\n      if (reverse = stop < start) {\n        n = start, start = stop, stop = n;\n      } // tslint:disable-next-line\n\n\n      if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) {\n        return [];\n      }\n\n      if (step > 0) {\n        start = Math.ceil(start / step);\n        stop = Math.floor(stop / step);\n        ticks = new Array(n = Math.ceil(stop - start + 1));\n\n        while (++i < n) {\n          ticks[i] = (start + i) * step;\n        }\n      } else {\n        start = Math.floor(start * step);\n        stop = Math.ceil(stop * step);\n        ticks = new Array(n = Math.ceil(start - stop + 1));\n\n        while (++i < n) {\n          ticks[i] = (start - i) / step;\n        }\n      }\n\n      if (reverse) {\n        ticks.reverse();\n      }\n\n      return ticks;\n    }\n\n    function tickIncrement(start, stop, count) {\n      var step = (stop - start) / Math.max(0, count);\n      var power = Math.floor(Math.log(step) / Math.LN10);\n      var error = step / Math.pow(10, power);\n      return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n    }\n\n    function snapMultiple(v, base, snapType) {\n      var div;\n\n      if (snapType === 'ceil') {\n        div = Math.ceil(v / base);\n      } else if (snapType === 'floor') {\n        div = Math.floor(v / base);\n      } else {\n        div = Math.round(v / base);\n      }\n\n      return div * base;\n    }\n\n    function intervalTicks(min, max, interval) {\n      // 变成 interval 的倍数\n      var minTick = snapMultiple(min, interval, 'floor');\n      var maxTick = snapMultiple(max, interval, 'ceil'); // 统一小数位数\n\n      minTick = fixedBase(minTick, interval);\n      maxTick = fixedBase(maxTick, interval);\n      var ticks = [];\n\n      for (var i = minTick; i <= maxTick; i = i + interval) {\n        var tickValue = fixedBase(i, interval); // 防止浮点数加法出现问题\n\n        ticks.push(tickValue);\n      }\n\n      return {\n        min: minTick,\n        max: maxTick,\n        ticks: ticks\n      };\n    }\n\n    /**\n     * 按照给定的 minLimit/maxLimit/tickCount 均匀计算出刻度 ticks\n     *\n     * @param cfg Scale 配置项\n     * @return ticks\n     */\n\n    function strictLimit(cfg, defaultMin, defaultMax) {\n      var _a;\n\n      var minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit,\n          min = cfg.min,\n          max = cfg.max,\n          _b = cfg.tickCount,\n          tickCount = _b === void 0 ? 5 : _b;\n      var tickMin = isNil(minLimit) ? isNil(defaultMin) ? min : defaultMin : minLimit;\n      var tickMax = isNil(maxLimit) ? isNil(defaultMax) ? max : defaultMax : maxLimit;\n\n      if (tickMin > tickMax) {\n        _a = [tickMin, tickMax], tickMax = _a[0], tickMin = _a[1];\n      }\n\n      if (tickCount <= 2) {\n        return [tickMin, tickMax];\n      }\n\n      var step = (tickMax - tickMin) / (tickCount - 1);\n      var ticks = [];\n\n      for (var i = 0; i < tickCount; i++) {\n        ticks.push(tickMin + step * i);\n      }\n\n      return ticks;\n    }\n\n    function d3LinearTickMethod(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          tickInterval = cfg.tickInterval,\n          minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit;\n      var ticks = d3Linear(cfg);\n\n      if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n      }\n\n      if (tickInterval) {\n        return intervalTicks(min, max, tickInterval).ticks;\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算线性的 ticks，使用 wilkinson extended 方法\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function linear(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          tickCount = cfg.tickCount,\n          nice = cfg.nice,\n          tickInterval = cfg.tickInterval,\n          minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit;\n      var ticks = extended(min, max, tickCount, nice).ticks;\n\n      if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n      }\n\n      if (tickInterval) {\n        return intervalTicks(min, max, tickInterval).ticks;\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算 log 的 ticks，考虑 min = 0 的场景\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculateLogTicks(cfg) {\n      var base = cfg.base,\n          tickCount = cfg.tickCount,\n          min = cfg.min,\n          max = cfg.max,\n          values = cfg.values;\n      var minTick;\n      var maxTick = log(base, max);\n\n      if (min > 0) {\n        minTick = Math.floor(log(base, min));\n      } else {\n        var positiveMin = getLogPositiveMin(values, base, max);\n        minTick = Math.floor(log(base, positiveMin));\n      }\n\n      var count = maxTick - minTick;\n      var avg = Math.ceil(count / tickCount);\n      var ticks = [];\n\n      for (var i = minTick; i < maxTick + avg; i = i + avg) {\n        ticks.push(Math.pow(base, i));\n      }\n\n      if (min <= 0) {\n        // 最小值 <= 0 时显示 0\n        ticks.unshift(0);\n      }\n\n      return ticks;\n    }\n\n    function pretty(min, max, n) {\n      if (n === void 0) {\n        n = 5;\n      }\n\n      var res = {\n        max: 0,\n        min: 0,\n        ticks: []\n      };\n      /*\n        R pretty:\n        https://svn.r-project.org/R/trunk/src/appl/pretty.c\n        https://www.rdocumentation.org/packages/base/versions/3.5.2/topics/pretty\n        */\n\n      var h = 1.5; // high.u.bias\n\n      var h5 = 0.5 + 1.5 * h; // u5.bias\n      // 反正我也不会调参，跳过所有判断步骤\n\n      var d = max - min;\n      var c = d / n; // 当d非常小的时候触发，但似乎没什么用\n      // const min_n = Math.floor(n / 3);\n      // const shrink_sml = Math.pow(2, 5);\n      // if (Math.log10(d) < -2) {\n      //   c = (_.max([ Math.abs(max), Math.abs(min) ]) * shrink_sml) / min_n;\n      // }\n\n      var base = Math.pow(10, Math.floor(Math.log10(c)));\n      var toFixed = base < 1 ? Math.ceil(Math.abs(Math.log10(base))) : 0;\n      var unit = base;\n\n      if (2 * base - c < h * (c - unit)) {\n        unit = 2 * base;\n\n        if (5 * base - c < h5 * (c - unit)) {\n          unit = 5 * base;\n\n          if (10 * base - c < h * (c - unit)) {\n            unit = 10 * base;\n          }\n        }\n      }\n\n      var nu = Math.ceil(max / unit);\n      var ns = Math.floor(min / unit);\n      res.max = Math.max(nu * unit, max);\n      res.min = Math.min(ns * unit, min);\n      var x = Number.parseFloat((ns * unit).toFixed(toFixed));\n\n      while (x < max) {\n        res.ticks.push(x);\n        x += unit;\n\n        if (toFixed) {\n          x = Number.parseFloat(x.toFixed(toFixed));\n        }\n      }\n\n      res.ticks.push(x);\n      return res;\n    }\n\n    /**\n     * 计算 Pow 的 ticks\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculatePowTicks(cfg) {\n      var exponent = cfg.exponent,\n          tickCount = cfg.tickCount;\n      var max = Math.ceil(calBase(exponent, cfg.max));\n      var min = Math.floor(calBase(exponent, cfg.min));\n      var ticks = pretty(min, max, tickCount).ticks;\n      return ticks.map(function (tick) {\n        var factor = tick >= 0 ? 1 : -1;\n        return Math.pow(tick, exponent) * factor;\n      });\n    }\n\n    /**\n     * 计算几分位 https://github.com/simple-statistics/simple-statistics/blob/master/src/quantile_sorted.js\n     * @param x  数组\n     * @param p  百分比\n     */\n    function quantileSorted(x, p) {\n      var idx = x.length * p;\n      /*if (x.length === 0) { // 当前场景这些条件不可能命中\n        throw new Error('quantile requires at least one value.');\n      } else if (p < 0 || p > 1) {\n        throw new Error('quantiles must be between 0 and 1');\n      } else */\n\n      if (p === 1) {\n        // If p is 1, directly return the last element\n        return x[x.length - 1];\n      } else if (p === 0) {\n        // If p is 0, directly return the first element\n        return x[0];\n      } else if (idx % 1 !== 0) {\n        // If p is not integer, return the next element in array\n        return x[Math.ceil(idx) - 1];\n      } else if (x.length % 2 === 0) {\n        // If the list has even-length, we'll take the average of this number\n        // and the next value, if there is one\n        return (x[idx - 1] + x[idx]) / 2;\n      } else {\n        // Finally, in the simple case of an integer value\n        // with an odd-length list, return the x value at the index.\n        return x[idx];\n      }\n    }\n\n    function calculateTicks(cfg) {\n      var tickCount = cfg.tickCount,\n          values = cfg.values;\n\n      if (!values || !values.length) {\n        return [];\n      }\n\n      var sorted = values.slice().sort(function (a, b) {\n        return a - b;\n      });\n      var ticks = [];\n\n      for (var i = 0; i < tickCount; i++) {\n        var p = i / (tickCount - 1);\n        ticks.push(quantileSorted(sorted, p));\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算线性的 ticks，使用 R's pretty 方法\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function linearPretty(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          tickCount = cfg.tickCount,\n          tickInterval = cfg.tickInterval,\n          minLimit = cfg.minLimit,\n          maxLimit = cfg.maxLimit;\n      var ticks = pretty(min, max, tickCount).ticks;\n\n      if (!isNil(minLimit) || !isNil(maxLimit)) {\n        return strictLimit(cfg, head(ticks), last(ticks));\n      }\n\n      if (tickInterval) {\n        return intervalTicks(min, max, tickInterval).ticks;\n      }\n\n      return ticks;\n    }\n\n    function calculateTimeTicks(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          minTickInterval = cfg.minTickInterval;\n      var tickInterval = cfg.tickInterval;\n      var tickCount = cfg.tickCount; // 指定 tickInterval 后 tickCount 不生效，需要重新计算\n\n      if (tickInterval) {\n        tickCount = Math.ceil((max - min) / tickInterval);\n      } else {\n        tickInterval = getTickInterval(min, max, tickCount)[1];\n        var count = (max - min) / tickInterval;\n        var ratio = count / tickCount;\n\n        if (ratio > 1) {\n          tickInterval = tickInterval * Math.ceil(ratio);\n        } // 如果设置了最小间距，则使用最小间距\n\n\n        if (minTickInterval && tickInterval < minTickInterval) {\n          tickInterval = minTickInterval;\n        }\n      }\n\n      var ticks = [];\n\n      for (var i = min; i < max + tickInterval; i += tickInterval) {\n        ticks.push(i);\n      }\n\n      return ticks;\n    }\n\n    /**\n     * 计算时间分类的 ticks, 保头，保尾\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n    function calculateTimeCatTicks(cfg) {\n      var ticks = calculateCatTicks(cfg);\n      var lastValue = last(cfg.values);\n\n      if (lastValue !== last(ticks)) {\n        ticks.push(lastValue);\n      }\n\n      return ticks;\n    }\n\n    function getYear(date) {\n      return new Date(date).getFullYear();\n    }\n\n    function createYear(year) {\n      return new Date(year, 0, 1).getTime();\n    }\n\n    function getMonth(date) {\n      return new Date(date).getMonth();\n    }\n\n    function diffMonth(min, max) {\n      var minYear = getYear(min);\n      var maxYear = getYear(max);\n      var minMonth = getMonth(min);\n      var maxMonth = getMonth(max);\n      return (maxYear - minYear) * 12 + (maxMonth - minMonth) % 12;\n    }\n\n    function creatMonth(year, month) {\n      return new Date(year, month, 1).getTime();\n    }\n\n    function diffDay(min, max) {\n      return Math.ceil((max - min) / DAY);\n    }\n\n    function diffHour(min, max) {\n      return Math.ceil((max - min) / HOUR);\n    }\n\n    function diffMinus(min, max) {\n      return Math.ceil((max - min) / (60 * 1000));\n    }\n    /**\n     * 计算 time 的 ticks，对 month, year 进行 pretty 处理\n     * @param cfg 度量的配置项\n     * @returns 计算后的 ticks\n     */\n\n\n    function timePretty(cfg) {\n      var min = cfg.min,\n          max = cfg.max,\n          minTickInterval = cfg.minTickInterval;\n      var tickInterval = cfg.tickInterval;\n      var tickCount = cfg.tickCount;\n      var ticks = []; // 指定 tickInterval 后 tickCount 不生效，需要重新计算\n\n      if (!tickInterval) {\n        tickInterval = (max - min) / tickCount; // 如果设置了最小间距，则使用最小间距\n\n        if (minTickInterval && tickInterval < minTickInterval) {\n          tickInterval = minTickInterval;\n        }\n      }\n\n      var minYear = getYear(min); // 如果间距大于 1 年，则将开始日期从整年开始\n\n      if (tickInterval > YEAR) {\n        var maxYear = getYear(max);\n        var yearInterval = Math.ceil(tickInterval / YEAR);\n\n        for (var i = minYear; i <= maxYear + yearInterval; i = i + yearInterval) {\n          ticks.push(createYear(i));\n        }\n      } else if (tickInterval > MONTH) {\n        // 大于月时\n        var monthInterval = Math.ceil(tickInterval / MONTH);\n        var mmMoth = getMonth(min);\n        var dMonths = diffMonth(min, max);\n\n        for (var i = 0; i <= dMonths + monthInterval; i = i + monthInterval) {\n          ticks.push(creatMonth(minYear, i + mmMoth));\n        }\n      } else if (tickInterval > DAY) {\n        // 大于天\n        var date = new Date(min);\n        var year = date.getFullYear();\n        var month = date.getMonth();\n        var mday = date.getDate();\n        var day = Math.ceil(tickInterval / DAY);\n        var ddays = diffDay(min, max);\n\n        for (var i = 0; i < ddays + day; i = i + day) {\n          ticks.push(new Date(year, month, mday + i).getTime());\n        }\n      } else if (tickInterval > HOUR) {\n        // 大于小时\n        var date = new Date(min);\n        var year = date.getFullYear();\n        var month = date.getMonth();\n        var day = date.getDate();\n        var hour = date.getHours();\n        var hours = Math.ceil(tickInterval / HOUR);\n        var dHours = diffHour(min, max);\n\n        for (var i = 0; i <= dHours + hours; i = i + hours) {\n          ticks.push(new Date(year, month, day, hour + i).getTime());\n        }\n      } else if (tickInterval > MINUTE) {\n        // 大于分钟\n        var dMinus = diffMinus(min, max);\n        var minutes = Math.ceil(tickInterval / MINUTE);\n\n        for (var i = 0; i <= dMinus + minutes; i = i + minutes) {\n          ticks.push(min + i * MINUTE);\n        }\n      } else {\n        // 小于分钟\n        var interval = tickInterval;\n\n        if (interval < SECOND) {\n          interval = SECOND;\n        }\n\n        var minSecond = Math.floor(min / SECOND) * SECOND;\n        var dSeconds = Math.ceil((max - min) / SECOND);\n        var seconds = Math.ceil(interval / SECOND);\n\n        for (var i = 0; i < dSeconds + seconds; i = i + seconds) {\n          ticks.push(minSecond + i * SECOND);\n        }\n      }\n\n      return ticks;\n    }\n\n    registerTickMethod('cat', calculateCatTicks);\n    registerTickMethod('time-cat', calculateTimeCatTicks);\n    registerTickMethod('wilkinson-extended', linear);\n    registerTickMethod('r-pretty', linearPretty);\n    registerTickMethod('time', calculateTimeTicks);\n    registerTickMethod('time-pretty', timePretty);\n    registerTickMethod('log', calculateLogTicks);\n    registerTickMethod('pow', calculatePowTicks);\n    registerTickMethod('quantile', calculateTicks);\n    registerTickMethod('d3-linear', d3LinearTickMethod);\n\n    registerClass('cat', Category);\n    registerClass('category', Category);\n    registerClass('identity', Identity);\n    registerClass('linear', Linear);\n    registerClass('log', Log);\n    registerClass('pow', Pow);\n    registerClass('time', Time);\n    registerClass('timeCat', TimeCat);\n    registerClass('quantize', Quantize);\n    registerClass('quantile', Quantile);\n\n    // cat平均算法，保头保尾\n    var CatTick = (function (cfg) {\n      var values = cfg.values,\n          tickCount = cfg.tickCount;\n\n      if (!tickCount) {\n        return values;\n      }\n\n      if (values.length <= 1) {\n        return values;\n      } // 获取间隔步长, 最小是1\n\n\n      var step = parseInt(values.length / (tickCount - 1)) || 1;\n      var ticks = []; // 按间隔数取对应节点\n\n      for (var index = 0; index < values.length; index = index + step) {\n        ticks.push(values[index]);\n      }\n\n      var last = values[values.length - 1]; // 如果最后一个tick不等于原数据的最后一个\n\n      if (ticks[ticks.length - 1] !== last) {\n        if (ticks.length >= tickCount) {\n          // 如果当前的tick个数满足要求\n          ticks[ticks.length - 1] = last;\n        } else {\n          // 不满足tickCount则直接加入最后一个\n          ticks.push(last);\n        }\n      }\n\n      return ticks;\n    });\n\n    // 认为是nice的刻度\n    var SNAP_COUNT_ARRAY = [1, 1.2, 1.5, 2, 2.2, 2.4, 2.5, 3, 4, 5, 6, 7.5, 8, 10];\n    var DEFAULT_COUNT$1 = 5; // 默认刻度值\n\n    var LinearTick = (function (cfg) {\n      var _ref = cfg || {},\n          tickCount = _ref.tickCount,\n          tickInterval = _ref.tickInterval;\n\n      var _ref2 = cfg || {},\n          min = _ref2.min,\n          max = _ref2.max;\n\n      min = isNaN(min) ? 0 : min;\n      max = isNaN(max) ? 0 : max;\n      var count = tickCount && tickCount >= 2 ? tickCount : DEFAULT_COUNT$1; // 计算interval， 优先取tickInterval\n\n      var interval = tickInterval || getBestInterval({\n        tickCount: count,\n        max: max,\n        min: min\n      }); // 通过interval计算最小tick\n\n      var minTick = Math.floor(min / interval) * interval; // 如果指定了tickInterval, count 需要根据指定的tickInterval来算计\n\n      if (tickInterval) {\n        var intervalCount = Math.abs(Math.ceil((max - minTick) / tickInterval)) + 1; // tickCount 作为最小 count 处理\n\n        count = Math.max(count, intervalCount);\n      }\n\n      var ticks = [];\n      var tickLength = 0;\n      var fixedLength = getFixedLength(interval);\n\n      while (tickLength < count) {\n        ticks.push(toFixed(minTick + tickLength * interval, fixedLength));\n        tickLength++;\n      }\n\n      return ticks;\n    });\n    var DECIMAL_LENGTH = 12;\n\n    function getFactor(number) {\n      // 取正数\n      number = Math.abs(number);\n      var factor = 1;\n\n      if (number === 0) {\n        return factor;\n      } // 小于1,逐渐放大\n\n\n      if (number < 1) {\n        var count = 0;\n\n        while (number < 1) {\n          factor = factor / 10;\n          number = number * 10;\n          count++;\n        } // 浮点数计算出现问题\n\n\n        if (factor.toString().length > DECIMAL_LENGTH) {\n          factor = parseFloat(factor.toFixed(count));\n        }\n\n        return factor;\n      } // 大于10逐渐缩小\n\n\n      while (number > 10) {\n        factor = factor * 10;\n        number = number / 10;\n      }\n\n      return factor;\n    } // 获取最佳匹配刻度\n\n\n    function getBestInterval(_ref3) {\n      var tickCount = _ref3.tickCount,\n          min = _ref3.min,\n          max = _ref3.max;\n\n      // 如果最大最小相等，则直接按1处理\n      if (min === max) {\n        return 1 * getFactor(max);\n      } // 1.计算平均刻度\b间隔\n\n\n      var avgInterval = (max - min) / (tickCount - 1); // 2.数据标准归一化 映射到[1-10]区间\n\n      var factor = getFactor(avgInterval);\n      var calInterval = avgInterval / factor;\n      var calMax = max / factor;\n      var calMin = min / factor; // 根据平均值推算最逼近刻度值\n\n      var similarityIndex = 0;\n\n      for (var index = 0; index < SNAP_COUNT_ARRAY.length; index++) {\n        var item = SNAP_COUNT_ARRAY[index];\n\n        if (calInterval <= item) {\n          similarityIndex = index;\n          break;\n        }\n      }\n\n      var similarityInterval = getInterval(similarityIndex, tickCount, calMin, calMax); // 小数点位数还原到数据的位数, 因为similarityIndex有可能是小数，所以需要保留similarityIndex自己的小数位数\n\n      var fixedLength = getFixedLength(similarityInterval) + getFixedLength(factor);\n      return toFixed(similarityInterval * factor, fixedLength);\n    }\n\n    function getInterval(startIndex, tickCount, min, max) {\n      var verify = false;\n      var interval = SNAP_COUNT_ARRAY[startIndex]; // 刻度值校验，如果不满足，循环下去\n\n      for (var i = startIndex; i < SNAP_COUNT_ARRAY.length; i++) {\n        if (intervalIsVerify({\n          interval: SNAP_COUNT_ARRAY[i],\n          tickCount: tickCount,\n          max: max,\n          min: min\n        })) {\n          // 有符合条件的interval\n          interval = SNAP_COUNT_ARRAY[i];\n          verify = true;\n          break;\n        }\n      } // 如果不满足, 依次缩小10倍，再计算\n\n\n      if (!verify) {\n        return 10 * getInterval(0, tickCount, min / 10, max / 10);\n      }\n\n      return interval;\n    } // 刻度是否满足展示需求\n\n\n    function intervalIsVerify(_ref4) {\n      var interval = _ref4.interval,\n          tickCount = _ref4.tickCount,\n          max = _ref4.max,\n          min = _ref4.min;\n      var minTick = Math.floor(min / interval) * interval;\n\n      if (minTick + (tickCount - 1) * interval >= max) {\n        return true;\n      }\n\n      return false;\n    } // 计算小数点应该保留的位数\n\n\n    function getFixedLength(num) {\n      var str = num.toString();\n      var index = str.indexOf('.');\n      var indexOfExp = str.indexOf('e-');\n      var length = indexOfExp >= 0 ? parseInt(str.substr(indexOfExp + 2), 10) : str.substr(index + 1).length;\n\n      if (length > 20) {\n        // 最多保留20位小数\n        length = 20;\n      }\n\n      return length;\n    } // @antv/util fixedbase不支持科学计数法的判断，需要提mr\n\n\n    function toFixed(v, length) {\n      return parseFloat(v.toFixed(length));\n    }\n\n    var Linear$1 = getClass('linear');\n    var Identity$1 = getClass('identity');\n    var Category$1 = getClass('category');\n    var TimeCat$1 = getClass('timeCat'); // 覆盖0.3.x的 cat 方法\n\n    registerTickMethod('cat', CatTick);\n    registerTickMethod('time-cat', CatTick); // 覆盖linear 度量的tick算法\n\n    registerTickMethod('wilkinson-extended', LinearTick);\n    Scale.Linear = Linear$1;\n    Scale.Identity = Identity$1;\n    Scale.Category = Category$1;\n    Scale.Cat = Category$1;\n    Scale.TimeCat = TimeCat$1;\n\n    function isFullCircle(coord) {\n      if (!coord.isPolar) {\n        return false;\n      }\n\n      var startAngle = coord.startAngle;\n      var endAngle = coord.endAngle;\n\n      if (!isNil(startAngle) && !isNil(endAngle) && endAngle - startAngle < Math.PI * 2) {\n        return false;\n      }\n\n      return true;\n    }\n\n    function clearObj(obj) {\n      Object.keys(obj).forEach(function (key) {\n        delete obj[key];\n      });\n    }\n\n    var ScaleController = /*#__PURE__*/function () {\n      function ScaleController(cfg) {\n        // defs 列定义\n        this.defs = {}; // 已经实例化的scale\n\n        this.scales = {};\n        mix(this, cfg);\n      }\n\n      var _proto = ScaleController.prototype;\n\n      _proto.setFieldDef = function setFieldDef(field, cfg) {\n        var defs = this.defs;\n\n        if (isObject(field)) {\n          mix(defs, field);\n        } else {\n          defs[field] = cfg;\n        } // 因为可能同时变更多个scale，所以要把所有已实例化的scale都更新下\n\n\n        this.updateScales();\n      };\n\n      _proto._getDef = function _getDef(field) {\n        var defs = this.defs;\n        var def = null;\n\n        if (Global.scales[field] || defs[field]) {\n          def = mix({}, Global.scales[field]);\n          each(defs[field], function (v, k) {\n            if (isNil(v)) {\n              delete def[k];\n            } else {\n              def[k] = v;\n            }\n          });\n        }\n\n        return def;\n      };\n\n      _proto._getDefaultType = function _getDefaultType(field, data, def) {\n        if (def && def.type) {\n          return def.type;\n        }\n\n        var type = 'linear';\n        var value = firstValue(data, field);\n\n        if (isArray(value)) {\n          value = value[0];\n        }\n\n        if (isString(value)) {\n          type = 'cat';\n        }\n\n        return type;\n      };\n\n      _proto._getScaleDef = function _getScaleDef(type, field, data, def) {\n        var values$1;\n\n        if (def && def.values) {\n          values$1 = def.values;\n        } else {\n          values$1 = values(data, field);\n        }\n\n        var cfg = {\n          field: field,\n          values: values$1\n        };\n\n        if (type !== 'cat' && type !== 'timeCat') {\n          if (!def || !(def.min && def.max)) {\n            var _Array$getRange = getRange$1(values$1),\n                min = _Array$getRange.min,\n                max = _Array$getRange.max;\n\n            cfg.min = min;\n            cfg.max = max;\n            cfg.nice = true;\n          }\n        } else {\n          cfg.isRounding = false; // used for tickCount calculation\n        }\n\n        return cfg;\n      } // 调整range，为了让图形居中\n      ;\n\n      _proto._adjustRange = function _adjustRange(type, cfg) {\n        var range = cfg.range,\n            values = cfg.values; // 如果是线性, 或者有自定义range都不处理\n\n        if (type === 'linear' || range || !values) {\n          return cfg;\n        }\n\n        var count = values.length; // 单只有一条数据时，在中间显示\n\n        if (count === 1) {\n          cfg.range = [0.5, 1];\n        } else {\n          var chart = this.chart;\n          var coord = chart.get('coord');\n          var widthRatio = Global.widthRatio.multiplePie;\n          var offset = 0;\n\n          if (isFullCircle(coord)) {\n            if (!coord.transposed) {\n              cfg.range = [0, 1 - 1 / count];\n            } else {\n              offset = 1 / count * widthRatio;\n              cfg.range = [offset / 2, 1 - offset / 2];\n            }\n          } else {\n            // 为了让图形居中，所以才设置range\n            offset = 1 / count * 0.5; // 这里可能用0.25会更合理\n\n            cfg.range = [offset, 1 - offset];\n          }\n        }\n\n        return cfg;\n      };\n\n      _proto._getScaleCfg = function _getScaleCfg(field, data) {\n        var self = this;\n\n        var def = self._getDef(field);\n\n        if (!data || !data.length) {\n          if (def && def.type) {\n            def.field = field;\n            return {\n              type: def.type,\n              cfg: def\n            };\n          }\n\n          return {\n            type: 'identity',\n            cfg: {\n              value: field,\n              field: field.toString(),\n              values: [field]\n            }\n          };\n        }\n\n        var firstObj = data[0];\n        var firstValue$1 = firstObj[field];\n\n        if (firstValue$1 === null) {\n          firstValue$1 = firstValue(data, field);\n        }\n\n        if (isNumber(field) || isNil(firstValue$1) && !def) {\n          return {\n            type: 'identity',\n            cfg: {\n              value: field,\n              field: field.toString(),\n              values: [field]\n            }\n          };\n        }\n\n        var type = self._getDefaultType(field, data, def);\n\n        var cfg = self._getScaleDef(type, field, data, def);\n\n        def && mix(cfg, def);\n        cfg = this._adjustRange(type, cfg);\n        return {\n          type: type,\n          cfg: cfg\n        };\n      };\n\n      _proto.createScale = function createScale(field, data) {\n        var scales = this.scales;\n\n        var _this$_getScaleCfg = this._getScaleCfg(field, data),\n            type = _this$_getScaleCfg.type,\n            cfg = _this$_getScaleCfg.cfg;\n\n        var scale = scales[field]; // 如果已经存在，且类型相等时直接返回\n\n        if (scale && scale.type === type) {\n          scale.change(cfg);\n          return scale;\n        }\n\n        var Scale = getClass(type);\n        var newScale = new Scale(cfg);\n        scales[field] = newScale;\n        return newScale;\n      };\n\n      _proto._updateScale = function _updateScale(scale) {\n        var field = scale.field; // 因为每个field的数据都会不同\n\n        var data = this.chart._getScaleData(field);\n\n        var _this$_getScaleCfg2 = this._getScaleCfg(field, data),\n            cfg = _this$_getScaleCfg2.cfg;\n\n        scale.change(cfg);\n      };\n\n      _proto.updateScales = function updateScales() {\n        var _this = this;\n\n        var scales = this.scales; // 修改完列定义后，需要更新已经实例化的scale\n        // 如果是还没有实例化的，在geom初始化的时候会被实例化，所以这里可以不用更新\n\n        each(scales, function (scale) {\n          _this._updateScale(scale);\n        });\n      } // 调整scale从0开始\n      ;\n\n      _proto.adjustStartZero = function adjustStartZero(scale) {\n        var defs = this.defs;\n        var field = scale.field,\n            min = scale.min,\n            max = scale.max; // 如果有定义，则不处理\n\n        if (defs[field] && defs[field].min) {\n          return;\n        }\n\n        if (min > 0) {\n          scale.change({\n            min: 0\n          });\n        } else if (max < 0) {\n          scale.change({\n            max: 0\n          });\n        }\n      };\n\n      _proto.clear = function clear() {\n        // this.defs = {};\n        // this.scales = {};\n        clearObj(this.defs);\n        clearObj(this.scales);\n        this.data = null;\n      };\n\n      return ScaleController;\n    }();\n\n    var Abastract = /*#__PURE__*/function () {\n      var _proto = Abastract.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        /**\n         * ticks\n         * @type {Array}\n         */\n        this.ticks = [];\n        /**\n         * the configuration for tickLine\n         * @type {Object}\n         */\n\n        this.tickLine = {};\n        /**\n         * the direction of ticks, 1 means clockwise\n         * @type {Number}\n         */\n\n        this.offsetFactor = 1;\n        /**\n         * the top container\n         * @type {container}\n         */\n\n        this.frontContainer = null;\n        /**\n         * the back container\n         * @type {[type]}\n         */\n\n        this.backContainer = null;\n        /**\n         * points for draw grid line\n         * @type {Array}\n         */\n\n        this.gridPoints = [];\n      };\n\n      function Abastract(cfg) {\n        this._initDefaultCfg();\n\n        mix(this, cfg);\n        this.draw();\n      }\n\n      _proto.draw = function draw() {\n        var line = this.line,\n            tickLine = this.tickLine,\n            label = this.label,\n            grid = this.grid;\n        grid && this.drawGrid(grid); // draw the grid lines\n\n        tickLine && this.drawTicks(tickLine); // draw the tickLine\n\n        line && this.drawLine(line); // draw axis line\n\n        label && this.drawLabels(); // draw ticks\n      };\n\n      _proto.drawTicks = function drawTicks(tickCfg) {\n        var self = this;\n        var ticks = self.ticks;\n        var length = tickCfg.length;\n        var container = self.getContainer(tickCfg.top);\n        each(ticks, function (tick) {\n          var start = self.getOffsetPoint(tick.value);\n          var end = self.getSidePoint(start, length);\n          var shape = container.addShape('line', {\n            className: 'axis-tick',\n            attrs: mix({\n              x1: start.x,\n              y1: start.y,\n              x2: end.x,\n              y2: end.y\n            }, tickCfg)\n          });\n          shape._id = self._id + '-ticks';\n        });\n      };\n\n      _proto.drawLabels = function drawLabels() {\n        var self = this;\n        var labelOffset = self.labelOffset;\n        var labels = self.labels;\n        each(labels, function (labelShape) {\n          var container = self.getContainer(labelShape.get('top'));\n          var start = self.getOffsetPoint(labelShape.get('value'));\n\n          var _self$getSidePoint = self.getSidePoint(start, labelOffset),\n              x = _self$getSidePoint.x,\n              y = _self$getSidePoint.y;\n\n          labelShape.attr(mix({\n            x: x,\n            y: y\n          }, self.getTextAlignInfo(start, labelOffset), labelShape.get('textStyle')));\n          labelShape._id = self._id + '-' + labelShape.attr('text');\n          container.add(labelShape);\n        });\n      };\n\n      _proto.drawLine = function drawLine() {};\n\n      _proto.drawGrid = function drawGrid(grid) {\n        var self = this;\n        var gridPoints = self.gridPoints,\n            ticks = self.ticks;\n        var gridCfg = grid;\n        var count = gridPoints.length;\n        each(gridPoints, function (subPoints, index) {\n          if (isFunction(grid)) {\n            var tick = ticks[index] || {};\n            var executedGrid = grid(tick.text, index, count);\n            gridCfg = executedGrid ? mix({}, Global._defaultAxis.grid, executedGrid) : null;\n          }\n\n          if (gridCfg) {\n            var type = gridCfg.type; // has two types: 'line' and 'arc'\n\n            var points = subPoints.points;\n            var container = self.getContainer(gridCfg.top);\n            var shape;\n\n            if (type === 'arc') {\n              var center = self.center,\n                  startAngle = self.startAngle,\n                  endAngle = self.endAngle;\n              var radius = Vector2.length([points[0].x - center.x, points[0].y - center.y]);\n              shape = container.addShape('Arc', {\n                className: 'axis-grid',\n                attrs: mix({\n                  x: center.x,\n                  y: center.y,\n                  startAngle: startAngle,\n                  endAngle: endAngle,\n                  r: radius\n                }, gridCfg)\n              });\n            } else {\n              shape = container.addShape('Polyline', {\n                className: 'axis-grid',\n                attrs: mix({\n                  points: points\n                }, gridCfg)\n              });\n            }\n\n            shape._id = subPoints._id;\n          }\n        });\n      };\n\n      _proto.getOffsetPoint = function getOffsetPoint() {};\n\n      _proto.getAxisVector = function getAxisVector() {};\n\n      _proto.getOffsetVector = function getOffsetVector(point, offset) {\n        var self = this;\n        var axisVector = self.getAxisVector(point);\n        var normal = Vector2.normalize([], axisVector);\n        var factor = self.offsetFactor;\n        var verticalVector = [normal[1] * -1 * factor, normal[0] * factor];\n        return Vector2.scale([], verticalVector, offset);\n      };\n\n      _proto.getSidePoint = function getSidePoint(point, offset) {\n        var self = this;\n        var offsetVector = self.getOffsetVector(point, offset);\n        return {\n          x: point.x + offsetVector[0],\n          y: point.y + offsetVector[1]\n        };\n      };\n\n      _proto.getTextAlignInfo = function getTextAlignInfo(point, offset) {\n        var self = this;\n        var offsetVector = self.getOffsetVector(point, offset);\n        var align;\n        var baseLine;\n\n        if (offsetVector[0] > 0) {\n          align = 'left';\n        } else if (offsetVector[0] < 0) {\n          align = 'right';\n        } else {\n          align = 'center';\n        }\n\n        if (offsetVector[1] > 0) {\n          baseLine = 'top';\n        } else if (offsetVector[1] < 0) {\n          baseLine = 'bottom';\n        } else {\n          baseLine = 'middle';\n        }\n\n        return {\n          textAlign: align,\n          textBaseline: baseLine\n        };\n      };\n\n      _proto.getContainer = function getContainer(isTop) {\n        var frontContainer = this.frontContainer,\n            backContainer = this.backContainer;\n        return isTop ? frontContainer : backContainer;\n      };\n\n      return Abastract;\n    }();\n\n    var Line = /*#__PURE__*/function (_Abstract) {\n      _inheritsLoose(Line, _Abstract);\n\n      function Line() {\n        return _Abstract.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        _Abstract.prototype._initDefaultCfg.call(this);\n\n        this.start = null;\n        this.end = null;\n      };\n\n      _proto.getOffsetPoint = function getOffsetPoint(value) {\n        var start = this.start,\n            end = this.end;\n        return {\n          x: start.x + (end.x - start.x) * value,\n          y: start.y + (end.y - start.y) * value\n        };\n      };\n\n      _proto.getAxisVector = function getAxisVector() {\n        var start = this.start,\n            end = this.end;\n        return [end.x - start.x, end.y - start.y];\n      };\n\n      _proto.drawLine = function drawLine(lineCfg) {\n        var container = this.getContainer(lineCfg.top);\n        var start = this.start,\n            end = this.end;\n        container.addShape('line', {\n          className: 'axis-line',\n          attrs: mix({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          }, lineCfg)\n        });\n      };\n\n      return Line;\n    }(Abastract);\n\n    Abastract.Line = Line;\n\n    var calcDirection = function calcDirection(start, end) {\n      var xDistance = end.x - start.x;\n      var yDistance = end.y - start.y; // x 的距离大于y 说明是横向，否则就是纵向\n\n      if (Math.abs(xDistance) > Math.abs(yDistance)) {\n        return xDistance > 0 ? 'right' : 'left';\n      }\n\n      return yDistance > 0 ? 'down' : 'up';\n    }; // 计算2点之间的距离\n\n\n    var calcDistance = function calcDistance(point1, point2) {\n      var xDistance = Math.abs(point2.x - point1.x);\n      var yDistance = Math.abs(point2.y - point1.y);\n      return Math.sqrt(xDistance * xDistance + yDistance * yDistance);\n    };\n\n    var getCenter = function getCenter(point1, point2) {\n      var x = point1.x + (point2.x - point1.x) / 2;\n      var y = point1.y + (point2.y - point1.y) / 2;\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var convertPoints = function convertPoints(ev, canvas) {\n      var touches = ev.touches; // 认为是mouse事件\n\n      if (!touches) {\n        var point = getRelativePosition({\n          x: ev.clientX,\n          y: ev.clientY\n        }, canvas);\n        return [point];\n      }\n\n      var points = [];\n      var len = touches.length;\n\n      for (var i = 0; i < len; i++) {\n        var touch = touches[i]; // x, y: 相对canvas原点的位置，clientX, clientY 相对于可视窗口的位置\n\n        var x = touch.x,\n            y = touch.y,\n            clientX = touch.clientX,\n            clientY = touch.clientY;\n\n        var _point = void 0; // 小程序环境会有x,y\n\n\n        if (isNumber(x) || isNumber(y)) {\n          _point = {\n            x: x,\n            y: y\n          };\n        } else {\n          // 浏览器环境再计算下canvas的相对位置\n          _point = getRelativePosition({\n            x: clientX,\n            y: clientY\n          }, canvas);\n        }\n\n        points.push(_point);\n      }\n\n      return points;\n    };\n\n    var PRESS_DELAY = 250;\n\n    var EventController = /*#__PURE__*/function () {\n      function EventController(_ref) {\n        var _this = this;\n\n        var canvas = _ref.canvas,\n            el = _ref.el;\n\n        _defineProperty(this, \"_click\", function (ev) {\n          var points = convertPoints(ev, _this.canvas);\n          ev.points = points;\n\n          _this.emitEvent('click', ev);\n        });\n\n        _defineProperty(this, \"_start\", function (ev) {\n          var points = convertPoints(ev, _this.canvas);\n\n          if (!points) {\n            return;\n          }\n\n          ev.points = points;\n\n          _this.emitEvent('touchstart', ev); // 防止上次的内容没有清理掉，重新reset下\n\n\n          _this.reset(); // 记录touch start 的时间\n\n\n          _this.startTime = Date.now(); // 记录touch start 的点\n\n          _this.startPoints = points;\n\n          if (points.length > 1) {\n            _this.startDistance = calcDistance(points[0], points[1]);\n            _this.center = getCenter(points[0], points[1]);\n          } else {\n            // 如果touchstart后停顿250ms, 则也触发press事件\n            _this.pressTimeout = setTimeout(function () {\n              // 这里固定触发press事件\n              var eventType = 'press';\n              var direction = 'none';\n              ev.direction = direction;\n\n              _this.emitStart(eventType, ev);\n\n              _this.emitEvent(eventType, ev);\n\n              _this.eventType = eventType;\n              _this.direction = direction;\n            }, PRESS_DELAY);\n          }\n        });\n\n        _defineProperty(this, \"_move\", function (ev) {\n          var points = convertPoints(ev, _this.canvas);\n          if (!points) return;\n\n          _this.clearPressTimeout();\n\n          ev.points = points;\n\n          _this.emitEvent('touchmove', ev);\n\n          var startPoints = _this.startPoints;\n          if (!startPoints) return; // 多指触控\n\n          if (points.length > 1) {\n            // touchstart的距离\n            var startDistance = _this.startDistance;\n            var currentDistance = calcDistance(points[0], points[1]);\n            ev.zoom = currentDistance / startDistance;\n            ev.center = _this.center; // 触发缩放事件\n\n            _this.emitStart('pinch', ev);\n\n            _this.emitEvent('pinch', ev);\n          } else {\n            var deltaX = points[0].x - startPoints[0].x;\n            var deltaY = points[0].y - startPoints[0].y;\n            var direction = _this.direction || calcDirection(startPoints[0], points[0]);\n            _this.direction = direction; // 获取press或者pan的事件类型\n            // press 按住滑动, pan表示平移\n            // 如果start后立刻move，则触发pan, 如果有停顿，则触发press\n\n            var eventType = _this.getEventType(points);\n\n            ev.direction = direction;\n            ev.deltaX = deltaX;\n            ev.deltaY = deltaY;\n\n            _this.emitStart(eventType, ev);\n\n            _this.emitEvent(eventType, ev); // 记录最后2次move的时间和坐标，为了给swipe事件用\n\n\n            var prevMoveTime = _this.lastMoveTime;\n            var now = Date.now(); // 最后2次的时间间隔一定要大于0，否则swipe没发计算\n\n            if (now - prevMoveTime > 0) {\n              _this.prevMoveTime = prevMoveTime;\n              _this.prevMovePoints = _this.lastMovePoints;\n              _this.lastMoveTime = now;\n              _this.lastMovePoints = points;\n            }\n          }\n        });\n\n        _defineProperty(this, \"_end\", function (ev) {\n          _this.emitEnd(ev);\n\n          _this.emitEvent('touchend', ev); // swipe事件处理, 在touchend之后触发\n\n\n          var lastMoveTime = _this.lastMoveTime;\n          var now = Date.now(); // 做这个判断是为了最后一次touchmove后到end前，还有一个停顿的过程\n          // 100 是拍的一个值，理论这个值会很短，一般不卡顿的话在10ms以内\n\n          if (now - lastMoveTime < 100) {\n            var prevMoveTime = _this.prevMoveTime || _this.startTime;\n            var intervalTime = lastMoveTime - prevMoveTime; // 时间间隔一定要大于0, 否则计算没意义\n\n            if (intervalTime > 0) {\n              var prevMovePoints = _this.prevMovePoints || _this.startPoints;\n              var lastMovePoints = _this.lastMovePoints; // move速率\n\n              var velocity = calcDistance(prevMovePoints[0], lastMovePoints[0]) / intervalTime; // 0.3 是参考hammerjs的设置\n\n              if (velocity > 0.3) {\n                ev.velocity = velocity;\n                ev.direction = calcDirection(prevMovePoints[0], lastMovePoints[0]);\n\n                _this.emitEvent('swipe', ev);\n              }\n            }\n          }\n\n          _this.reset();\n\n          var touches = ev.touches; // 当多指只释放了1指时也会触发end, 这时重新触发一次start\n\n          if (touches && touches.length > 0) {\n            _this._start(ev);\n          }\n        });\n\n        _defineProperty(this, \"_cancel\", function (ev) {\n          _this.emitEvent('touchcancel', ev);\n\n          _this.reset();\n        });\n\n        // canvasEl\n        this.canvas = canvas;\n        this.delegateEvent(el); // 用来记录当前触发的事件\n\n        this.processEvent = {};\n      }\n\n      var _proto = EventController.prototype;\n\n      _proto.delegateEvent = function delegateEvent(canvasEl) {\n        // 代理这几个事件\n        canvasEl.addEventListener('click', this._click);\n        canvasEl.addEventListener('touchstart', this._start);\n        canvasEl.addEventListener('touchmove', this._move);\n        canvasEl.addEventListener('touchend', this._end);\n        canvasEl.addEventListener('touchcancel', this._cancel);\n      };\n\n      _proto.emitEvent = function emitEvent(type, ev) {\n        var canvas = this.canvas;\n        canvas.emit(type, ev);\n      };\n\n      _proto.getEventType = function getEventType(points) {\n        var eventType = this.eventType,\n            canvas = this.canvas,\n            startTime = this.startTime,\n            startPoints = this.startPoints;\n\n        if (eventType) {\n          return eventType;\n        }\n\n        var type;\n        var panEventListeners = canvas.__events.pan; // 如果没有pan事件的监听，默认都是press\n\n        if (!panEventListeners || !panEventListeners.length) {\n          type = 'press';\n        } else {\n          // 如果有pan事件的处理，press则需要停顿250ms, 且移动距离小于10\n          var now = Date.now();\n\n          if (now - startTime > PRESS_DELAY && calcDistance(startPoints[0], points[0]) < 10) {\n            type = 'press';\n          } else {\n            type = 'pan';\n          }\n        }\n\n        this.eventType = type;\n        return type;\n      };\n\n      _proto.enable = function enable(eventType) {\n        this.processEvent[eventType] = true;\n      } // 是否进行中的事件\n      ;\n\n      _proto.isProcess = function isProcess(eventType) {\n        return this.processEvent[eventType];\n      } // 触发start事件\n      ;\n\n      _proto.emitStart = function emitStart(type, ev) {\n        if (this.isProcess(type)) {\n          return;\n        }\n\n        this.enable(type);\n        this.emitEvent(type + \"start\", ev);\n      } // 触发end事件\n      ;\n\n      _proto.emitEnd = function emitEnd(ev) {\n        var _this2 = this;\n\n        var processEvent = this.processEvent;\n        Object.keys(processEvent).forEach(function (type) {\n          _this2.emitEvent(type + \"end\", ev);\n\n          delete processEvent[type];\n        });\n      };\n\n      _proto.clearPressTimeout = function clearPressTimeout() {\n        if (this.pressTimeout) {\n          clearTimeout(this.pressTimeout);\n          this.pressTimeout = 0;\n        }\n      };\n\n      _proto.reset = function reset() {\n        this.clearPressTimeout();\n        this.startTime = 0;\n        this.startPoints = null;\n        this.startDistance = 0;\n        this.direction = null;\n        this.eventType = null;\n        this.pinch = false;\n        this.prevMoveTime = 0;\n        this.prevMovePoints = null;\n        this.lastMoveTime = 0;\n        this.lastMovePoints = null;\n      };\n\n      return EventController;\n    }();\n\n    var CanvasElement = /*#__PURE__*/function (_EventEmit) {\n      _inheritsLoose(CanvasElement, _EventEmit);\n\n      function CanvasElement(ctx) {\n        var _this;\n\n        _this = _EventEmit.call(this) || this;\n        _this.context = ctx; // canvas实际的宽高 (width/height) * pixelRatio\n\n        _this.width = 0;\n        _this.height = 0;\n        _this.style = {};\n        _this.currentStyle = {}; // 用来标识是CanvasElement实例\n\n        _this.isCanvasElement = true;\n        return _this;\n      }\n\n      var _proto = CanvasElement.prototype;\n\n      _proto.getContext = function getContext()\n      /* type */\n      {\n        return this.context;\n      };\n\n      _proto.getBoundingClientRect = function getBoundingClientRect() {\n        var width = this.width;\n        var height = this.height; // 默认都处理成可视窗口的顶部位置\n\n        return {\n          top: 0,\n          right: width,\n          bottom: height,\n          left: 0\n        };\n      };\n\n      _proto.addEventListener = function addEventListener(type, listener) {\n        this.on(type, listener);\n      };\n\n      _proto.removeEventListener = function removeEventListener(type, listener) {\n        this.off(type, listener);\n      };\n\n      _proto.dispatchEvent = function dispatchEvent(type, e) {\n        this.emit(type, e);\n      };\n\n      return CanvasElement;\n    }(EventEmit);\n\n    function supportEventListener(canvas) {\n      if (!canvas) {\n        return false;\n      } // 非 HTMLCanvasElement\n\n\n      if (canvas.nodeType !== 1 || !canvas.nodeName || canvas.nodeName.toLowerCase() !== 'canvas') {\n        return false;\n      } // 微信小程序canvas.getContext('2d')时也是CanvasRenderingContext2D\n      // 也会有ctx.canvas, 而且nodeType也是1，所以还要在看下是否支持addEventListener\n\n\n      var support = false;\n\n      try {\n        canvas.addEventListener('eventTest', function () {\n          support = true;\n        });\n        canvas.dispatchEvent(new Event('eventTest'));\n      } catch (error) {\n        support = false;\n      }\n\n      return support;\n    }\n\n    var CanvasElement$1 = {\n      create: function create(ctx) {\n        if (!ctx) {\n          return null;\n        }\n\n        if (supportEventListener(ctx.canvas)) {\n          return ctx.canvas;\n        }\n\n        return new CanvasElement(ctx);\n      }\n    };\n\n    function _mod(n, m) {\n      return (n % m + m) % m;\n    }\n\n    function _addStop(steps, gradient) {\n      each(steps, function (item) {\n        item = item.split(':');\n        gradient.addColorStop(Number(item[0]), item[1]);\n      });\n    } // the string format: 'l(0) 0:#ffffff 0.5:#7ec2f3 1:#1890ff'\n\n\n    function _parseLineGradient(color, shape, context) {\n      var arr = color.split(' ');\n      var angle = arr[0].slice(2, arr[0].length - 1);\n      angle = _mod(parseFloat(angle) * Math.PI / 180, Math.PI * 2);\n      var steps = arr.slice(1);\n\n      var _shape$getBBox = shape.getBBox(),\n          minX = _shape$getBBox.minX,\n          minY = _shape$getBBox.minY,\n          maxX = _shape$getBBox.maxX,\n          maxY = _shape$getBBox.maxY;\n\n      var start;\n      var end;\n\n      if (angle >= 0 && angle < 0.5 * Math.PI) {\n        start = {\n          x: minX,\n          y: minY\n        };\n        end = {\n          x: maxX,\n          y: maxY\n        };\n      } else if (0.5 * Math.PI <= angle && angle < Math.PI) {\n        start = {\n          x: maxX,\n          y: minY\n        };\n        end = {\n          x: minX,\n          y: maxY\n        };\n      } else if (Math.PI <= angle && angle < 1.5 * Math.PI) {\n        start = {\n          x: maxX,\n          y: maxY\n        };\n        end = {\n          x: minX,\n          y: minY\n        };\n      } else {\n        start = {\n          x: minX,\n          y: maxY\n        };\n        end = {\n          x: maxX,\n          y: minY\n        };\n      }\n\n      var tanTheta = Math.tan(angle);\n      var tanTheta2 = tanTheta * tanTheta;\n      var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;\n      var y = tanTheta * (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.y;\n      var gradient = context.createLinearGradient(start.x, start.y, x, y);\n\n      _addStop(steps, gradient);\n\n      return gradient;\n    } // the string format: 'r(0.5, 0.5, 0.1) 0:#ffffff 1:#1890ff'\n\n\n    function _parseRadialGradient(color, shape, context) {\n      var arr = color.split(' ');\n      var circleCfg = arr[0].slice(2, arr[0].length - 1);\n      circleCfg = circleCfg.split(',');\n      var fx = parseFloat(circleCfg[0]);\n      var fy = parseFloat(circleCfg[1]);\n      var fr = parseFloat(circleCfg[2]);\n      var steps = arr.slice(1); // if radius is 0, no gradient, stroke with the last color\n\n      if (fr === 0) {\n        var _color = steps[steps.length - 1];\n        return _color.split(':')[1];\n      }\n\n      var _shape$getBBox2 = shape.getBBox(),\n          width = _shape$getBBox2.width,\n          height = _shape$getBBox2.height,\n          minX = _shape$getBBox2.minX,\n          minY = _shape$getBBox2.minY;\n\n      var r = Math.sqrt(width * width + height * height) / 2;\n      var gradient = context.createRadialGradient(minX + width * fx, minY + height * fy, fr * r, minX + width / 2, minY + height / 2, r);\n\n      _addStop(steps, gradient);\n\n      return gradient;\n    }\n\n    function parseStyle(color, shape, context) {\n      if (color[1] === '(') {\n        try {\n          var firstCode = color[0];\n\n          if (firstCode === 'l') {\n            return _parseLineGradient(color, shape, context);\n          } else if (firstCode === 'r') {\n            return _parseRadialGradient(color, shape, context);\n          }\n        } catch (ev) {\n          console.error('error in parsing gradient string, please check if there are any extra whitespaces.');\n          console.error(ev);\n        }\n      }\n\n      return color;\n    }\n\n    var ALIAS_ATTRS_MAP = {\n      stroke: 'strokeStyle',\n      fill: 'fillStyle',\n      opacity: 'globalAlpha'\n    };\n    var SHAPE_ATTRS = ['fillStyle', 'font', 'globalAlpha', 'lineCap', 'lineWidth', 'lineJoin', 'miterLimit', 'shadowBlur', 'shadowColor', 'shadowOffsetX', 'shadowOffsetY', 'strokeStyle', 'textAlign', 'textBaseline', 'lineDash', 'shadow' // 兼容支付宝小程序\n    ];\n    var CLIP_SHAPES = ['circle', 'sector', 'polygon', 'rect', 'polyline'];\n\n    var Element = /*#__PURE__*/function () {\n      var _proto = Element.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        this._attrs = {\n          zIndex: 0,\n          visible: true,\n          destroyed: false\n        };\n      };\n\n      function Element(cfg) {\n        this._initProperties();\n\n        mix(this._attrs, cfg);\n        var attrs = this._attrs.attrs;\n\n        if (attrs) {\n          this.initAttrs(attrs);\n        }\n\n        this.initTransform();\n      }\n\n      _proto.get = function get(name) {\n        return this._attrs[name];\n      };\n\n      _proto.set = function set(name, value) {\n        this._attrs[name] = value;\n      };\n\n      _proto.isGroup = function isGroup() {\n        return this.get('isGroup');\n      };\n\n      _proto.isShape = function isShape() {\n        return this.get('isShape');\n      };\n\n      _proto.initAttrs = function initAttrs(attrs) {\n        this.attr(mix(this.getDefaultAttrs(), attrs));\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {};\n      };\n\n      _proto._setAttr = function _setAttr(name, value) {\n        var attrs = this._attrs.attrs;\n\n        if (name === 'clip') {\n          value = this._setAttrClip(value);\n        } else {\n          var alias = ALIAS_ATTRS_MAP[name];\n\n          if (alias) {\n            attrs[alias] = value;\n          }\n        }\n\n        attrs[name] = value;\n      };\n\n      _proto._getAttr = function _getAttr(name) {\n        return this._attrs.attrs[name];\n      } // _afterAttrsSet() {}\n      ;\n\n      _proto._setAttrClip = function _setAttrClip(clip) {\n        if (clip && CLIP_SHAPES.indexOf(clip._attrs.type) > -1) {\n          if (clip.get('canvas') === null) {\n            clip = Object.assign({}, clip);\n          }\n\n          clip.set('parent', this.get('parent'));\n          clip.set('context', this.get('context'));\n          return clip;\n        }\n\n        return null;\n      };\n\n      _proto.attr = function attr(name, value) {\n        var self = this;\n        if (self.get('destroyed')) return null;\n        var argumentsLen = arguments.length;\n\n        if (argumentsLen === 0) {\n          return self._attrs.attrs;\n        }\n\n        if (isObject(name)) {\n          this._attrs.bbox = null;\n\n          for (var k in name) {\n            self._setAttr(k, name[k]);\n          }\n\n          if (self._afterAttrsSet) {\n            self._afterAttrsSet();\n          }\n\n          return self;\n        }\n\n        if (argumentsLen === 2) {\n          this._attrs.bbox = null;\n\n          self._setAttr(name, value);\n\n          if (self._afterAttrsSet) {\n            self._afterAttrsSet();\n          }\n\n          return self;\n        }\n\n        return self._getAttr(name);\n      };\n\n      _proto.getParent = function getParent() {\n        return this.get('parent');\n      };\n\n      _proto.draw = function draw(context) {\n        if (this.get('destroyed')) {\n          return;\n        }\n\n        if (this.get('visible')) {\n          this.setContext(context);\n          this.drawInner(context);\n          this.restoreContext(context);\n        }\n      };\n\n      _proto.setContext = function setContext(context) {\n        var clip = this._attrs.attrs.clip;\n        context.save();\n\n        if (clip) {\n          clip.resetTransform(context);\n          clip.createPath(context);\n          context.clip();\n        }\n\n        this.resetContext(context);\n        this.resetTransform(context);\n      };\n\n      _proto.restoreContext = function restoreContext(context) {\n        context.restore();\n      };\n\n      _proto.resetContext = function resetContext(context) {\n        var elAttrs = this._attrs.attrs;\n\n        if (!this._attrs.isGroup) {\n          for (var k in elAttrs) {\n            if (SHAPE_ATTRS.indexOf(k) > -1) {\n              var v = elAttrs[k];\n\n              if (k === 'fillStyle' || k === 'strokeStyle') {\n                v = parseStyle(v, this, context);\n              }\n\n              if (k === 'lineDash' && context.setLineDash && isArray(v)) {\n                context.setLineDash(v);\n              } else {\n                context[k] = v;\n              }\n            }\n          }\n        }\n      };\n\n      _proto.hasFill = function hasFill() {\n        return this.get('canFill') && this._attrs.attrs.fillStyle;\n      };\n\n      _proto.hasStroke = function hasStroke() {\n        return this.get('canStroke') && this._attrs.attrs.strokeStyle;\n      };\n\n      _proto.drawInner = function drawInner()\n      /* context */\n      {};\n\n      _proto.show = function show() {\n        this.set('visible', true);\n        return this;\n      };\n\n      _proto.hide = function hide() {\n        this.set('visible', false);\n        return this;\n      };\n\n      _proto.isVisible = function isVisible() {\n        return this.get('visible');\n      };\n\n      _proto._removeFromParent = function _removeFromParent() {\n        var parent = this.get('parent');\n\n        if (parent) {\n          var children = parent.get('children');\n          remove(children, this);\n        }\n\n        return this;\n      };\n\n      _proto.remove = function remove(destroy) {\n        if (destroy) {\n          this.destroy();\n        } else {\n          this._removeFromParent();\n        }\n      };\n\n      _proto.destroy = function destroy() {\n        var destroyed = this.get('destroyed');\n\n        if (destroyed) {\n          return null;\n        }\n\n        this._removeFromParent();\n\n        this._attrs = {};\n        this.set('destroyed', true);\n      };\n\n      _proto.getBBox = function getBBox() {\n        return {\n          minX: 0,\n          maxX: 0,\n          minY: 0,\n          maxY: 0,\n          width: 0,\n          height: 0\n        };\n      };\n\n      _proto.initTransform = function initTransform() {\n        var attrs = this._attrs.attrs || {};\n\n        if (!attrs.matrix) {\n          attrs.matrix = [1, 0, 0, 1, 0, 0];\n        }\n\n        this._attrs.attrs = attrs;\n      };\n\n      _proto.getMatrix = function getMatrix() {\n        return this._attrs.attrs.matrix;\n      };\n\n      _proto.setMatrix = function setMatrix(m) {\n        this._attrs.attrs.matrix = [m[0], m[1], m[2], m[3], m[4], m[5]];\n      };\n\n      _proto.transform = function transform(actions) {\n        var matrix = this._attrs.attrs.matrix;\n        this._attrs.attrs.matrix = Matrix.transform(matrix, actions);\n        return this;\n      };\n\n      _proto.setTransform = function setTransform(actions) {\n        this._attrs.attrs.matrix = [1, 0, 0, 1, 0, 0];\n        return this.transform(actions);\n      };\n\n      _proto.translate = function translate(x, y) {\n        var matrix = this._attrs.attrs.matrix;\n        Matrix.translate(matrix, matrix, [x, y]);\n      };\n\n      _proto.rotate = function rotate(rad) {\n        var matrix = this._attrs.attrs.matrix;\n        Matrix.rotate(matrix, matrix, rad);\n      };\n\n      _proto.scale = function scale(sx, sy) {\n        var matrix = this._attrs.attrs.matrix;\n        Matrix.scale(matrix, matrix, [sx, sy]);\n      };\n\n      _proto.moveTo = function moveTo(x, y) {\n        var cx = this._attrs.x || 0;\n        var cy = this._attrs.y || 0;\n        this.translate(x - cx, y - cy);\n        this.set('x', x);\n        this.set('y', y);\n      };\n\n      _proto.apply = function apply(v) {\n        var m = this._attrs.attrs.matrix;\n        Vector2.transformMat2d(v, v, m);\n        return this;\n      };\n\n      _proto.resetTransform = function resetTransform(context) {\n        var mo = this._attrs.attrs.matrix;\n\n        if (Matrix.isChanged(mo)) {\n          context.transform(mo[0], mo[1], mo[2], mo[3], mo[4], mo[5]);\n        }\n      };\n\n      _proto.isDestroyed = function isDestroyed() {\n        return this.get('destroyed');\n      };\n\n      return Element;\n    }();\n\n    var Shape$2 = /*#__PURE__*/function (_Element) {\n      _inheritsLoose(Shape, _Element);\n\n      function Shape() {\n        return _Element.apply(this, arguments) || this;\n      }\n\n      var _proto = Shape.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        this._attrs = {\n          zIndex: 0,\n          visible: true,\n          destroyed: false,\n          isShape: true,\n          attrs: {}\n        };\n      };\n\n      _proto.getType = function getType() {\n        return this._attrs.type;\n      };\n\n      _proto.drawInner = function drawInner(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        self.createPath(context);\n        var originOpacity = context.globalAlpha;\n\n        if (self.hasFill()) {\n          var fillOpacity = attrs.fillOpacity;\n\n          if (!isNil(fillOpacity) && fillOpacity !== 1) {\n            context.globalAlpha = fillOpacity;\n            context.fill();\n            context.globalAlpha = originOpacity;\n          } else {\n            context.fill();\n          }\n        }\n\n        if (self.hasStroke()) {\n          var lineWidth = attrs.lineWidth;\n\n          if (lineWidth > 0) {\n            var strokeOpacity = attrs.strokeOpacity;\n\n            if (!isNil(strokeOpacity) && strokeOpacity !== 1) {\n              context.globalAlpha = strokeOpacity;\n            }\n\n            context.stroke();\n          }\n        }\n      };\n\n      _proto.getBBox = function getBBox() {\n        var bbox = this._attrs.bbox;\n\n        if (!bbox) {\n          bbox = this.calculateBox();\n\n          if (bbox) {\n            bbox.x = bbox.minX;\n            bbox.y = bbox.minY;\n            bbox.width = bbox.maxX - bbox.minX;\n            bbox.height = bbox.maxY - bbox.minY;\n          }\n\n          this._attrs.bbox = bbox;\n        }\n\n        return bbox;\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        return null;\n      };\n\n      _proto.createPath = function createPath() {};\n\n      return Shape;\n    }(Element);\n\n    var SHAPE_MAP = {};\n    var INDEX = '_INDEX';\n\n    function getComparer(compare) {\n      return function (left, right) {\n        var result = compare(left, right);\n        return result === 0 ? left[INDEX] - right[INDEX] : result;\n      };\n    }\n\n    var Container = {\n      getGroupClass: function getGroupClass() {},\n      getChildren: function getChildren() {\n        return this.get('children');\n      },\n      addShape: function addShape(type, cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var canvas = this.get('canvas');\n        var shapeType = SHAPE_MAP[type];\n\n        if (!shapeType) {\n          shapeType = upperFirst(type);\n          SHAPE_MAP[type] = shapeType;\n        }\n\n        cfg.canvas = canvas;\n\n        if (shapeType === 'Text' && canvas && canvas.get('fontFamily')) {\n          cfg.attrs.fontFamily = cfg.attrs.fontFamily || canvas.get('fontFamily');\n        }\n\n        var shape = new Shape$2[shapeType](cfg);\n        this.add(shape);\n        return shape;\n      },\n      addGroup: function addGroup(cfg) {\n        var canvas = this.get('canvas');\n        var groupClass = this.getGroupClass();\n        cfg = mix({}, cfg);\n        cfg.canvas = canvas;\n        cfg.parent = this;\n        var rst = new groupClass(cfg);\n        this.add(rst);\n        return rst;\n      },\n      contain: function contain(item) {\n        var children = this.get('children');\n        return children.indexOf(item) > -1;\n      },\n      sort: function sort() {\n        var children = this.get('children');\n\n        for (var i = 0, len = children.length; i < len; i++) {\n          var child = children[i];\n          child[INDEX] = i;\n        }\n\n        children.sort(getComparer(function (obj1, obj2) {\n          return obj1.get('zIndex') - obj2.get('zIndex');\n        }));\n        return this;\n      },\n      drawInner: function drawInner(context) {\n        var children = this.get('children');\n\n        for (var i = 0, len = children.length; i < len; i++) {\n          var child = children[i];\n          child.draw(context);\n        }\n\n        return this;\n      },\n      clear: function clear() {\n        var children = this.get('children');\n\n        while (children.length !== 0) {\n          children[children.length - 1].remove(true);\n        }\n\n        return this;\n      },\n      add: function add(items) {\n        var self = this;\n        var children = self.get('children');\n\n        if (!isArray(items)) {\n          items = [items];\n        }\n\n        for (var i = 0, len = items.length; i < len; i++) {\n          var item = items[i];\n          var parent = item.get('parent');\n\n          if (parent) {\n            var descendants = parent.get('children');\n            remove(descendants, item);\n          }\n\n          self._setEvn(item);\n\n          children.push(item);\n        }\n\n        return self;\n      },\n      _setEvn: function _setEvn(item) {\n        var self = this;\n        item._attrs.parent = self;\n        item._attrs.context = self._attrs.context;\n        item._attrs.canvas = self._attrs.canvas;\n        var clip = item._attrs.attrs.clip;\n\n        if (clip) {\n          clip.set('parent', self);\n          clip.set('context', self.get('context'));\n        }\n\n        if (item._attrs.isGroup) {\n          var children = item._attrs.children;\n\n          for (var i = 0, len = children.length; i < len; i++) {\n            item._setEvn(children[i]);\n          }\n        }\n      }\n    };\n\n    var Group = /*#__PURE__*/function (_Element) {\n      _inheritsLoose(Group, _Element);\n\n      function Group() {\n        return _Element.apply(this, arguments) || this;\n      }\n\n      var _proto = Group.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        this._attrs = {\n          zIndex: 0,\n          visible: true,\n          destroyed: false,\n          isGroup: true,\n          children: []\n        };\n      };\n\n      _proto.getBBox = function getBBox() {\n        var self = this;\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        var children = self.get('children');\n\n        for (var i = 0, length = children.length; i < length; i++) {\n          var child = children[i];\n\n          if (child.get('visible')) {\n            var box = child.getBBox();\n\n            if (!box) {\n              continue;\n            }\n\n            var leftTop = [box.minX, box.minY];\n            var leftBottom = [box.minX, box.maxY];\n            var rightTop = [box.maxX, box.minY];\n            var rightBottom = [box.maxX, box.maxY];\n            var matrix = child.attr('matrix');\n            Vector2.transformMat2d(leftTop, leftTop, matrix);\n            Vector2.transformMat2d(leftBottom, leftBottom, matrix);\n            Vector2.transformMat2d(rightTop, rightTop, matrix);\n            Vector2.transformMat2d(rightBottom, rightBottom, matrix);\n            minX = Math.min(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0], minX);\n            maxX = Math.max(leftTop[0], leftBottom[0], rightTop[0], rightBottom[0], maxX);\n            minY = Math.min(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1], minY);\n            maxY = Math.max(leftTop[1], leftBottom[1], rightTop[1], rightBottom[1], maxY);\n          }\n        }\n\n        return {\n          minX: minX,\n          minY: minY,\n          maxX: maxX,\n          maxY: maxY,\n          x: minX,\n          y: minY,\n          width: maxX - minX,\n          height: maxY - minY\n        };\n      };\n\n      _proto.destroy = function destroy() {\n        if (this.get('destroyed')) {\n          return;\n        }\n\n        this.clear();\n\n        _Element.prototype.destroy.call(this);\n      };\n\n      return Group;\n    }(Element);\n\n    mix(Group.prototype, Container, {\n      getGroupClass: function getGroupClass() {\n        return Group;\n      }\n    });\n\n    var requestAnimationFrame = typeof window === 'object' && window.requestAnimationFrame ? window.requestAnimationFrame : function (fn) {\n      return setTimeout(fn, 16);\n    };\n\n    var Canvas = /*#__PURE__*/function (_EventEmit) {\n      _inheritsLoose(Canvas, _EventEmit);\n\n      var _proto = Canvas.prototype;\n\n      _proto.get = function get(name) {\n        return this._attrs[name];\n      };\n\n      _proto.set = function set(name, value) {\n        this._attrs[name] = value;\n      };\n\n      function Canvas(cfg) {\n        var _this;\n\n        _this = _EventEmit.call(this) || this;\n        _this._attrs = mix({\n          type: 'canvas',\n          children: []\n        }, cfg);\n\n        _this._initPixelRatio();\n\n        _this._initCanvas();\n\n        return _this;\n      }\n\n      _proto._initPixelRatio = function _initPixelRatio() {\n        var pixelRatio = this.get('pixelRatio');\n\n        if (!pixelRatio) {\n          this.set('pixelRatio', getPixelRatio());\n        }\n      };\n\n      _proto.beforeDraw = function beforeDraw() {\n        var context = this._attrs.context;\n        var el = this._attrs.el;\n        context && context.clearRect && context.clearRect(0, 0, el.width, el.height);\n      };\n\n      _proto._initCanvas = function _initCanvas() {\n        var self = this;\n        var el = self.get('el');\n        var context = self.get('context');\n\n        if (!el && !context) {\n          throw new Error('Please specify the id, el or context of the chart!');\n        }\n\n        var canvas;\n\n        if (el) {\n          // DOMElement or String\n          canvas = isString(el) ? getDomById(el) : el;\n        } else {\n          // 说明没有指定el\n          canvas = CanvasElement$1.create(context);\n        }\n\n        if (context && canvas && !canvas.getContext) {\n          canvas.getContext = function () {\n            return context;\n          };\n        }\n\n        var width = self.get('width');\n\n        if (!width) {\n          width = getWidth(canvas);\n        }\n\n        var height = self.get('height');\n\n        if (!height) {\n          height = getHeight(canvas);\n        }\n\n        self.set('canvas', this);\n        self.set('el', canvas);\n        self.set('context', context || canvas.getContext('2d'));\n        self.changeSize(width, height); // 初始化事件控制器\n\n        var eventController = new EventController({\n          canvas: this,\n          el: canvas\n        });\n        self.set('eventController', eventController);\n      };\n\n      _proto.changeSize = function changeSize(width, height) {\n        var pixelRatio = this.get('pixelRatio');\n        var canvasDOM = this.get('el'); // HTMLCanvasElement or canvasElement\n        // 浏览器环境设置style样式\n\n        if (canvasDOM.style) {\n          canvasDOM.style.width = width + 'px';\n          canvasDOM.style.height = height + 'px';\n        }\n\n        if (isCanvasElement(canvasDOM)) {\n          canvasDOM.width = width * pixelRatio;\n          canvasDOM.height = height * pixelRatio;\n\n          if (pixelRatio !== 1) {\n            var ctx = this.get('context');\n            ctx.scale(pixelRatio, pixelRatio);\n          }\n        }\n\n        this.set('width', width);\n        this.set('height', height);\n      };\n\n      _proto.getWidth = function getWidth() {\n        var pixelRatio = this.get('pixelRatio');\n        var width = this.get('width');\n        return width * pixelRatio;\n      };\n\n      _proto.getHeight = function getHeight() {\n        var pixelRatio = this.get('pixelRatio');\n        var height = this.get('height');\n        return height * pixelRatio;\n      };\n\n      _proto.getPointByClient = function getPointByClient(clientX, clientY) {\n        var el = this.get('el');\n        var bbox = el.getBoundingClientRect();\n        var width = bbox.right - bbox.left;\n        var height = bbox.bottom - bbox.top;\n        return {\n          x: (clientX - bbox.left) * (el.width / width),\n          y: (clientY - bbox.top) * (el.height / height)\n        };\n      };\n\n      _proto._beginDraw = function _beginDraw() {\n        this._attrs.toDraw = true;\n      };\n\n      _proto._endDraw = function _endDraw() {\n        this._attrs.toDraw = false;\n      };\n\n      _proto.draw = function draw() {\n        var self = this;\n\n        function drawInner() {\n          self.set('animateHandler', requestAnimationFrame(function () {\n            self.set('animateHandler', undefined);\n\n            if (self.get('toDraw')) {\n              drawInner();\n            }\n          }));\n          self.beforeDraw();\n\n          try {\n            var context = self._attrs.context;\n            self.drawInner(context); // 支付宝，微信小程序，需要调context.draw才能完成绘制， 所以这里直接判断是否有.draw方法\n\n            if (context.draw) {\n              context.draw();\n            }\n          } catch (ev) {\n            console.warn('error in draw canvas, detail as:');\n            console.warn(ev);\n\n            self._endDraw();\n          }\n\n          self._endDraw();\n        }\n\n        if (self.get('destroyed')) {\n          return;\n        }\n\n        if (self.get('animateHandler')) {\n          this._beginDraw();\n        } else {\n          drawInner();\n        }\n      };\n\n      _proto.destroy = function destroy() {\n        if (this.get('destroyed')) {\n          return;\n        } // 需要清理 canvas 画布内容，否则会导致 spa 应用 ios 下 canvas 白屏\n        // https://stackoverflow.com/questions/52532614/total-canvas-memory-use-exceeds-the-maximum-limit-safari-12\n        // https://github.com/antvis/F2/issues/630\n\n\n        var el = this.get('el');\n        el.width = 0;\n        el.height = 0;\n        this.clear();\n        this._attrs = {};\n        this.set('destroyed', true);\n      };\n\n      _proto.isDestroyed = function isDestroyed() {\n        return this.get('destroyed');\n      };\n\n      return Canvas;\n    }(EventEmit);\n\n    mix(Canvas.prototype, Container, {\n      getGroupClass: function getGroupClass() {\n        return Group;\n      }\n    });\n\n    function parseRadius(radius, width, height) {\n      radius = parsePadding(radius); // 都为0\n\n      if (!radius[0] && !radius[1] && !radius[2] && !radius[3]) {\n        return radius;\n      }\n\n      var minWidth = Math.max(radius[0] + radius[1], radius[2] + radius[3]);\n      var minHeight = Math.max(radius[0] + radius[3], radius[1] + radius[2]);\n      var scale = Math.min(width / minWidth, height / minHeight);\n\n      if (scale < 1) {\n        return radius.map(function (r) {\n          return r * scale;\n        });\n      }\n\n      return radius;\n    }\n\n    var Rect = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Rect, _Shape);\n\n      function Rect() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Rect.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'rect';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n          radius: 0,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height,\n            radius = attrs.radius;\n        context.beginPath();\n\n        if (!radius || !(width * height)) {\n          context.rect(x, y, width, height);\n        } else {\n          radius = parseRadius(radius, width, height);\n          context.moveTo(x + radius[0], y);\n          context.lineTo(x + width - radius[1], y);\n          context.arc(x + width - radius[1], y + radius[1], radius[1], -Math.PI / 2, 0, false);\n          context.lineTo(x + width, y + height - radius[2]);\n          context.arc(x + width - radius[2], y + height - radius[2], radius[2], 0, Math.PI / 2, false);\n          context.lineTo(x + radius[3], y + height);\n          context.arc(x + radius[3], y + height - radius[3], radius[3], Math.PI / 2, Math.PI, false);\n          context.lineTo(x, y + radius[0]);\n          context.arc(x + radius[0], y + radius[0], radius[0], Math.PI, Math.PI * 3 / 2, false);\n          context.closePath();\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height;\n        return {\n          minX: x,\n          minY: y,\n          maxX: x + width,\n          maxY: y + height\n        };\n      };\n\n      return Rect;\n    }(Shape$2);\n\n    Shape$2.Rect = Rect;\n\n    var ImageShape = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(ImageShape, _Shape);\n\n      function ImageShape() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = ImageShape.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = false;\n        this._attrs.canStroke = false;\n        this._attrs.loading = false;\n        this._attrs.image = null;\n        this._attrs.type = 'image';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var _this = this;\n\n        var attrs = this.get('attrs');\n        var src = attrs.src;\n\n        if (this.get('loading')) {\n          return;\n        }\n\n        var image = this.get('image');\n\n        if (image) {\n          this.drawImage(context, image);\n        } else {\n          if (src && Image) {\n            this.set('loading', true);\n\n            var _image = new Image();\n\n            _image.src = src; // 设置跨域\n\n            _image.crossOrigin = 'Anonymous';\n\n            _image.onload = function () {\n              _this.set('loading', false);\n\n              _this.set('image', _image);\n\n              _this.drawImage(context, _image);\n            };\n          }\n        }\n      };\n\n      _proto.drawImage = function drawImage(context, image) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height,\n            sx = attrs.sx,\n            sy = attrs.sy,\n            swidth = attrs.swidth,\n            sheight = attrs.sheight;\n\n        if (!isNil(sx) && !isNil(sy) && !isNil(swidth) && !isNil(sheight)) {\n          context.drawImage(image, sx, sy, swidth, sheight, x, y, width, height);\n        } else {\n          context.drawImage(image, x, y, width, height);\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            width = attrs.width,\n            height = attrs.height; // 和rect一样\n\n        return {\n          minX: x,\n          minY: y,\n          maxX: x + width,\n          maxY: y + height\n        };\n      };\n\n      return ImageShape;\n    }(Shape$2);\n\n    Shape$2.Image = ImageShape;\n\n    var Circle = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Circle, _Shape);\n\n      function Circle() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Circle.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'circle';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          r: 0,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r;\n        context.beginPath();\n        context.arc(x, y, r, 0, Math.PI * 2, false);\n        context.closePath();\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r;\n        return {\n          minX: x - r,\n          maxX: x + r,\n          minY: y - r,\n          maxY: y + r\n        };\n      };\n\n      return Circle;\n    }(Shape$2);\n\n    Shape$2.Circle = Circle;\n\n    var start = Vector2.create();\n    var end = Vector2.create();\n    var extremity = Vector2.create();\n\n    function getCubicBezierXYatT(startPt, controlPt1, controlPt2, endPt, T) {\n      var x = CubicN(T, startPt.x, controlPt1.x, controlPt2.x, endPt.x);\n      var y = CubicN(T, startPt.y, controlPt1.y, controlPt2.y, endPt.y);\n      return {\n        x: x,\n        y: y\n      };\n    } // cubic helper formula at T distance\n\n\n    function CubicN(T, a, b, c, d) {\n      var t2 = T * T;\n      var t3 = t2 * T;\n      return a + (-a * 3 + T * (3 * a - a * T)) * T + (3 * b + T * (-6 * b + b * 3 * T)) * T + (c * 3 - c * 3 * T) * t2 + d * t3;\n    }\n\n    function cubicBezierBounds(c) {\n      var minX = Infinity;\n      var maxX = -Infinity;\n      var minY = Infinity;\n      var maxY = -Infinity;\n      var s = {\n        x: c[0],\n        y: c[1]\n      };\n      var c1 = {\n        x: c[2],\n        y: c[3]\n      };\n      var c2 = {\n        x: c[4],\n        y: c[5]\n      };\n      var e = {\n        x: c[6],\n        y: c[7]\n      };\n\n      for (var t = 0; t < 100; t++) {\n        var pt = getCubicBezierXYatT(s, c1, c2, e, t / 100);\n\n        if (pt.x < minX) {\n          minX = pt.x;\n        }\n\n        if (pt.x > maxX) {\n          maxX = pt.x;\n        }\n\n        if (pt.y < minY) {\n          minY = pt.y;\n        }\n\n        if (pt.y > maxY) {\n          maxY = pt.y;\n        }\n      }\n\n      return {\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY\n      };\n    }\n\n    function getBBoxFromPoints(points, lineWidth) {\n      if (points.length === 0) {\n        return;\n      }\n\n      var p = points[0];\n      var left = p.x;\n      var right = p.x;\n      var top = p.y;\n      var bottom = p.y;\n      var len = points.length;\n\n      for (var i = 1; i < len; i++) {\n        p = points[i];\n        left = Math.min(left, p.x);\n        right = Math.max(right, p.x);\n        top = Math.min(top, p.y);\n        bottom = Math.max(bottom, p.y);\n      }\n\n      lineWidth = lineWidth / 2 || 0;\n      return {\n        minX: left - lineWidth,\n        minY: top - lineWidth,\n        maxX: right + lineWidth,\n        maxY: bottom + lineWidth\n      };\n    }\n\n    function getBBoxFromLine(x0, y0, x1, y1, lineWidth) {\n      lineWidth = lineWidth / 2 || 0;\n      return {\n        minX: Math.min(x0, x1) - lineWidth,\n        minY: Math.min(y0, y1) - lineWidth,\n        maxX: Math.max(x0, x1) + lineWidth,\n        maxY: Math.max(y0, y1) + lineWidth\n      };\n    }\n\n    function getBBoxFromArc(x, y, r, startAngle, endAngle, anticlockwise) {\n      var diff = Math.abs(startAngle - endAngle);\n\n      if (diff % (Math.PI * 2) < 1e-4 && diff > 1e-4) {\n        // Is a circle\n        return {\n          minX: x - r,\n          minY: y - r,\n          maxX: x + r,\n          maxY: y + r\n        };\n      }\n\n      start[0] = Math.cos(startAngle) * r + x;\n      start[1] = Math.sin(startAngle) * r + y;\n      end[0] = Math.cos(endAngle) * r + x;\n      end[1] = Math.sin(endAngle) * r + y;\n      var min = [0, 0];\n      var max = [0, 0];\n      Vector2.min(min, start, end);\n      Vector2.max(max, start, end); // Thresh to [0, Math.PI * 2]\n\n      startAngle = startAngle % (Math.PI * 2);\n\n      if (startAngle < 0) {\n        startAngle = startAngle + Math.PI * 2;\n      }\n\n      endAngle = endAngle % (Math.PI * 2);\n\n      if (endAngle < 0) {\n        endAngle = endAngle + Math.PI * 2;\n      }\n\n      if (startAngle > endAngle && !anticlockwise) {\n        endAngle += Math.PI * 2;\n      } else if (startAngle < endAngle && anticlockwise) {\n        startAngle += Math.PI * 2;\n      }\n\n      if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n      }\n\n      for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n          extremity[0] = Math.cos(angle) * r + x;\n          extremity[1] = Math.sin(angle) * r + y;\n          Vector2.min(min, extremity, min);\n          Vector2.max(max, extremity, max);\n        }\n      }\n\n      return {\n        minX: min[0],\n        minY: min[1],\n        maxX: max[0],\n        maxY: max[1]\n      };\n    }\n\n    function getBBoxFromBezierGroup(points, lineWidth) {\n      var minX = Infinity;\n      var maxX = -Infinity;\n      var minY = Infinity;\n      var maxY = -Infinity;\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var bbox = cubicBezierBounds(points[i]);\n\n        if (bbox.minX < minX) {\n          minX = bbox.minX;\n        }\n\n        if (bbox.maxX > maxX) {\n          maxX = bbox.maxX;\n        }\n\n        if (bbox.minY < minY) {\n          minY = bbox.minY;\n        }\n\n        if (bbox.maxY > maxY) {\n          maxY = bbox.maxY;\n        }\n      }\n\n      lineWidth = lineWidth / 2 || 0;\n      return {\n        minX: minX - lineWidth,\n        minY: minY - lineWidth,\n        maxX: maxX + lineWidth,\n        maxY: maxY + lineWidth\n      };\n    }\n\n    var Line$1 = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Line, _Shape);\n\n      function Line() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canStroke = true;\n        this._attrs.type = 'line';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x1: 0,\n          y1: 0,\n          x2: 0,\n          y2: 0,\n          lineWidth: 1\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x1 = attrs.x1,\n            y1 = attrs.y1,\n            x2 = attrs.x2,\n            y2 = attrs.y2;\n        context.beginPath();\n        context.moveTo(x1, y1);\n        context.lineTo(x2, y2);\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x1 = attrs.x1,\n            y1 = attrs.y1,\n            x2 = attrs.x2,\n            y2 = attrs.y2,\n            lineWidth = attrs.lineWidth;\n        return getBBoxFromLine(x1, y1, x2, y2, lineWidth);\n      };\n\n      return Line;\n    }(Shape$2);\n\n    Shape$2.Line = Line$1;\n\n    var Polygon = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Polygon, _Shape);\n\n      function Polygon() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Polygon.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'polygon';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          points: null,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var points = attrs.points;\n        context.beginPath();\n\n        for (var i = 0, len = points.length; i < len; i++) {\n          var point = points[i];\n\n          if (i === 0) {\n            context.moveTo(point.x, point.y);\n          } else {\n            context.lineTo(point.x, point.y);\n          }\n        }\n\n        context.closePath();\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var points = attrs.points;\n        return getBBoxFromPoints(points);\n      };\n\n      return Polygon;\n    }(Shape$2);\n\n    Shape$2.Polygon = Polygon;\n\n    /**\n     * @fileOverview convert the line to curve\n     * @author dxq613@gmail.com\n     */\n\n    function getPoint(v) {\n      return [v.x, v.y];\n    }\n\n    function smoothBezier(points, smooth, isLoop, constraint) {\n      var cps = [];\n      var prevPoint;\n      var nextPoint;\n      var hasConstraint = !!constraint;\n      var min;\n      var max;\n      var point;\n      var len;\n      var l;\n      var i;\n\n      if (hasConstraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n\n        for (i = 0, l = points.length; i < l; i++) {\n          point = getPoint(points[i]);\n          Vector2.min(min, min, point);\n          Vector2.max(max, max, point);\n        }\n\n        Vector2.min(min, min, constraint[0]);\n        Vector2.max(max, max, constraint[1]);\n      }\n\n      for (i = 0, len = points.length; i < len; i++) {\n        point = getPoint(points[i]);\n\n        if (isLoop) {\n          prevPoint = getPoint(points[i ? i - 1 : len - 1]);\n          nextPoint = getPoint(points[(i + 1) % len]);\n        } else {\n          if (i === 0 || i === len - 1) {\n            cps.push([point[0], point[1]]);\n            continue;\n          } else {\n            prevPoint = getPoint(points[i - 1]);\n            nextPoint = getPoint(points[i + 1]);\n          }\n        }\n\n        var v = Vector2.sub([], nextPoint, prevPoint);\n        Vector2.scale(v, v, smooth);\n        var d0 = Vector2.distance(point, prevPoint);\n        var d1 = Vector2.distance(point, nextPoint);\n        var sum = d0 + d1;\n\n        if (sum !== 0) {\n          d0 /= sum;\n          d1 /= sum;\n        }\n\n        var v1 = Vector2.scale([], v, -d0);\n        var v2 = Vector2.scale([], v, d1);\n        var cp0 = Vector2.add([], point, v1);\n        var cp1 = Vector2.add([], point, v2);\n\n        if (hasConstraint) {\n          Vector2.max(cp0, cp0, min);\n          Vector2.min(cp0, cp0, max);\n          Vector2.max(cp1, cp1, min);\n          Vector2.min(cp1, cp1, max);\n        }\n\n        cps.push([cp0[0], cp0[1]]);\n        cps.push([cp1[0], cp1[1]]);\n      }\n\n      if (isLoop) {\n        cps.push(cps.shift());\n      }\n\n      return cps;\n    }\n\n    function catmullRom2bezier(pointList, z, constraint) {\n      var isLoop = !!z;\n      var controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n      var len = pointList.length;\n      var d1 = [];\n      var cp1;\n      var cp2;\n      var p;\n\n      for (var i = 0; i < len - 1; i++) {\n        cp1 = controlPointList[i * 2];\n        cp2 = controlPointList[i * 2 + 1];\n        p = pointList[i + 1];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p.x, p.y]);\n      }\n\n      if (isLoop) {\n        cp1 = controlPointList[len];\n        cp2 = controlPointList[len + 1];\n        p = pointList[0];\n        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p.x, p.y]);\n      }\n\n      return d1;\n    }\n\n    function _filterPoints(points) {\n      var filteredPoints = [];\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n\n        if (!isNaN(point.x) && !isNaN(point.y)) {\n          filteredPoints.push(point);\n        }\n      }\n\n      return filteredPoints;\n    }\n\n    var Polyline = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Polyline, _Shape);\n\n      function Polyline() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Polyline.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'polyline';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          points: null,\n          lineWidth: 1,\n          smooth: false\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var self = this;\n        var attrs = self.get('attrs');\n        var points = attrs.points,\n            smooth = attrs.smooth;\n\n        var filteredPoints = _filterPoints(points);\n\n        context.beginPath();\n\n        if (filteredPoints.length) {\n          context.moveTo(filteredPoints[0].x, filteredPoints[0].y);\n\n          if (smooth) {\n            var constaint = [[0, 0], [1, 1]];\n            var sps = catmullRom2bezier(filteredPoints, false, constaint);\n\n            for (var i = 0, n = sps.length; i < n; i++) {\n              var sp = sps[i];\n              context.bezierCurveTo(sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]);\n            }\n          } else {\n            var _i;\n\n            var l;\n\n            for (_i = 1, l = filteredPoints.length - 1; _i < l; _i++) {\n              context.lineTo(filteredPoints[_i].x, filteredPoints[_i].y);\n            }\n\n            context.lineTo(filteredPoints[l].x, filteredPoints[l].y);\n          }\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var points = attrs.points,\n            smooth = attrs.smooth,\n            lineWidth = attrs.lineWidth;\n\n        var filteredPoints = _filterPoints(points);\n\n        if (smooth) {\n          var newPoints = [];\n          var constaint = [[0, 0], [1, 1]];\n          var sps = catmullRom2bezier(filteredPoints, false, constaint);\n\n          for (var i = 0, n = sps.length; i < n; i++) {\n            var sp = sps[i];\n\n            if (i === 0) {\n              newPoints.push([filteredPoints[0].x, filteredPoints[0].y, sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]]);\n            } else {\n              var lastPoint = sps[i - 1];\n              newPoints.push([lastPoint[5], lastPoint[6], sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]]);\n            }\n          }\n\n          return getBBoxFromBezierGroup(newPoints, lineWidth);\n        }\n\n        return getBBoxFromPoints(filteredPoints, lineWidth);\n      };\n\n      return Polyline;\n    }(Shape$2);\n\n    Shape$2.Polyline = Polyline;\n\n    var Arc = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Arc, _Shape);\n\n      function Arc() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Arc.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canStroke = true;\n        this._attrs.canFill = true;\n        this._attrs.type = 'arc';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          r: 0,\n          startAngle: 0,\n          endAngle: Math.PI * 2,\n          anticlockwise: false,\n          lineWidth: 1\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            anticlockwise = attrs.anticlockwise;\n        context.beginPath();\n\n        if (startAngle !== endAngle) {\n          context.arc(x, y, r, startAngle, endAngle, anticlockwise);\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            anticlockwise = attrs.anticlockwise;\n        return getBBoxFromArc(x, y, r, startAngle, endAngle, anticlockwise);\n      };\n\n      return Arc;\n    }(Shape$2);\n\n    Shape$2.Arc = Arc;\n\n    var Sector = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Sector, _Shape);\n\n      function Sector() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Sector.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'sector';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          lineWidth: 0,\n          r: 0,\n          r0: 0,\n          startAngle: 0,\n          endAngle: Math.PI * 2,\n          anticlockwise: false\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            r = attrs.r,\n            r0 = attrs.r0,\n            anticlockwise = attrs.anticlockwise;\n        context.beginPath();\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        context.moveTo(unitX * r0 + x, unitY * r0 + y);\n        context.lineTo(unitX * r + x, unitY * r + y); // 当扇形的角度非常小的时候，就不进行弧线的绘制；或者整个只有1个扇形时，会出现end<0的情况不绘制\n\n        if (Math.abs(endAngle - startAngle) > 0.0001 || startAngle === 0 && endAngle < 0) {\n          context.arc(x, y, r, startAngle, endAngle, anticlockwise);\n          context.lineTo(Math.cos(endAngle) * r0 + x, Math.sin(endAngle) * r0 + y);\n\n          if (r0 !== 0) {\n            context.arc(x, y, r0, endAngle, startAngle, !anticlockwise);\n          }\n        }\n\n        context.closePath();\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            r = attrs.r,\n            r0 = attrs.r0,\n            startAngle = attrs.startAngle,\n            endAngle = attrs.endAngle,\n            anticlockwise = attrs.anticlockwise;\n        var outerBBox = getBBoxFromArc(x, y, r, startAngle, endAngle, anticlockwise);\n        var innerBBox = getBBoxFromArc(x, y, r0, startAngle, endAngle, anticlockwise);\n        return {\n          minX: Math.min(outerBBox.minX, innerBBox.minX),\n          minY: Math.min(outerBBox.minY, innerBBox.minY),\n          maxX: Math.max(outerBBox.maxX, innerBBox.maxX),\n          maxY: Math.max(outerBBox.maxY, innerBBox.maxY)\n        };\n      };\n\n      return Sector;\n    }(Shape$2);\n\n    Shape$2.Sector = Sector;\n\n    var Rect$1 = {\n      calcRotatedBox: function calcRotatedBox(_ref) {\n        var width = _ref.width,\n            height = _ref.height,\n            rotate = _ref.rotate;\n        var absRotate = Math.abs(rotate);\n        return {\n          width: Math.abs(width * Math.cos(absRotate) + height * Math.sin(absRotate)),\n          height: Math.abs(height * Math.cos(absRotate) + width * Math.sin(absRotate))\n        };\n      }\n    };\n\n    var textWidthCacheCounter = 0;\n    var textWidthCache = {};\n    var TEXT_CACHE_MAX = 5000;\n\n    var Text = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Text, _Shape);\n\n      function Text() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Text.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'text';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          lineWidth: 0,\n          lineCount: 1,\n          fontSize: 12,\n          fontFamily: 'sans-serif',\n          fontStyle: 'normal',\n          fontWeight: 'normal',\n          fontVariant: 'normal',\n          textAlign: 'start',\n          textBaseline: 'bottom',\n          lineHeight: null,\n          textArr: null\n        };\n      };\n\n      _proto._getFontStyle = function _getFontStyle() {\n        var attrs = this._attrs.attrs;\n        var fontSize = attrs.fontSize,\n            fontFamily = attrs.fontFamily,\n            fontWeight = attrs.fontWeight,\n            fontStyle = attrs.fontStyle,\n            fontVariant = attrs.fontVariant;\n        return fontStyle + \" \" + fontVariant + \" \" + fontWeight + \" \" + fontSize + \"px \" + fontFamily;\n      };\n\n      _proto._afterAttrsSet = function _afterAttrsSet() {\n        var attrs = this._attrs.attrs;\n        attrs.font = this._getFontStyle();\n\n        if (attrs.text) {\n          var text = attrs.text;\n          var textArr = null;\n          var lineCount = 1;\n\n          if (isString(text) && text.indexOf('\\n') !== -1) {\n            textArr = text.split('\\n');\n            lineCount = textArr.length;\n          }\n\n          attrs.lineCount = lineCount;\n          attrs.textArr = textArr;\n        }\n\n        this.set('attrs', attrs);\n      };\n\n      _proto._getTextHeight = function _getTextHeight() {\n        var attrs = this._attrs.attrs;\n\n        if (attrs.height) {\n          return attrs.height;\n        }\n\n        var lineCount = attrs.lineCount;\n        var fontSize = attrs.fontSize * 1;\n\n        if (lineCount > 1) {\n          var spaceingY = this._getSpaceingY();\n\n          return fontSize * lineCount + spaceingY * (lineCount - 1);\n        }\n\n        return fontSize;\n      };\n\n      _proto._getSpaceingY = function _getSpaceingY() {\n        var attrs = this._attrs.attrs;\n        var lineHeight = attrs.lineHeight;\n        var fontSize = attrs.fontSize * 1;\n        return lineHeight ? lineHeight - fontSize : fontSize * 0.14;\n      };\n\n      _proto.drawInner = function drawInner(context) {\n        var self = this;\n        var attrs = self._attrs.attrs;\n        var text = attrs.text;\n        var x = attrs.x;\n        var y = attrs.y;\n\n        if (isNil(text) || isNaN(x) || isNaN(y)) {\n          // text will be 0\n          return;\n        }\n\n        var textArr = attrs.textArr;\n        var fontSize = attrs.fontSize * 1;\n\n        var spaceingY = self._getSpaceingY();\n\n        if (attrs.rotate) {\n          // do rotation\n          context.translate(x, y);\n          context.rotate(attrs.rotate);\n          x = 0;\n          y = 0;\n        }\n\n        var textBaseline = attrs.textBaseline;\n        var height;\n\n        if (textArr) {\n          height = self._getTextHeight();\n        }\n\n        var subY; // context.beginPath();\n\n        if (self.hasFill()) {\n          var fillOpacity = attrs.fillOpacity;\n\n          if (!isNil(fillOpacity) && fillOpacity !== 1) {\n            context.globalAlpha = fillOpacity;\n          }\n\n          if (textArr) {\n            for (var i = 0, len = textArr.length; i < len; i++) {\n              var subText = textArr[i];\n              subY = y + i * (spaceingY + fontSize) - height + fontSize; // bottom;\n\n              if (textBaseline === 'middle') {\n                subY += height - fontSize - (height - fontSize) / 2;\n              }\n\n              if (textBaseline === 'top') {\n                subY += height - fontSize;\n              }\n\n              context.fillText(subText, x, subY);\n            }\n          } else {\n            context.fillText(text, x, y);\n          }\n        }\n\n        if (self.hasStroke()) {\n          if (textArr) {\n            for (var _i = 0, _len = textArr.length; _i < _len; _i++) {\n              var _subText = textArr[_i];\n              subY = y + _i * (spaceingY + fontSize) - height + fontSize; // bottom;\n\n              if (textBaseline === 'middle') {\n                subY += height - fontSize - (height - fontSize) / 2;\n              }\n\n              if (textBaseline === 'top') {\n                subY += height - fontSize;\n              }\n\n              context.strokeText(_subText, x, subY);\n            }\n          } else {\n            context.strokeText(text, x, y);\n          }\n        }\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var self = this;\n        var attrs = self._attrs.attrs;\n        var x = attrs.x,\n            y = attrs.y,\n            textAlign = attrs.textAlign,\n            textBaseline = attrs.textBaseline;\n\n        var width = self._getTextWidth(); // attrs.width\n\n\n        if (!width) {\n          return {\n            minX: x,\n            minY: y,\n            maxX: x,\n            maxY: y\n          };\n        }\n\n        var height = self._getTextHeight(); // attrs.height\n\n\n        if (attrs.rotate) {\n          var rotatedBox = Rect$1.calcRotatedBox({\n            width: width,\n            height: height,\n            rotate: attrs.rotate\n          });\n          width = rotatedBox.width;\n          height = rotatedBox.height;\n        }\n\n        var point = {\n          x: x,\n          y: y - height\n        }; // default textAlign: start, textBaseline: bottom\n\n        if (textAlign) {\n          if (textAlign === 'end' || textAlign === 'right') {\n            point.x -= width;\n          } else if (textAlign === 'center') {\n            point.x -= width / 2;\n          }\n        }\n\n        if (textBaseline) {\n          if (textBaseline === 'top') {\n            point.y += height;\n          } else if (textBaseline === 'middle') {\n            point.y += height / 2;\n          }\n        }\n\n        return {\n          minX: point.x,\n          minY: point.y,\n          maxX: point.x + width,\n          maxY: point.y + height\n        };\n      };\n\n      _proto._getTextWidth = function _getTextWidth() {\n        var attrs = this._attrs.attrs;\n\n        if (attrs.width) {\n          return attrs.width;\n        }\n\n        var text = attrs.text;\n        var context = this.get('context');\n        if (isNil(text)) return undefined;\n        var font = attrs.font;\n        var textArr = attrs.textArr;\n        var key = text + '' + font;\n\n        if (textWidthCache[key]) {\n          return textWidthCache[key];\n        }\n\n        var width = 0;\n\n        if (textArr) {\n          for (var i = 0, length = textArr.length; i < length; i++) {\n            var subText = textArr[i];\n            width = Math.max(width, measureText(subText, font, context).width);\n          }\n        } else {\n          width = measureText(text, font, context).width;\n        }\n\n        if (textWidthCacheCounter > TEXT_CACHE_MAX) {\n          textWidthCacheCounter = 0;\n          textWidthCache = {};\n        }\n\n        textWidthCacheCounter++;\n        textWidthCache[key] = width;\n        return width;\n      };\n\n      return Text;\n    }(Shape$2);\n\n    Shape$2.Text = Text;\n\n    var Custom = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Custom, _Shape);\n\n      function Custom() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Custom.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.createPath = null;\n        this._attrs.type = 'custom';\n      };\n\n      _proto.createPath = function createPath(context) {\n        var createPath = this.get('createPath');\n        createPath && createPath.call(this, context);\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var calculateBox = this.get('calculateBox');\n        return calculateBox && calculateBox.call(this);\n      };\n\n      return Custom;\n    }(Shape$2);\n\n    Shape$2.Custom = Custom;\n\n    var G = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Canvas: Canvas,\n        Group: Group,\n        Shape: Shape$2,\n        Matrix: Matrix,\n        Vector2: Vector2\n    });\n\n    function formatTicks(ticks) {\n      var tmp = ticks.slice(0);\n\n      if (tmp.length > 0) {\n        var first = tmp[0];\n        var last = tmp[tmp.length - 1];\n\n        if (first.value !== 0) {\n          tmp.unshift({\n            value: 0\n          });\n        }\n\n        if (last.value !== 1) {\n          tmp.push({\n            value: 1\n          });\n        }\n      }\n\n      return tmp;\n    }\n\n    var AxisController = /*#__PURE__*/function () {\n      function AxisController(cfg) {\n        this.axisCfg = {};\n        this.frontPlot = null;\n        this.backPlot = null;\n        this.axes = {}; // store the axes's options\n\n        mix(this, cfg);\n      }\n\n      var _proto = AxisController.prototype;\n\n      _proto._isHide = function _isHide(field) {\n        var axisCfg = this.axisCfg;\n        return !axisCfg || axisCfg[field] === false;\n      };\n\n      _proto._getLinePosition = function _getLinePosition(scale, dimType, index, transposed) {\n        var position = '';\n        var field = scale.field;\n        var axisCfg = this.axisCfg;\n\n        if (axisCfg[field] && axisCfg[field].position) {\n          position = axisCfg[field].position;\n        } else if (dimType === 'x') {\n          position = transposed ? 'left' : 'bottom';\n        } else if (dimType === 'y') {\n          position = index ? 'right' : 'left';\n\n          if (transposed) {\n            position = 'bottom';\n          }\n        }\n\n        return position;\n      };\n\n      _proto._getLineCfg = function _getLineCfg(coord, dimType, position) {\n        var start;\n        var end;\n        var factor = 1; // Mark clockwise or counterclockwise\n\n        if (dimType === 'x') {\n          start = {\n            x: 0,\n            y: 0\n          };\n          end = {\n            x: 1,\n            y: 0\n          };\n        } else {\n          if (position === 'right') {\n            // there will be several y axes\n            start = {\n              x: 1,\n              y: 0\n            };\n            end = {\n              x: 1,\n              y: 1\n            };\n          } else {\n            start = {\n              x: 0,\n              y: 0\n            };\n            end = {\n              x: 0,\n              y: 1\n            };\n            factor = -1;\n          }\n        }\n\n        if (coord.transposed) {\n          factor *= -1;\n        }\n\n        return {\n          offsetFactor: factor,\n          start: coord.convertPoint(start),\n          end: coord.convertPoint(end)\n        };\n      };\n\n      _proto._getCircleCfg = function _getCircleCfg(coord) {\n        return {\n          startAngle: coord.startAngle,\n          endAngle: coord.endAngle,\n          center: coord.center,\n          radius: coord.circleRadius\n        };\n      };\n\n      _proto._getRadiusCfg = function _getRadiusCfg(coord) {\n        var transposed = coord.transposed;\n        var start;\n        var end;\n\n        if (transposed) {\n          start = {\n            x: 0,\n            y: 0\n          };\n          end = {\n            x: 1,\n            y: 0\n          };\n        } else {\n          start = {\n            x: 0,\n            y: 0\n          };\n          end = {\n            x: 0,\n            y: 1\n          };\n        }\n\n        return {\n          offsetFactor: -1,\n          start: coord.convertPoint(start),\n          end: coord.convertPoint(end)\n        };\n      };\n\n      _proto._getAxisCfg = function _getAxisCfg(coord, scale, verticalScale, dimType, defaultCfg) {\n        var self = this;\n        var axisCfg = this.axisCfg;\n        var ticks = scale.getTicks();\n        var cfg = deepMix({\n          ticks: ticks,\n          frontContainer: this.frontPlot,\n          backContainer: this.backPlot\n        }, defaultCfg, axisCfg[scale.field]);\n        var labels = [];\n        var label = cfg.label;\n        var count = ticks.length;\n        var maxWidth = 0;\n        var maxHeight = 0;\n        var labelCfg = label;\n        each(ticks, function (tick, index) {\n          if (isFunction(label)) {\n            var executedLabel = label(tick.text, index, count);\n            labelCfg = executedLabel ? mix({}, Global._defaultAxis.label, executedLabel) : null;\n          }\n\n          if (labelCfg) {\n            var textStyle = {};\n\n            if (labelCfg.textAlign) {\n              textStyle.textAlign = labelCfg.textAlign;\n            }\n\n            if (labelCfg.textBaseline) {\n              textStyle.textBaseline = labelCfg.textBaseline;\n            }\n\n            var axisLabel = new Shape$2.Text({\n              className: 'axis-label',\n              attrs: mix({\n                x: 0,\n                y: 0,\n                text: tick.text,\n                fontFamily: self.chart.get('canvas').get('fontFamily')\n              }, labelCfg),\n              value: tick.value,\n              textStyle: textStyle,\n              top: labelCfg.top,\n              context: self.chart.get('canvas').get('context')\n            });\n            labels.push(axisLabel);\n\n            var _axisLabel$getBBox = axisLabel.getBBox(),\n                width = _axisLabel$getBBox.width,\n                height = _axisLabel$getBBox.height;\n\n            maxWidth = Math.max(maxWidth, width);\n            maxHeight = Math.max(maxHeight, height);\n          }\n        });\n        cfg.labels = labels;\n        cfg.maxWidth = maxWidth;\n        cfg.maxHeight = maxHeight;\n        return cfg;\n      };\n\n      _proto._createAxis = function _createAxis(coord, scale, verticalScale, dimType, index) {\n        if (index === void 0) {\n          index = '';\n        }\n\n        var self = this;\n        var coordType = coord.type;\n        var transposed = coord.transposed;\n        var type;\n        var key;\n        var defaultCfg;\n\n        if (coordType === 'cartesian' || coordType === 'rect') {\n          var position = self._getLinePosition(scale, dimType, index, transposed);\n\n          defaultCfg = Global.axis[position];\n          defaultCfg.position = position;\n          type = 'Line';\n          key = position;\n        } else {\n          if (dimType === 'x' && !transposed || dimType === 'y' && transposed) {\n            defaultCfg = Global.axis.circle;\n            type = 'Circle';\n            key = 'circle';\n          } else {\n            defaultCfg = Global.axis.radius;\n            type = 'Line';\n            key = 'radius';\n          }\n        }\n\n        var cfg = self._getAxisCfg(coord, scale, verticalScale, dimType, defaultCfg);\n\n        cfg.type = type;\n        cfg.dimType = dimType;\n        cfg.verticalScale = verticalScale;\n        cfg.index = index;\n        this.axes[key] = cfg;\n      };\n\n      _proto.createAxis = function createAxis(coord, xScale, yScales) {\n        var self = this;\n\n        if (xScale && !self._isHide(xScale.field)) {\n          self._createAxis(coord, xScale, yScales[0], 'x');\n        }\n\n        each(yScales, function (yScale, index) {\n          if (!self._isHide(yScale.field)) {\n            self._createAxis(coord, yScale, xScale, 'y', index);\n          }\n        });\n        var axes = this.axes;\n        var chart = self.chart;\n\n        if (chart._isAutoPadding()) {\n          var userPadding = parsePadding(chart.get('padding'));\n          var appendPadding = parsePadding(chart.get('appendPadding'));\n          var legendRange = chart.get('legendRange') || {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0\n          };\n          var padding = [userPadding[0] === 'auto' ? legendRange.top + appendPadding[0] * 2 : userPadding[0], userPadding[1] === 'auto' ? legendRange.right + appendPadding[1] : userPadding[1], userPadding[2] === 'auto' ? legendRange.bottom + appendPadding[2] : userPadding[2], userPadding[3] === 'auto' ? legendRange.left + appendPadding[3] : userPadding[3]];\n\n          if (coord.isPolar) {\n            var circleAxis = axes.circle;\n\n            if (circleAxis) {\n              var maxHeight = circleAxis.maxHeight,\n                  maxWidth = circleAxis.maxWidth,\n                  labelOffset = circleAxis.labelOffset;\n              padding[0] += maxHeight + labelOffset;\n              padding[1] += maxWidth + labelOffset;\n              padding[2] += maxHeight + labelOffset;\n              padding[3] += maxWidth + labelOffset;\n            }\n          } else {\n            if (axes.right && userPadding[1] === 'auto') {\n              var _axes$right = axes.right,\n                  _maxWidth = _axes$right.maxWidth,\n                  _labelOffset = _axes$right.labelOffset;\n              padding[1] += _maxWidth + _labelOffset;\n            }\n\n            if (axes.left && userPadding[3] === 'auto') {\n              var _axes$left = axes.left,\n                  _maxWidth2 = _axes$left.maxWidth,\n                  _labelOffset2 = _axes$left.labelOffset;\n              padding[3] += _maxWidth2 + _labelOffset2;\n            }\n\n            if (axes.bottom && userPadding[2] === 'auto') {\n              var _axes$bottom = axes.bottom,\n                  _maxHeight = _axes$bottom.maxHeight,\n                  _labelOffset3 = _axes$bottom.labelOffset;\n              padding[2] += _maxHeight + _labelOffset3;\n            }\n          }\n\n          chart.set('_padding', padding);\n\n          chart._updateLayout(padding);\n        }\n\n        each(axes, function (axis) {\n          var type = axis.type,\n              grid = axis.grid,\n              verticalScale = axis.verticalScale,\n              ticks = axis.ticks,\n              dimType = axis.dimType,\n              position = axis.position,\n              index = axis.index;\n          var appendCfg;\n\n          if (coord.isPolar) {\n            if (type === 'Line') {\n              appendCfg = self._getRadiusCfg(coord);\n            } else if (type === 'Circle') {\n              appendCfg = self._getCircleCfg(coord);\n            }\n          } else {\n            appendCfg = self._getLineCfg(coord, dimType, position);\n          }\n\n          if (grid && verticalScale) {\n            var gridPoints = [];\n            var verticalTicks = formatTicks(verticalScale.getTicks());\n            each(ticks, function (tick) {\n              var subPoints = [];\n              each(verticalTicks, function (verticalTick) {\n                var x = dimType === 'x' ? tick.value : verticalTick.value;\n                var y = dimType === 'x' ? verticalTick.value : tick.value;\n\n                if (x >= 0 && x <= 1 && y >= 0 && y <= 1) {\n                  var point = coord.convertPoint({\n                    x: x,\n                    y: y\n                  });\n                  subPoints.push(point);\n                }\n              });\n              gridPoints.push({\n                points: subPoints,\n                _id: 'axis-' + dimType + index + '-grid-' + tick.tickValue\n              });\n            });\n            axis.gridPoints = gridPoints;\n\n            if (coord.isPolar) {\n              axis.center = coord.center;\n              axis.startAngle = coord.startAngle;\n              axis.endAngle = coord.endAngle;\n            }\n          }\n\n          appendCfg._id = 'axis-' + dimType;\n\n          if (!isNil(index)) {\n            appendCfg._id = 'axis-' + dimType + index;\n          }\n\n          new Abastract[type](mix(axis, appendCfg));\n        });\n      };\n\n      _proto.clear = function clear() {\n        this.axes = {};\n        this.frontPlot.clear();\n        this.backPlot.clear();\n      };\n\n      return AxisController;\n    }();\n\n    function getClip(coord) {\n      var start = coord.start;\n      var end = coord.end;\n      var width = end.x - start.x;\n      var height = Math.abs(end.y - start.y);\n      var margin = 10;\n      var clip;\n\n      if (coord.isPolar) {\n        var circleRadius = coord.circleRadius,\n            center = coord.center,\n            startAngle = coord.startAngle,\n            endAngle = coord.endAngle;\n        clip = new Shape$2.Sector({\n          attrs: {\n            x: center.x,\n            y: center.y,\n            r: circleRadius,\n            r0: 0,\n            startAngle: startAngle,\n            endAngle: endAngle\n          }\n        });\n      } else {\n        clip = new Shape$2.Rect({\n          attrs: {\n            x: start.x,\n            y: end.y - margin,\n            width: width,\n            height: height + 2 * margin\n          }\n        });\n      }\n\n      clip.isClip = true;\n      return clip;\n    }\n\n    function isPointInPlot(point, plot) {\n      var x = point.x,\n          y = point.y;\n      var tl = plot.tl,\n          tr = plot.tr,\n          br = plot.br;\n      return x >= tl.x && x <= tr.x && y >= tl.y && y <= br.y;\n    }\n\n    var Helper = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getClip: getClip,\n        isPointInPlot: isPointInPlot\n    });\n\n    function compare(a, b) {\n      return a - b;\n    }\n\n    function _isScaleExist(scales, compareScale) {\n      var flag = false;\n      each(scales, function (scale) {\n        var scaleValues = [].concat(scale.values);\n        var compareScaleValues = [].concat(compareScale.values);\n\n        if (scale.type === compareScale.type && scale.field === compareScale.field && scaleValues.sort(compare).toString() === compareScaleValues.sort(compare).toString()) {\n          flag = true;\n          return;\n        }\n      });\n      return flag;\n    }\n\n    var Chart = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Chart, _Base);\n\n      Chart.initPlugins = function initPlugins() {\n        return {\n          _plugins: [],\n          _cacheId: 0,\n          register: function register(plugins) {\n            var p = this._plugins;\n            [].concat(plugins).forEach(function (plugin) {\n              if (p.indexOf(plugin) === -1) {\n                p.push(plugin);\n              }\n            });\n            this._cacheId++;\n          },\n          unregister: function unregister(plugins) {\n            var p = this._plugins;\n            [].concat(plugins).forEach(function (plugin) {\n              var idx = p.indexOf(plugin);\n\n              if (idx !== -1) {\n                p.splice(idx, 1);\n              }\n            });\n            this._cacheId++;\n          },\n          clear: function clear() {\n            this._plugins = [];\n            this._cacheId++;\n          },\n          count: function count() {\n            return this._plugins.length;\n          },\n          getAll: function getAll() {\n            return this._plugins;\n          },\n          notify: function notify(chart, hook, args) {\n            var descriptors = this.descriptors(chart);\n            var ilen = descriptors.length;\n            var i;\n            var descriptor;\n            var plugin;\n            var params;\n            var method;\n\n            for (i = 0; i < ilen; ++i) {\n              descriptor = descriptors[i];\n              plugin = descriptor.plugin;\n              method = plugin[hook];\n\n              if (typeof method === 'function') {\n                params = [chart].concat(args || []);\n\n                if (method.apply(plugin, params) === false) {\n                  return false;\n                }\n              }\n            }\n\n            return true;\n          },\n          descriptors: function descriptors(chart) {\n            var cache = chart._plugins || (chart._plugins = {});\n\n            if (cache.id === this._cacheId) {\n              return cache.descriptors;\n            }\n\n            var plugins = [];\n            var descriptors = [];\n\n            this._plugins.concat(chart && chart.get('plugins') || []).forEach(function (plugin) {\n              var idx = plugins.indexOf(plugin);\n\n              if (idx !== -1) {\n                return;\n              }\n\n              plugins.push(plugin);\n              descriptors.push({\n                plugin: plugin\n              });\n            });\n\n            cache.descriptors = descriptors;\n            cache.id = this._cacheId;\n            return descriptors;\n          }\n        };\n      };\n\n      var _proto = Chart.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          /**\n           * the id of canvas\n           * @type {String}\n           */\n          id: null,\n          rendered: false,\n\n          /**\n           * padding\n           * @type {Array|Number}\n           */\n          padding: Global.padding,\n\n          /**\n           * data\n           * @type {Array}\n           */\n          data: null,\n\n          /**\n           * scales of chart\n           * @type {Object}\n           */\n          scales: {},\n\n          /**\n           * @private\n           * geometry instances\n           * @type {Array}\n           */\n          geoms: [],\n\n          /**\n           * scale configuration\n           * @type {Object}\n           */\n          colDefs: null,\n          pixelRatio: Global.pixelRatio,\n\n          /**\n           * filter options\n           * @type {Object}\n           */\n          filters: null,\n          appendPadding: Global.appendPadding\n        };\n      };\n\n      _proto._syncYScales = function _syncYScales() {\n        var syncY = this.get('syncY');\n\n        if (!syncY) {\n          return;\n        }\n\n        var geoms = this.get('geoms');\n        var syncScales = [];\n        var min = [];\n        var max = [];\n        each(geoms, function (geom) {\n          var yScale = geom.getYScale();\n\n          if (yScale.isLinear) {\n            syncScales.push(yScale);\n            min.push(yScale.min);\n            max.push(yScale.max);\n          }\n        });\n        min = Math.min.apply(null, min);\n        max = Math.max.apply(null, max);\n        each(syncScales, function (scale) {\n          scale.change({\n            min: min\n          });\n          scale.change({\n            max: max\n          });\n        });\n      };\n\n      _proto._getFieldsForLegend = function _getFieldsForLegend() {\n        var fields = [];\n        var geoms = this.get('geoms');\n        each(geoms, function (geom) {\n          var attrOptions = geom.get('attrOptions');\n          var attrCfg = attrOptions.color;\n\n          if (attrCfg && attrCfg.field && isString(attrCfg.field)) {\n            var arr = attrCfg.field.split('*');\n            each(arr, function (item) {\n              if (fields.indexOf(item) === -1) {\n                fields.push(item);\n              }\n            });\n          }\n        });\n        return fields;\n      };\n\n      _proto._getScaleData = function _getScaleData(field) {\n        var data = this.get('data');\n        var filteredData = this.get('filteredData');\n\n        if (filteredData.length) {\n          var legendFields = this._getFieldsForLegend();\n\n          if (legendFields.indexOf(field) === -1) {\n            data = filteredData;\n          }\n        }\n\n        return data;\n      } // _updateScales() {\n      //   const scaleController = this.get('scaleController');\n      //   scaleController.updateScales();\n      //   this._adjustScale();\n      // }\n      ;\n\n      _proto._adjustScale = function _adjustScale() {\n        var self = this;\n        var scaleController = self.get('scaleController'); // 看起来是为了让柱状图最小或最大都默认从0开始\n\n        var geoms = this.get('geoms');\n\n        for (var i = 0; i < geoms.length; i++) {\n          var geom = geoms[i];\n\n          if (geom.get('type') === 'interval') {\n            var yScale = geom.getYScale();\n            scaleController.adjustStartZero(yScale);\n          }\n        }\n      };\n\n      _proto._removeGeoms = function _removeGeoms() {\n        var geoms = this.get('geoms');\n\n        while (geoms.length > 0) {\n          var geom = geoms.shift();\n          geom.destroy();\n        }\n      };\n\n      _proto._clearGeoms = function _clearGeoms() {\n        var geoms = this.get('geoms');\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          var geom = geoms[i];\n          geom.clear();\n        }\n      };\n\n      _proto._clearInner = function _clearInner() {\n        this._clearGeoms();\n\n        Chart.plugins.notify(this, 'clearInner');\n        this.emit(EVENT_CLEAR_INNER);\n        this.get('axisController') && this.get('axisController').clear();\n      };\n\n      _proto._initFilteredData = function _initFilteredData() {\n        var filters = this.get('filters');\n        var data = this.get('data') || [];\n\n        if (filters) {\n          data = data.filter(function (obj) {\n            var rst = true;\n            each(filters, function (fn, k) {\n              if (fn) {\n                rst = fn(obj[k], obj);\n\n                if (!rst) {\n                  return false;\n                }\n              }\n            });\n            return rst;\n          });\n        }\n\n        this.set('filteredData', data);\n      };\n\n      _proto._changeGeomsData = function _changeGeomsData() {\n        var geoms = this.get('geoms');\n        var data = this.get('filteredData');\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          var geom = geoms[i];\n          geom.changeData(data);\n        }\n      };\n\n      _proto._initGeom = function _initGeom(geom) {\n        if (geom.get('isInit')) {\n          return;\n        }\n\n        var coord = this.get('coord');\n        var data = this.get('filteredData');\n        var colDefs = this.get('colDefs');\n        var middlePlot = this.get('middlePlot');\n        geom.set('chart', this);\n        geom.set('container', middlePlot.addGroup());\n        geom.set('data', data);\n        geom.set('coord', coord);\n        geom.set('colDefs', colDefs);\n        geom.init();\n        this.emit(EVENT_AFTER_GEOM_INIT, geom);\n      };\n\n      _proto._initGeoms = function _initGeoms() {\n        var geoms = this.get('geoms');\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          this._initGeom(geoms[i]);\n        }\n      };\n\n      _proto._initCoord = function _initCoord() {\n        var plot = this.get('plotRange');\n        var coordCfg = mix({\n          type: 'cartesian'\n        }, this.get('coordCfg'), {\n          plot: plot\n        });\n        var type = coordCfg.type;\n        var C = Base$1[upperFirst(type)];\n        var coord = new C(coordCfg);\n        this.set('coord', coord);\n      };\n\n      _proto._initLayout = function _initLayout() {\n        var padding = this.get('_padding');\n\n        if (!padding) {\n          padding = this.get('margin') || this.get('padding');\n          padding = parsePadding(padding);\n        }\n\n        var top = padding[0] === 'auto' ? 0 : padding[0];\n        var right = padding[1] === 'auto' ? 0 : padding[1];\n        var bottom = padding[2] === 'auto' ? 0 : padding[2];\n        var left = padding[3] === 'auto' ? 0 : padding[3];\n        var width = this.get('width');\n        var height = this.get('height');\n        var start = {\n          x: left,\n          y: top\n        };\n        var end = {\n          x: width - right,\n          y: height - bottom\n        };\n        var plot = this.get('plot');\n\n        if (plot) {\n          plot.reset(start, end);\n          return;\n        }\n\n        var newPlot = new Plot({\n          start: start,\n          end: end\n        });\n        this.set('plotRange', newPlot);\n        this.set('plot', newPlot);\n      };\n\n      _proto._initCanvas = function _initCanvas() {\n        var self = this;\n\n        try {\n          var canvas = new Canvas({\n            el: self.get('el') || self.get('id'),\n            context: self.get('context'),\n            pixelRatio: self.get('pixelRatio'),\n            width: self.get('width'),\n            height: self.get('height'),\n            fontFamily: Global.fontFamily\n          });\n          self.set('canvas', canvas);\n          self.set('el', canvas.get('el'));\n          self.set('width', canvas.get('width'));\n          self.set('height', canvas.get('height'));\n        } catch (error) {\n          throw error;\n        }\n\n        Chart.plugins.notify(self, 'afterCanvasInit');\n      };\n\n      _proto._initLayers = function _initLayers() {\n        var canvas = this.get('canvas');\n        this.set('backPlot', canvas.addGroup());\n        this.set('middlePlot', canvas.addGroup({\n          zIndex: 10\n        }));\n        this.set('frontPlot', canvas.addGroup({\n          zIndex: 20\n        }));\n      };\n\n      _proto._initEvents = function _initEvents() {\n        var _this2 = this;\n\n        // 数据更新后的一些更新\n        this.on(EVENT_AFTER_DATA_CHANGE, function () {\n          // 数据更新后，重新设置filterdata\n          _this2._initFilteredData(); // 更新geoms里的数据\n\n\n          _this2._changeGeomsData();\n        }); // 大小变化后的一些更新\n\n        this.on(EVENT_AFTER_SIZE_CHANGE, function () {\n          _this2._initLayout(); // layout变化后，坐标轴也需要做相应的变化\n\n\n          var coord = _this2.get('coord');\n\n          if (coord) {\n            coord.reset(_this2.get('plot'));\n          }\n        });\n      };\n\n      _proto._initScaleController = function _initScaleController() {\n        var scaleController = new ScaleController({\n          chart: this\n        }); // 让colDefs 和 scaleController.defs 用同一个对象，这样就不用考虑同步的问题\n\n        this.set('colDefs', scaleController.defs); // 已经实例化的scales 也保持统一个对象\n\n        this.set('scales', scaleController.scales);\n        this.set('scaleController', scaleController);\n      };\n\n      _proto._clearScaleController = function _clearScaleController() {\n        var scaleController = this.get('scaleController');\n        scaleController.clear();\n      };\n\n      _proto._init = function _init() {\n        var self = this;\n\n        self._initCanvas();\n\n        self._initLayout();\n\n        self._initLayers();\n\n        self._initEvents();\n\n        self._initScaleController();\n\n        self.set('axisController', new AxisController({\n          frontPlot: self.get('frontPlot').addGroup({\n            className: 'axisContainer'\n          }),\n          backPlot: self.get('backPlot').addGroup({\n            className: 'axisContainer'\n          }),\n          chart: self\n        }));\n        Chart.plugins.notify(self, 'init');\n      };\n\n      function Chart(cfg) {\n        var _this;\n\n        _this = _Base.call(this, cfg) || this;\n\n        var self = _assertThisInitialized(_this);\n\n        each(Geom, function (geomConstructor, className) {\n          var methodName = lowerFirst(className);\n\n          self[methodName] = function (cfg) {\n            var geom = new geomConstructor(cfg);\n            self.addGeom(geom);\n            return geom;\n          };\n        });\n\n        self._init();\n\n        return _this;\n      }\n\n      _proto.init = function init() {\n        // 初始filterData\n        this._initFilteredData(); // initialization coordinate instance\n\n\n        this._initCoord();\n\n        Chart.plugins.notify(this, 'beforeGeomInit'); // init all geometry instances\n\n        this._initGeoms(); // 多 Y 轴的情况时，统一 Y 轴的数值范围。\n\n\n        this._syncYScales(); // do some adjust for data\n\n\n        this._adjustScale();\n\n        this.emit(EVENT_AFTER_INIT);\n      }\n      /**\n       * set data and some scale configuration\n       * @chainable\n       * @param  {Array} data the dataset to visualize\n       * @param  {Object} colDefs the configuration for scales\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.source = function source(data, colDefs) {\n        this.set('data', data);\n\n        if (colDefs) {\n          this.scale(colDefs);\n        }\n\n        return this;\n      };\n\n      _proto.scale = function scale(field, cfg) {\n        var scaleController = this.get('scaleController');\n        scaleController.setFieldDef(field, cfg);\n        return this;\n      }\n      /**\n       * configure the axis\n       * @chainable\n       * @param  {String|Boolean} field the field name of data\n       * @param  {Object} cfg configuration for axis\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.axis = function axis(field, cfg) {\n        var axisController = this.get('axisController');\n\n        if (!field) {\n          axisController.axisCfg = null;\n        } else {\n          axisController.axisCfg = axisController.axisCfg || {};\n          axisController.axisCfg[field] = cfg;\n        }\n\n        return this;\n      }\n      /**\n       * configure the coordinate\n       * @chainable\n       * @param  {String} type set the type of coodinate\n       * @param  {Object} cfg configuration for coordinate\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.coord = function coord(type, cfg) {\n        var coordCfg;\n\n        if (isObject(type)) {\n          coordCfg = type;\n        } else {\n          coordCfg = cfg || {};\n          coordCfg.type = type || 'cartesian';\n        }\n\n        this.set('coordCfg', coordCfg);\n        return this;\n      };\n\n      _proto.filter = function filter(field, condition) {\n        var filters = this.get('filters') || {};\n        filters[field] = condition;\n        this.set('filters', filters); // 如果已经render过，则再重新触发一次change\n\n        if (this.get('rendered')) {\n          this.emit(EVENT_AFTER_DATA_CHANGE, this.get('data'));\n        }\n      }\n      /**\n       * render the chart\n       * @chainable\n       * @return {Chart} return the chart instance\n       */\n      ;\n\n      _proto.render = function render() {\n        var rendered = this.get('rendered');\n        var canvas = this.get('canvas');\n        var geoms = this.get('geoms'); // 已经渲染过\n\n        if (rendered) {\n          this._initGeoms();\n\n          this._adjustScale();\n        } else {\n          this.init();\n          this.set('rendered', true);\n        }\n\n        this.emit(EVENT_BEFORE_RENDER);\n        Chart.plugins.notify(this, 'beforeGeomDraw');\n\n        this._renderAxis();\n\n        var middlePlot = this.get('middlePlot');\n\n        if (this.get('limitInPlot') && !middlePlot.attr('clip')) {\n          var coord = this.get('coord');\n          var clip = getClip(coord);\n          clip.set('canvas', middlePlot.get('canvas'));\n          middlePlot.attr('clip', clip);\n        }\n\n        this.emit(EVENT_BEFORE_GEOM_DRAW);\n\n        for (var i = 0, length = geoms.length; i < length; i++) {\n          var geom = geoms[i];\n          geom.paint();\n        }\n\n        this.emit(EVENT_AFTER_GEOM_DRAW);\n        Chart.plugins.notify(this, 'afterGeomDraw');\n        canvas.sort();\n        this.get('frontPlot').sort();\n        Chart.plugins.notify(this, 'beforeCanvasDraw');\n        canvas.draw();\n        this.emit(EVENT_AFTER_RENDER);\n        return this;\n      }\n      /**\n       * clear the chart, include geometris and all the shapes\n       * @chainable\n       * @return {Chart} return the chart\n       */\n      ;\n\n      _proto.clear = function clear() {\n        Chart.plugins.notify(this, 'clear');\n        this.emit(EVENT_CLEAR);\n\n        this._clearInner();\n\n        this._removeGeoms();\n\n        this._clearScaleController();\n\n        this.set('legendItems', null);\n        this.set('filters', null);\n        this.set('isUpdate', false);\n        this.set('_padding', null);\n        this.set('rendered', false);\n        var canvas = this.get('canvas');\n        canvas.draw();\n        return this;\n      };\n\n      _proto.repaint = function repaint() {\n        // 如果在没有render之前就repaint的，就直接return退出\n        var rendered = this.get('rendered');\n\n        if (!rendered) {\n          return;\n        }\n\n        this.set('isUpdate', true);\n        this.set('legendItems', null);\n        Chart.plugins.notify(this, 'repaint');\n\n        this._clearInner();\n\n        this.emit(EVENT_REPAINT);\n        this.render();\n      };\n\n      _proto.changeData = function changeData(data) {\n        this.emit(EVENT_BEFORE_DATA_CHANGE, data);\n        this.set('data', data);\n        Chart.plugins.notify(this, 'changeData');\n        this.emit(EVENT_AFTER_DATA_CHANGE, data);\n        this.set('_padding', null);\n        this.repaint();\n      };\n\n      _proto.changeSize = function changeSize(width, height) {\n        if (width) {\n          this.set('width', width);\n        } else {\n          width = this.get('width');\n        }\n\n        if (height) {\n          this.set('height', height);\n        } else {\n          height = this.get('height');\n        }\n\n        var canvas = this.get('canvas');\n        canvas.changeSize(width, height);\n        this.emit(EVENT_AFTER_SIZE_CHANGE, {\n          width: width,\n          height: height\n        });\n        this.repaint();\n        return this;\n      };\n\n      _proto.destroy = function destroy() {\n        this.clear();\n        var canvas = this.get('canvas');\n        canvas.destroy();\n        Chart.plugins.notify(this, 'afterCanvasDestroyed');\n\n        if (this._interactions) {\n          each(this._interactions, function (interaction) {\n            interaction.destroy();\n          });\n        }\n\n        _Base.prototype.destroy.call(this);\n      }\n      /**\n       * calculate dataset's position on canvas\n       * @param  {Object} record the dataset\n       * @return {Object} return the position\n       */\n      ;\n\n      _proto.getPosition = function getPosition(record) {\n        var self = this;\n        var coord = self.get('coord');\n        var xScale = self.getXScale();\n        var xField = xScale.field;\n        var yScales = self.getYScales(); // default first\n\n        var yScale = yScales[0];\n        var yField = yScale.field;\n\n        for (var i = 0, len = yScales.length; i < len; i++) {\n          var scale = yScales[i];\n          var field = scale.field;\n\n          if (record[field]) {\n            yScale = scale;\n            yField = field;\n            break;\n          }\n        }\n\n        var x = xScale.scale(record[xField]);\n        var y = yScale.scale(record[yField]);\n        return coord.convertPoint({\n          x: x,\n          y: y\n        });\n      }\n      /**\n       * get the data item of the point\n       * @param  {Object} point canvas position\n       * @return {Object} return the data item\n       */\n      ;\n\n      _proto.getRecord = function getRecord(point) {\n        var self = this;\n        var coord = self.get('coord');\n        var xScale = self.getXScale();\n        var yScale = self.getYScales()[0];\n        var invertPoint = coord.invertPoint(point);\n        var record = {};\n        record[xScale.field] = xScale.invert(invertPoint.x);\n        record[yScale.field] = yScale.invert(invertPoint.y);\n        return record;\n      }\n      /**\n       * get the dataset of the point\n       * @param  {Object} point canvas position\n       * @return {Array} return the dataset\n      **/\n      ;\n\n      _proto.getSnapRecords = function getSnapRecords(point) {\n        var geom = this.get('geoms')[0];\n        var data = [];\n\n        if (geom) {\n          // need to judge\n          data = geom.getSnapRecords(point);\n        }\n\n        return data;\n      }\n      /**\n       * creat scale instances\n       * @param  {String} field field name of data\n       * @return {Scale} return the scale\n       */\n      ;\n\n      _proto.createScale = function createScale(field) {\n        var data = this._getScaleData(field);\n\n        var scaleController = this.get('scaleController');\n        return scaleController.createScale(field, data);\n      }\n      /**\n       * @protected\n       * add geometry instance to geoms\n       * @param {Geom} geom geometry instance\n       */\n      ;\n\n      _proto.addGeom = function addGeom(geom) {\n        var geoms = this.get('geoms');\n        geoms.push(geom);\n      }\n      /**\n       * get the scale of x axis\n       * @return {Scale} return the scale\n       */\n      ;\n\n      _proto.getXScale = function getXScale() {\n        var self = this;\n        var geoms = self.get('geoms');\n        var xScale = geoms[0].getXScale();\n        return xScale;\n      }\n      /**\n       * get the scale of y axis\n       * @return {Array} return the scale\n       */\n      ;\n\n      _proto.getYScales = function getYScales() {\n        var geoms = this.get('geoms');\n        var rst = [];\n        each(geoms, function (geom) {\n          var yScale = geom.getYScale();\n\n          if (rst.indexOf(yScale) === -1) {\n            rst.push(yScale);\n          }\n        });\n        return rst;\n      };\n\n      _proto.getLegendItems = function getLegendItems() {\n        if (this.get('legendItems')) {\n          return this.get('legendItems');\n        }\n\n        var legendItems = {};\n        var scales = [];\n        var geoms = this.get('geoms');\n        each(geoms, function (geom) {\n          var colorAttr = geom.getAttr('color');\n\n          if (colorAttr) {\n            var scale = colorAttr.getScale('color'); // 只支持分类图例\n\n            if (scale.isCategory && !_isScaleExist(scales, scale)) {\n              scales.push(scale);\n              var field = scale.field;\n              var ticks = scale.getTicks();\n              var items = [];\n              each(ticks, function (tick) {\n                var text = tick.text;\n                var name = text;\n                var scaleValue = tick.value;\n                var value = scale.invert(scaleValue);\n                var color = colorAttr.mapping(value).join('') || Global.defaultColor;\n                var marker = {\n                  fill: color,\n                  radius: 3,\n                  symbol: 'circle',\n                  stroke: '#fff'\n                };\n                items.push({\n                  name: name,\n                  // for display\n                  dataValue: value,\n                  // the origin value\n                  checked: true,\n                  marker: marker\n                });\n              });\n              legendItems[field] = items;\n            }\n          }\n        });\n        this.set('legendItems', legendItems);\n        return legendItems;\n      } // register the plugins\n      ;\n\n      _proto.registerPlugins = function registerPlugins(plugins) {\n        var self = this;\n        var chartPlugins = self.get('plugins') || [];\n\n        if (!isArray(chartPlugins)) {\n          chartPlugins = [chartPlugins];\n        }\n\n        [].concat(plugins).forEach(function (plugin) {\n          if (chartPlugins.indexOf(plugin) === -1) {\n            plugin.init && plugin.init(self); // init\n\n            chartPlugins.push(plugin);\n          }\n        });\n        Chart.plugins._cacheId++;\n        self.set('plugins', chartPlugins);\n      };\n\n      _proto._renderAxis = function _renderAxis() {\n        var axisController = this.get('axisController');\n        var xScale = this.getXScale();\n        var yScales = this.getYScales();\n        var coord = this.get('coord');\n        Chart.plugins.notify(this, 'beforeRenderAxis');\n        axisController.createAxis(coord, xScale, yScales);\n      };\n\n      _proto._isAutoPadding = function _isAutoPadding() {\n        if (this.get('_padding')) {\n          return false;\n        }\n\n        var padding = this.get('padding');\n\n        if (isArray(padding)) {\n          return padding.indexOf('auto') !== -1;\n        }\n\n        return padding === 'auto';\n      };\n\n      _proto._updateLayout = function _updateLayout(padding) {\n        var width = this.get('width');\n        var height = this.get('height');\n        var start = {\n          x: padding[3],\n          y: padding[0]\n        };\n        var end = {\n          x: width - padding[1],\n          y: height - padding[2]\n        };\n        var plot = this.get('plot');\n        var coord = this.get('coord');\n        plot.reset(start, end);\n        coord.reset(plot);\n      };\n\n      return Chart;\n    }(Base);\n\n    Chart.plugins = Chart.initPlugins();\n\n    var track = function track() {\n      return null;\n    };\n\n    /**\n     * @fileOverview shape util\n     * @author dxq613@gmail.com\n     */\n\n    function splitPoints(obj) {\n      var points = [];\n      var x = obj.x;\n      var y = obj.y;\n      y = isArray(y) ? y : [y];\n      y.forEach(function (yItem, index) {\n        var point = {\n          x: isArray(x) ? x[index] : x,\n          y: yItem\n        };\n        points.push(point);\n      });\n      return points;\n    }\n\n    function splitArray(data, yField, connectNulls) {\n      if (!data.length) return [];\n      var arr = [];\n      var tmp = [];\n      var yValue;\n      each(data, function (obj) {\n        yValue = obj._origin ? obj._origin[yField] : obj[yField];\n\n        if (connectNulls) {\n          if (!isNil(yValue)) {\n            tmp.push(obj);\n          }\n        } else {\n          if (isArray(yValue) && isNil(yValue[0]) || isNil(yValue)) {\n            if (tmp.length) {\n              arr.push(tmp);\n              tmp = [];\n            }\n          } else {\n            tmp.push(obj);\n          }\n        }\n      });\n\n      if (tmp.length) {\n        arr.push(tmp);\n      }\n\n      return arr;\n    }\n\n    var SHAPES = ['circle', 'hollowCircle', 'rect'];\n    var Point = Shape$1.registerFactory('point', {\n      defaultShapeType: 'circle',\n      getDefaultPoints: function getDefaultPoints(pointInfo) {\n        return splitPoints(pointInfo);\n      }\n    });\n\n    function getPointsCfg(cfg) {\n      var style = {\n        lineWidth: 0,\n        stroke: cfg.color,\n        fill: cfg.color\n      };\n\n      if (cfg.size) {\n        style.size = cfg.size;\n      }\n\n      mix(style, cfg.style);\n      return mix({}, Global.shape.point, style);\n    }\n\n    function drawShape(cfg, container, shape) {\n      if (cfg.size === 0) return;\n      var pointCfg = getPointsCfg(cfg);\n      var size = pointCfg.r || pointCfg.size;\n      var x = cfg.x;\n      var y = !isArray(cfg.y) ? [cfg.y] : cfg.y;\n\n      if (shape === 'hollowCircle') {\n        pointCfg.lineWidth = 1;\n        pointCfg.fill = null;\n      }\n\n      for (var i = 0, len = y.length; i < len; i++) {\n        if (shape === 'rect') {\n          return container.addShape('Rect', {\n            className: 'point',\n            attrs: mix({\n              x: x - size,\n              y: y[i] - size,\n              width: size * 2,\n              height: size * 2\n            }, pointCfg)\n          });\n        }\n\n        return container.addShape('Circle', {\n          className: 'point',\n          attrs: mix({\n            x: x,\n            y: y[i],\n            r: size\n          }, pointCfg)\n        });\n      }\n    }\n\n    each(SHAPES, function (shapeType) {\n      Shape$1.registerShape('point', shapeType, {\n        draw: function draw(cfg, container) {\n          return drawShape(cfg, container, shapeType);\n        }\n      });\n    });\n\n    var Point$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Point, _Geom);\n\n      function Point() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Point.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'point';\n        cfg.shapeType = 'point';\n        cfg.generatePoints = false;\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        each(data, function (obj) {\n          var shape = obj.shape;\n          var cfg = self.getDrawCfg(obj);\n\n          if (isArray(obj.y)) {\n            var hasStack = self.hasAdjust('stack');\n            each(obj.y, function (y, idx) {\n              cfg.y = y;\n\n              if (!hasStack || idx !== 0) {\n                self.drawShape(shape, obj, cfg, container, shapeFactory);\n              }\n            });\n          } else if (!isNil(obj.y)) {\n            self.drawShape(shape, obj, cfg, container, shapeFactory);\n          }\n        });\n      };\n\n      return Point;\n    }(Geom);\n\n    Geom.Point = Point$1;\n\n    var Line$2 = Shape$1.registerFactory('line', {\n      defaultShapeType: 'line'\n    });\n\n    function getStyle$1(cfg) {\n      var style = {\n        strokeStyle: cfg.color\n      };\n\n      if (cfg.size >= 0) {\n        style.lineWidth = cfg.size;\n      }\n\n      mix(style, cfg.style);\n      return mix({}, Global.shape.line, style);\n    }\n\n    function drawLines(cfg, container, style, smooth) {\n      var points = cfg.points;\n\n      if (points.length && isArray(points[0].y)) {\n        var topPoints = [];\n        var bottomPoints = [];\n\n        for (var i = 0, len = points.length; i < len; i++) {\n          var point = points[i];\n          var tmp = splitPoints(point);\n          bottomPoints.push(tmp[0]);\n          topPoints.push(tmp[1]);\n        }\n\n        if (cfg.isInCircle) {\n          topPoints.push(topPoints[0]);\n          bottomPoints.push(bottomPoints[0]);\n        }\n\n        if (cfg.isStack) {\n          return container.addShape('Polyline', {\n            className: 'line',\n            attrs: mix({\n              points: topPoints,\n              smooth: smooth\n            }, style)\n          });\n        }\n\n        var topShape = container.addShape('Polyline', {\n          className: 'line',\n          attrs: mix({\n            points: topPoints,\n            smooth: smooth\n          }, style)\n        });\n        var bottomShape = container.addShape('Polyline', {\n          className: 'line',\n          attrs: mix({\n            points: bottomPoints,\n            smooth: smooth\n          }, style)\n        });\n        return [topShape, bottomShape];\n      }\n\n      if (cfg.isInCircle) {\n        points.push(points[0]);\n      }\n\n      return container.addShape('Polyline', {\n        className: 'line',\n        attrs: mix({\n          points: points,\n          smooth: smooth\n        }, style)\n      });\n    }\n\n    var SHAPES$1 = ['line', 'smooth', 'dash'];\n    each(SHAPES$1, function (shapeType) {\n      Shape$1.registerShape('line', shapeType, {\n        draw: function draw(cfg, container) {\n          var smooth = shapeType === 'smooth';\n          var style = getStyle$1(cfg);\n\n          if (shapeType === 'dash') {\n            style.lineDash = Global.lineDash;\n          }\n\n          return drawLines(cfg, container, style, smooth);\n        }\n      });\n    });\n\n    var Path = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Path, _Geom);\n\n      function Path() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Path.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'path';\n        cfg.shapeType = 'line';\n        return cfg;\n      };\n\n      _proto.getDrawCfg = function getDrawCfg(obj) {\n        var cfg = _Geom.prototype.getDrawCfg.call(this, obj);\n\n        cfg.isStack = this.hasAdjust('stack');\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        var yScale = self.getYScale();\n        var connectNulls = self.get('connectNulls');\n        var splitArrayObj = splitArray(data, yScale.field, connectNulls);\n        var cfg = this.getDrawCfg(data[0]);\n        cfg.origin = data;\n        each(splitArrayObj, function (subData, splitedIndex) {\n          cfg.splitedIndex = splitedIndex;\n          cfg.points = subData;\n          self.drawShape(cfg.shape, data[0], cfg, container, shapeFactory);\n        });\n      };\n\n      return Path;\n    }(Geom);\n\n    Geom.Path = Path;\n\n    var Line$3 = /*#__PURE__*/function (_Path) {\n      _inheritsLoose(Line, _Path);\n\n      function Line() {\n        return _Path.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Path.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'line';\n        cfg.sortable = true;\n        return cfg;\n      };\n\n      return Line;\n    }(Path);\n\n    Geom.Line = Line$3;\n\n    function equals(v1, v2) {\n      return Math.abs(v1 - v2) < 0.00001;\n    }\n\n    function notEmpty(value) {\n      return !isNaN(value) && !isNil(value);\n    }\n\n    function filterPoints(points) {\n      var filteredPoints = []; // filter the point which x or y is NaN\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n\n        if (notEmpty(point.x) && notEmpty(point.y)) {\n          filteredPoints.push(point);\n        }\n      }\n\n      return filteredPoints;\n    }\n\n    function equalsCenter(points, center) {\n      var eqls = true;\n      each(points, function (point) {\n        if (!equals(point.x, center.x) || !equals(point.y, center.y)) {\n          eqls = false;\n          return false;\n        }\n      });\n      return eqls;\n    }\n\n    function drawRectShape(topPoints, bottomPoints, container, style, isSmooth) {\n      var shape;\n      var points = topPoints.concat(bottomPoints);\n\n      if (isSmooth) {\n        shape = container.addShape('Custom', {\n          className: 'area',\n          attrs: mix({\n            points: points\n          }, style),\n          createPath: function createPath(context) {\n            var constaint = [[0, 0], [1, 1]];\n            var points = filterPoints(this._attrs.attrs.points);\n            var pointsLen = points.length;\n            var topPoints = points.slice(0, pointsLen / 2);\n            var bottomPoints = points.slice(pointsLen / 2, pointsLen);\n            var topSps = catmullRom2bezier(topPoints, false, constaint);\n            context.beginPath();\n            context.moveTo(topPoints[0].x, topPoints[0].y);\n\n            for (var i = 0, n = topSps.length; i < n; i++) {\n              var sp = topSps[i];\n              context.bezierCurveTo(sp[1], sp[2], sp[3], sp[4], sp[5], sp[6]);\n            }\n\n            if (bottomPoints.length) {\n              var bottomSps = catmullRom2bezier(bottomPoints, false, constaint);\n              context.lineTo(bottomPoints[0].x, bottomPoints[0].y);\n\n              for (var _i = 0, _n = bottomSps.length; _i < _n; _i++) {\n                var _sp = bottomSps[_i];\n                context.bezierCurveTo(_sp[1], _sp[2], _sp[3], _sp[4], _sp[5], _sp[6]);\n              }\n            }\n\n            context.closePath();\n          },\n          calculateBox: function calculateBox() {\n            var points = filterPoints(this._attrs.attrs.points);\n            return getBBoxFromPoints(points);\n          }\n        });\n      } else {\n        shape = container.addShape('Polyline', {\n          className: 'area',\n          attrs: mix({\n            points: points\n          }, style)\n        });\n      }\n\n      return shape;\n    }\n\n    function drawShape$1(cfg, container, isSmooth) {\n      var self = this;\n      var points = cfg.points;\n      var topPoints = [];\n      var bottomPoints = [];\n      each(points, function (point) {\n        bottomPoints.push(point[0]);\n        topPoints.push(point[1]);\n      });\n      var style = mix({\n        fillStyle: cfg.color\n      }, Global.shape.area, cfg.style);\n      bottomPoints.reverse();\n      topPoints = self.parsePoints(topPoints);\n      bottomPoints = self.parsePoints(bottomPoints);\n\n      if (cfg.isInCircle) {\n        topPoints.push(topPoints[0]);\n        bottomPoints.unshift(bottomPoints[bottomPoints.length - 1]);\n\n        if (equalsCenter(bottomPoints, cfg.center)) {\n          bottomPoints = [];\n        }\n      }\n\n      return drawRectShape(topPoints, bottomPoints, container, style, isSmooth);\n    }\n\n    var Area = Shape$1.registerFactory('area', {\n      defaultShapeType: 'area',\n      getDefaultPoints: function getDefaultPoints(obj) {\n        var x = obj.x;\n        var y = obj.y;\n        var y0 = obj.y0;\n        y = isArray(y) ? y : [y0, y];\n        var points = [];\n        points.push({\n          x: x,\n          y: y[0]\n        }, {\n          x: x,\n          y: y[1]\n        });\n        return points;\n      }\n    });\n    var SHAPES$2 = ['area', 'smooth'];\n    each(SHAPES$2, function (shapeType) {\n      Shape$1.registerShape('area', shapeType, {\n        draw: function draw(cfg, container) {\n          var smooth = shapeType === 'smooth';\n          return drawShape$1.call(this, cfg, container, smooth);\n        }\n      });\n    });\n\n    var Area$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Area, _Geom);\n\n      function Area() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Area.prototype;\n\n      /**\n       * get the default configuration\n       * @protected\n       * @return {Object} return the result\n       */\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'area';\n        cfg.shapeType = 'area';\n        cfg.generatePoints = true;\n        cfg.sortable = true;\n        return cfg;\n      };\n\n      _proto.draw = function draw(data, shapeFactory) {\n        var self = this;\n        var container = self.get('container');\n        var cfg = this.getDrawCfg(data[0]);\n        var yScale = self.getYScale();\n        var connectNulls = self.get('connectNulls');\n        var splitArrayfn = splitArray(data, yScale.field, connectNulls);\n        cfg.origin = data;\n        each(splitArrayfn, function (subData, splitedIndex) {\n          cfg.splitedIndex = splitedIndex;\n          var points = subData.map(function (obj) {\n            return obj.points;\n          });\n          cfg.points = points;\n          self.drawShape(cfg.shape, data[0], cfg, container, shapeFactory);\n        });\n      };\n\n      return Area;\n    }(Geom);\n\n    Geom.Area = Area$1;\n\n    /**\n     * @fileOverview Utility for calculate the with ratui in x axis\n     * @author sima.zhang1990@gmail.com\n     * @author dxq613@gmail.com\n     */\n    var SizeMixin = {\n      initEvent: function initEvent() {\n        var _this = this;\n\n        var chart = this.get('chart');\n\n        if (!chart) {\n          return;\n        }\n\n        chart.on(EVENT_AFTER_SIZE_CHANGE, function () {\n          _this.set('_width', null);\n        });\n      },\n      getDefaultSize: function getDefaultSize() {\n        var defaultSize = this.get('defaultSize');\n\n        if (!defaultSize) {\n          var coord = this.get('coord');\n          var xScale = this.getXScale();\n          var dataArray = this.get('dataArray');\n          var values = uniq(xScale.values);\n          var count = values.length;\n          var range = xScale.range;\n          var normalizeSize = 1 / count;\n          var widthRatio = 1;\n\n          if (coord && coord.isPolar) {\n            if (coord.transposed && count > 1) {\n              widthRatio = Global.widthRatio.multiplePie;\n            } else {\n              widthRatio = Global.widthRatio.rose;\n            }\n          } else {\n            if (xScale.isLinear) {\n              normalizeSize *= range[1] - range[0];\n            }\n\n            widthRatio = Global.widthRatio.column;\n          }\n\n          normalizeSize *= widthRatio;\n\n          if (this.hasAdjust('dodge')) {\n            normalizeSize = normalizeSize / dataArray.length;\n          }\n\n          defaultSize = normalizeSize;\n          this.set('defaultSize', defaultSize);\n        }\n\n        return defaultSize;\n      },\n      getDimWidth: function getDimWidth(dimName) {\n        var coord = this.get('coord');\n        var start = coord.convertPoint({\n          x: 0,\n          y: 0\n        });\n        var end = coord.convertPoint({\n          x: dimName === 'x' ? 1 : 0,\n          y: dimName === 'x' ? 0 : 1\n        });\n        var width = 0;\n\n        if (start && end) {\n          width = Math.sqrt(Math.pow(end.x - start.x, 2) + Math.pow(end.y - start.y, 2));\n        }\n\n        return width;\n      },\n      _getWidth: function _getWidth() {\n        var width = this.get('_width');\n\n        if (!width) {\n          var coord = this.get('coord');\n\n          if (coord && coord.isPolar && !coord.transposed) {\n            width = (coord.endAngle - coord.startAngle) * coord.circleRadius;\n          } else {\n            width = this.getDimWidth('x');\n          }\n\n          this.set('_width', width);\n        }\n\n        return width;\n      },\n      _toNormalizedSize: function _toNormalizedSize(size) {\n        var width = this._getWidth();\n\n        return size / width;\n      },\n      _toCoordSize: function _toCoordSize(normalizeSize) {\n        var width = this._getWidth();\n\n        return width * normalizeSize;\n      },\n      getNormalizedSize: function getNormalizedSize(obj) {\n        var size = this.getAttrValue('size', obj);\n\n        if (isNil(size)) {\n          size = this.getDefaultSize();\n        } else {\n          size = this._toNormalizedSize(size);\n        }\n\n        return size;\n      },\n      getSize: function getSize(obj) {\n        var size = this.getAttrValue('size', obj);\n\n        if (isNil(size)) {\n          var normalizeSize = this.getDefaultSize();\n          size = this._toCoordSize(normalizeSize);\n        }\n\n        return size;\n      }\n    };\n\n    function getRectPoints(cfg) {\n      var x = cfg.x,\n          y = cfg.y,\n          y0 = cfg.y0,\n          size = cfg.size;\n      var ymin = y0;\n      var ymax = y;\n\n      if (isArray(y)) {\n        ymax = y[1];\n        ymin = y[0];\n      }\n\n      var xmin;\n      var xmax;\n\n      if (isArray(x)) {\n        xmin = x[0];\n        xmax = x[1];\n      } else {\n        xmin = x - size / 2;\n        xmax = x + size / 2;\n      }\n\n      return [{\n        x: xmin,\n        y: ymin\n      }, {\n        x: xmin,\n        y: ymax\n      }, {\n        x: xmax,\n        y: ymax\n      }, {\n        x: xmax,\n        y: ymin\n      }];\n    }\n\n    function getRectRange(points) {\n      var xValues = [];\n      var yValues = [];\n\n      for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        xValues.push(point.x);\n        yValues.push(point.y);\n      }\n\n      var xMin = Math.min.apply(null, xValues);\n      var yMin = Math.min.apply(null, yValues);\n      var xMax = Math.max.apply(null, xValues);\n      var yMax = Math.max.apply(null, yValues);\n      return {\n        x: xMin,\n        y: yMin,\n        width: xMax - xMin,\n        height: yMax - yMin\n      };\n    }\n\n    function getMiddlePoint(a, b) {\n      var x = (a.x - b.x) / 2 + b.x;\n      var y = (a.y - b.y) / 2 + b.y;\n      return {\n        x: x,\n        y: y\n      };\n    }\n\n    var Interval = Shape$1.registerFactory('interval', {\n      defaultShapeType: 'rect',\n      getDefaultPoints: function getDefaultPoints(cfg) {\n        return getRectPoints(cfg);\n      }\n    });\n    Shape$1.registerShape('interval', 'rect', {\n      draw: function draw(cfg, container) {\n        var points = this.parsePoints(cfg.points);\n        var style = mix({\n          fill: cfg.color\n        }, Global.shape.interval, cfg.style);\n\n        if (cfg.isInCircle) {\n          var newPoints = points.slice(0);\n\n          if (this._coord.transposed) {\n            newPoints = [points[0], points[3], points[2], points[1]];\n          }\n\n          var _cfg$center = cfg.center,\n              x = _cfg$center.x,\n              y = _cfg$center.y;\n          var v = [1, 0];\n          var v0 = [newPoints[0].x - x, newPoints[0].y - y];\n          var v1 = [newPoints[1].x - x, newPoints[1].y - y];\n          var v2 = [newPoints[2].x - x, newPoints[2].y - y];\n          var startAngle = Vector2.angleTo(v, v1);\n          var endAngle = Vector2.angleTo(v, v2);\n          var r0 = Vector2.length(v0);\n          var r = Vector2.length(v1);\n\n          if (startAngle >= 1.5 * Math.PI) {\n            startAngle = startAngle - 2 * Math.PI;\n          }\n\n          if (endAngle >= 1.5 * Math.PI) {\n            endAngle = endAngle - 2 * Math.PI;\n          }\n\n          return container.addShape('Sector', {\n            className: 'interval',\n            attrs: mix({\n              x: x,\n              y: y,\n              r: r,\n              r0: r0,\n              startAngle: startAngle,\n              endAngle: endAngle\n            }, style)\n          });\n        }\n\n        var rectCfg = getRectRange(points);\n        return container.addShape('rect', {\n          className: 'interval',\n          attrs: mix(rectCfg, style)\n        });\n      }\n    }); // 金字塔 和 漏斗图\n\n    ['pyramid', 'funnel'].forEach(function (shapeType) {\n      Shape$1.registerShape('interval', shapeType, {\n        getPoints: function getPoints(cfg) {\n          cfg.size = cfg.size * 2; // 漏斗图的 size 是柱状图的两倍\n\n          return getRectPoints(cfg);\n        },\n        draw: function draw(cfg, container) {\n          var points = this.parsePoints(cfg.points);\n          var nextPoints = this.parsePoints(cfg.nextPoints);\n          var polygonPoints = null;\n\n          if (nextPoints) {\n            polygonPoints = [points[0], points[1], nextPoints[1], nextPoints[0]];\n          } else {\n            polygonPoints = [points[0], points[1]]; // pyramid 顶部是三角形，所以取中心点就好了，funnel顶部是长方形\n\n            if (shapeType === 'pyramid') {\n              polygonPoints.push(getMiddlePoint(points[2], points[3]));\n            } else {\n              polygonPoints.push(points[2], points[3]);\n            }\n          }\n\n          var attrs = mix({\n            fill: cfg.color,\n            points: polygonPoints\n          }, Global.shape.interval, cfg.style);\n          return container.addShape('polygon', {\n            className: 'interval',\n            attrs: attrs\n          });\n        }\n      });\n    });\n\n    var Interval$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Interval, _Geom);\n\n      var _proto = Interval.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'interval';\n        cfg.shapeType = 'interval';\n        cfg.generatePoints = true;\n        return cfg;\n      };\n\n      function Interval(cfg) {\n        var _this;\n\n        _this = _Geom.call(this, cfg) || this;\n        mix(_assertThisInitialized(_this), SizeMixin);\n        return _this;\n      }\n\n      _proto.init = function init() {\n        _Geom.prototype.init.call(this); // 绑定事件\n\n\n        this.initEvent();\n      };\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var cfg = _Geom.prototype.createShapePointsCfg.call(this, obj);\n\n        cfg.size = this.getNormalizedSize(obj);\n        return cfg;\n      };\n\n      _proto.clearInner = function clearInner() {\n        _Geom.prototype.clearInner.call(this);\n\n        this.set('defaultSize', null);\n      };\n\n      return Interval;\n    }(Geom);\n\n    Geom.Interval = Interval$1;\n\n    var Polygon$1 = Shape$1.registerFactory('polygon', {\n      defaultShapeType: 'polygon',\n      getDefaultPoints: function getDefaultPoints(pointInfo) {\n        var points = [];\n        var x = pointInfo.x,\n            y = pointInfo.y;\n\n        for (var i = 0, len = x.length; i < len; i++) {\n          points.push({\n            x: x[i],\n            y: y[i]\n          });\n        }\n\n        return points;\n      }\n    });\n    Shape$1.registerShape('polygon', 'polygon', {\n      draw: function draw(cfg, container) {\n        var points = this.parsePoints(cfg.points);\n        var style = mix({\n          fill: cfg.color,\n          points: points\n        }, cfg.style);\n        return container.addShape('Polygon', {\n          className: 'polygon',\n          attrs: style\n        });\n      }\n    });\n\n    var Polygon$2 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Polygon, _Geom);\n\n      function Polygon() {\n        return _Geom.apply(this, arguments) || this;\n      }\n\n      var _proto = Polygon.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'polygon';\n        cfg.shapeType = 'polygon';\n        cfg.generatePoints = true;\n        return cfg;\n      };\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var cfg = _Geom.prototype.createShapePointsCfg.call(this, obj);\n\n        var self = this;\n        var x = cfg.x;\n        var y = cfg.y;\n        var temp;\n\n        if (!(isArray(x) && isArray(y))) {\n          var xScale = self.getXScale();\n          var yScale = self.getYScale();\n          var xCount = xScale.values ? xScale.values.length : xScale.ticks.length;\n          var yCount = yScale.values ? yScale.values.length : yScale.ticks.length;\n          var xOffset = 0.5 * 1 / xCount;\n          var yOffset = 0.5 * 1 / yCount;\n\n          if (xScale.isCategory && yScale.isCategory) {\n            x = [x - xOffset, x - xOffset, x + xOffset, x + xOffset];\n            y = [y - yOffset, y + yOffset, y + yOffset, y - yOffset];\n          } else if (isArray(x)) {\n            temp = x;\n            x = [temp[0], temp[0], temp[1], temp[1]];\n            y = [y - yOffset / 2, y + yOffset / 2, y + yOffset / 2, y - yOffset / 2];\n          } else if (isArray(y)) {\n            temp = y;\n            y = [temp[0], temp[1], temp[1], temp[0]];\n            x = [x - xOffset / 2, x - xOffset / 2, x + xOffset / 2, x + xOffset / 2];\n          }\n\n          cfg.x = x;\n          cfg.y = y;\n        }\n\n        return cfg;\n      };\n\n      return Polygon;\n    }(Geom);\n\n    Geom.Polygon = Polygon$2;\n\n    function _sortValue(value) {\n      var sorted = value.sort(function (a, b) {\n        return a < b ? 1 : -1;\n      });\n      var length = sorted.length;\n\n      if (length < 4) {\n        var min = sorted[length - 1];\n\n        for (var i = 0; i < 4 - length; i++) {\n          sorted.push(min);\n        }\n      }\n\n      return sorted;\n    } // from left bottom corner, and clockwise\n\n\n    function getCandlePoints(x, y, width) {\n      var yValues = _sortValue(y);\n\n      var points = [{\n        x: x,\n        y: yValues[0]\n      }, {\n        x: x,\n        y: yValues[1]\n      }, {\n        x: x - width / 2,\n        y: yValues[2]\n      }, {\n        x: x - width / 2,\n        y: yValues[1]\n      }, {\n        x: x + width / 2,\n        y: yValues[1]\n      }, {\n        x: x + width / 2,\n        y: yValues[2]\n      }, {\n        x: x,\n        y: yValues[2]\n      }, {\n        x: x,\n        y: yValues[3]\n      }];\n      return points;\n    }\n\n    var Schema = Shape$1.registerFactory('schema', {});\n    Shape$1.registerShape('schema', 'candle', {\n      getPoints: function getPoints(cfg) {\n        return getCandlePoints(cfg.x, cfg.y, cfg.size);\n      },\n      draw: function draw(cfg, container) {\n        var points = this.parsePoints(cfg.points);\n        var style = mix({\n          stroke: cfg.color,\n          fill: cfg.color,\n          lineWidth: 1\n        }, cfg.style);\n        return container.addShape('Custom', {\n          className: 'schema',\n          attrs: style,\n          createPath: function createPath(ctx) {\n            ctx.beginPath();\n            ctx.moveTo(points[0].x, points[0].y);\n            ctx.lineTo(points[1].x, points[1].y);\n            ctx.moveTo(points[2].x, points[2].y);\n\n            for (var i = 3; i < 6; i++) {\n              ctx.lineTo(points[i].x, points[i].y);\n            }\n\n            ctx.closePath();\n            ctx.moveTo(points[6].x, points[6].y);\n            ctx.lineTo(points[7].x, points[7].y);\n          }\n        });\n      }\n    });\n\n    var Schema$1 = /*#__PURE__*/function (_Geom) {\n      _inheritsLoose(Schema, _Geom);\n\n      var _proto = Schema.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        var cfg = _Geom.prototype.getDefaultCfg.call(this);\n\n        cfg.type = 'schema';\n        cfg.shapeType = 'schema';\n        cfg.generatePoints = true;\n        return cfg;\n      };\n\n      function Schema(cfg) {\n        var _this;\n\n        _this = _Geom.call(this, cfg) || this;\n        mix(_assertThisInitialized(_this), SizeMixin);\n        return _this;\n      }\n\n      _proto.init = function init() {\n        _Geom.prototype.init.call(this); // 绑定事件\n\n\n        this.initEvent();\n      };\n\n      _proto.createShapePointsCfg = function createShapePointsCfg(obj) {\n        var cfg = _Geom.prototype.createShapePointsCfg.call(this, obj);\n\n        cfg.size = this.getNormalizedSize(obj);\n        return cfg;\n      };\n\n      _proto.clearInner = function clearInner() {\n        _Geom.prototype.clearInner.call(this);\n\n        this.set('defaultSize', null);\n      };\n\n      return Schema;\n    }(Geom);\n\n    Geom.Schema = Schema$1;\n\n    var toString$3 = {}.toString;\n\n    var isType$1 = function isType(value, type) {\n      return toString$3.call(value) === '[object ' + type + ']';\n    };\n\n    var isType_1 = isType$1;\n\n    var isArray$1 = Array.isArray ? Array.isArray : function (value) {\n      return isType_1(value, 'Array');\n    };\n    var isArray_1 = isArray$1;\n\n    // isFinite,\n    var isNil$1 = function isNil(value) {\n      /**\n       * isNil(null) => true\n       * isNil() => true\n       */\n      return value === null || value === undefined;\n    };\n\n    var isNil_1 = isNil$1;\n\n    function _inheritsLoose$1(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    var Stack = /*#__PURE__*/function (_Adjust) {\n      _inheritsLoose$1(Stack, _Adjust);\n\n      function Stack() {\n        return _Adjust.apply(this, arguments) || this;\n      }\n\n      var _proto = Stack.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.xField = null; // 调整对应的 x 方向对应的字段名称\n\n        this.yField = null; // 调整对应的 y 方向对应的字段名称\n      };\n\n      _proto.processAdjust = function processAdjust(dataArray) {\n        this.processStack(dataArray);\n      };\n\n      _proto.processStack = function processStack(dataArray) {\n        var self = this;\n        var xField = self.xField;\n        var yField = self.yField;\n        var count = dataArray.length;\n        var stackCache = {\n          positive: {},\n          negative: {}\n        }; // 层叠顺序翻转\n\n        if (self.reverseOrder) {\n          dataArray = dataArray.slice(0).reverse();\n        }\n\n        for (var i = 0; i < count; i++) {\n          var data = dataArray[i];\n\n          for (var j = 0, len = data.length; j < len; j++) {\n            var item = data[j];\n            var x = item[xField] || 0;\n            var y = item[yField];\n            var xkey = x.toString();\n            y = isArray_1(y) ? y[1] : y;\n\n            if (!isNil_1(y)) {\n              var direction = y >= 0 ? 'positive' : 'negative';\n\n              if (!stackCache[direction][xkey]) {\n                stackCache[direction][xkey] = 0;\n              }\n\n              item[yField] = [stackCache[direction][xkey], y + stackCache[direction][xkey]];\n              stackCache[direction][xkey] += y;\n            }\n          }\n        }\n      };\n\n      return Stack;\n    }(base);\n\n    base.Stack = Stack;\n\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    var isObject$1 = function isObject(value) {\n      /**\n       * isObject({}) => true\n       * isObject([1, 2, 3]) => true\n       * isObject(Function) => true\n       * isObject(null) => false\n       */\n      var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n      return value !== null && type === 'object' || type === 'function';\n    };\n\n    var isObject_1 = isObject$1;\n\n    var each$1 = function each(elements, func) {\n      if (!elements) {\n        return;\n      }\n\n      var rst = void 0;\n\n      if (isArray_1(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n          rst = func(elements[i], i);\n\n          if (rst === false) {\n            break;\n          }\n        }\n      } else if (isObject_1(elements)) {\n        for (var k in elements) {\n          if (elements.hasOwnProperty(k)) {\n            rst = func(elements[k], k);\n\n            if (rst === false) {\n              break;\n            }\n          }\n        }\n      }\n    };\n\n    var each_1 = each$1;\n\n    function _inheritsLoose$2(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    var MARGIN_RATIO = 1 / 2;\n    var DODGE_RATIO = 1 / 2;\n\n    var Dodge = /*#__PURE__*/function (_Adjust) {\n      _inheritsLoose$2(Dodge, _Adjust);\n\n      function Dodge() {\n        return _Adjust.apply(this, arguments) || this;\n      }\n\n      var _proto = Dodge.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        /**\n         * 调整过程中,2个数据的间距\n         * @type {Number}\n         */\n        this.marginRatio = MARGIN_RATIO;\n        /**\n         * 调整占单位宽度的比例,例如：占2个分类间距的 1/2\n         * @type {Number}\n         */\n\n        this.dodgeRatio = DODGE_RATIO;\n        this.adjustNames = ['x', 'y']; // 调整的维度，默认,x,y都做调整\n      };\n\n      _proto.getDodgeOffset = function getDodgeOffset(range, index, count) {\n        var self = this;\n        var pre = range.pre;\n        var next = range.next;\n        var tickLength = next - pre;\n        var width = tickLength * self.dodgeRatio / count;\n        var margin = self.marginRatio * width;\n        var offset = 1 / 2 * (tickLength - count * width - (count - 1) * margin) + ((index + 1) * width + index * margin) - 1 / 2 * width - 1 / 2 * tickLength;\n        return (pre + next) / 2 + offset;\n      };\n\n      _proto.processAdjust = function processAdjust(dataArray) {\n        var self = this;\n        var count = dataArray.length;\n        var xField = self.xField;\n        each_1(dataArray, function (data, index) {\n          for (var i = 0, len = data.length; i < len; i++) {\n            var obj = data[i];\n            var value = obj[xField];\n            var range = {\n              pre: len === 1 ? value - 1 : value - 0.5,\n              next: len === 1 ? value + 1 : value + 0.5\n            };\n            var dodgeValue = self.getDodgeOffset(range, index, count);\n            obj[xField] = dodgeValue;\n          }\n        });\n      };\n\n      return Dodge;\n    }(base);\n\n    base.Dodge = Dodge;\n\n    /**\n     * 是否为函数\n     * @param  {*} fn 对象\n     * @return {Boolean}  是否函数\n     */\n\n    var isFunction$1 = function isFunction(value) {\n      return isType_1(value, 'Function');\n    };\n\n    var isFunction_1 = isFunction$1;\n\n    /**\n     * @param {Array} arr The array to iterate over.\n     * @param {Function} [fn] The iteratee invoked per element.\n     * @return {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n\n    var maxBy = function maxBy(arr, fn) {\n      if (!isArray_1(arr)) {\n        return undefined;\n      }\n\n      var max = arr[0];\n      var maxData = void 0;\n\n      if (isFunction_1(fn)) {\n        maxData = fn(arr[0]);\n      } else {\n        maxData = arr[0][fn];\n      }\n\n      var data = void 0;\n      each_1(arr, function (val) {\n        if (isFunction_1(fn)) {\n          data = fn(val);\n        } else {\n          data = val[fn];\n        }\n\n        if (data > maxData) {\n          max = val;\n          maxData = data;\n        }\n      });\n      return max;\n    };\n\n    var maxBy_1 = maxBy;\n\n    var merge$1 = function merge(dataArray) {\n      var rst = [];\n\n      for (var i = 0; i < dataArray.length; i++) {\n        rst = rst.concat(dataArray[i]);\n      }\n\n      return rst;\n    };\n\n    var merge_1 = merge$1;\n\n    function _inheritsLoose$3(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n\n    var ArrayUtil = {\n      merge: merge_1\n    };\n\n    var Symmetric = /*#__PURE__*/function (_Adjust) {\n      _inheritsLoose$3(Symmetric, _Adjust);\n\n      function Symmetric() {\n        return _Adjust.apply(this, arguments) || this;\n      }\n\n      var _proto = Symmetric.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.xField = null; // 调整对应的 x 方向对应的字段名称\n\n        this.yField = null; // 调整对应的 y 方向对应的字段名称\n\n        this.cacheMax = null; // 缓存的最大值\n\n        this.adjustNames = ['y']; // Only support stack y\n\n        this.groupFields = null; // 参与分组的数据维度\n      }; // 获取最大的y值\n\n\n      _proto._getMax = function _getMax(dim) {\n        var self = this;\n        var mergeData = self.mergeData;\n        var maxRecord = maxBy_1(mergeData, function (obj) {\n          var value = obj[dim];\n\n          if (isArray_1(value)) {\n            return Math.max.apply(null, value);\n          }\n\n          return value;\n        });\n        var maxValue = maxRecord[dim];\n        var max = isArray_1(maxValue) ? Math.max.apply(null, maxValue) : maxValue;\n        return max;\n      }; // 获取每个字段最大的值\n\n\n      _proto._getXValuesMax = function _getXValuesMax() {\n        var self = this;\n        var yField = self.yField;\n        var xField = self.xField;\n        var cache = {};\n        var mergeData = self.mergeData;\n        each_1(mergeData, function (obj) {\n          var xValue = obj[xField];\n          var yValue = obj[yField];\n          var max = isArray_1(yValue) ? Math.max.apply(null, yValue) : yValue;\n          cache[xValue] = cache[xValue] || 0;\n\n          if (cache[xValue] < max) {\n            cache[xValue] = max;\n          }\n        });\n        return cache;\n      }; // 入口函数\n\n\n      _proto.processAdjust = function processAdjust(dataArray) {\n        var self = this;\n        var mergeData = ArrayUtil.merge(dataArray);\n        self.mergeData = mergeData;\n\n        self._processSymmetric(dataArray);\n\n        self.mergeData = null;\n      }; // 处理对称\n\n\n      _proto._processSymmetric = function _processSymmetric(dataArray) {\n        var self = this;\n        var xField = self.xField;\n        var yField = self.yField;\n\n        var max = self._getMax(yField);\n\n        var first = dataArray[0][0];\n        var cache;\n\n        if (first && isArray_1(first[yField])) {\n          cache = self._getXValuesMax();\n        }\n\n        each_1(dataArray, function (data) {\n          each_1(data, function (obj) {\n            var value = obj[yField];\n            var offset;\n\n            if (isArray_1(value)) {\n              var xValue = obj[xField];\n              var valueMax = cache[xValue];\n              offset = (max - valueMax) / 2;\n              var tmp = [];\n              /* eslint-disable no-loop-func */\n\n              each_1(value, function (subVal) {\n                // 多个字段\n                tmp.push(offset + subVal);\n              });\n              /* eslint-enable no-loop-func */\n\n              obj[yField] = tmp;\n            } else {\n              offset = (max - value) / 2;\n              obj[yField] = [offset, value + offset];\n            }\n          });\n        });\n      };\n\n      return Symmetric;\n    }(base);\n\n    base.Symmetric = Symmetric;\n\n    var Polar = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Polar, _Base);\n\n      function Polar() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Polar.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'polar';\n        this.startAngle = -Math.PI / 2;\n        this.endAngle = Math.PI * 3 / 2;\n        this.inner = 0;\n        this.innerRadius = 0; // alias\n\n        this.isPolar = true;\n        this.transposed = false;\n        this.center = null;\n        this.radius = null; // relative, 0 ~ 1\n      };\n\n      _proto.init = function init(start, end) {\n        _Base.prototype.init.call(this, start, end);\n\n        var self = this;\n        var inner = self.inner || self.innerRadius;\n        var width = Math.abs(end.x - start.x);\n        var height = Math.abs(end.y - start.y);\n        var maxRadius;\n        var center;\n\n        if (self.startAngle === -Math.PI && self.endAngle === 0) {\n          maxRadius = Math.min(width / 2, height);\n          center = {\n            x: (start.x + end.x) / 2,\n            y: start.y\n          };\n        } else {\n          maxRadius = Math.min(width, height) / 2;\n          center = {\n            x: (start.x + end.x) / 2,\n            y: (start.y + end.y) / 2\n          };\n        }\n\n        var radius = self.radius;\n\n        if (radius > 0 && radius <= 1) {\n          maxRadius = maxRadius * radius;\n        }\n\n        this.x = {\n          start: self.startAngle,\n          end: self.endAngle\n        };\n        this.y = {\n          start: maxRadius * inner,\n          end: maxRadius\n        };\n        this.center = center;\n        this.circleRadius = maxRadius; // the radius value in px\n      };\n\n      _proto._convertPoint = function _convertPoint(point) {\n        var self = this;\n        var center = self.center;\n        var transposed = self.transposed;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var x = self.x;\n        var y = self.y;\n        var angle = x.start + (x.end - x.start) * point[xDim];\n        var radius = y.start + (y.end - y.start) * point[yDim];\n        return {\n          x: center.x + Math.cos(angle) * radius,\n          y: center.y + Math.sin(angle) * radius\n        };\n      };\n\n      _proto._invertPoint = function _invertPoint(point) {\n        var self = this;\n        var center = self.center,\n            transposed = self.transposed,\n            x = self.x,\n            y = self.y;\n        var xDim = transposed ? 'y' : 'x';\n        var yDim = transposed ? 'x' : 'y';\n        var m = [1, 0, 0, 1, 0, 0];\n        Matrix.rotate(m, m, x.start);\n        var startV = [1, 0];\n        Vector2.transformMat2d(startV, startV, m);\n        startV = [startV[0], startV[1]];\n        var pointV = [point.x - center.x, point.y - center.y];\n\n        if (Vector2.zero(pointV)) {\n          return {\n            x: 0,\n            y: 0\n          };\n        }\n\n        var theta = Vector2.angleTo(startV, pointV, x.end < x.start);\n\n        if (Math.abs(theta - Math.PI * 2) < 0.001) {\n          theta = 0;\n        }\n\n        var l = Vector2.length(pointV);\n        var percentX = theta / (x.end - x.start);\n        percentX = x.end - x.start > 0 ? percentX : -percentX;\n        var percentY = (l - y.start) / (y.end - y.start);\n        var rst = {};\n        rst[xDim] = percentX;\n        rst[yDim] = percentY;\n        return rst;\n      };\n\n      return Polar;\n    }(Base$1);\n\n    Base$1.Polar = Polar;\n\n    var Circle$1 = /*#__PURE__*/function (_Abstract) {\n      _inheritsLoose(Circle, _Abstract);\n\n      function Circle() {\n        return _Abstract.apply(this, arguments) || this;\n      }\n\n      var _proto = Circle.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        _Abstract.prototype._initDefaultCfg.call(this);\n\n        this.startAngle = -Math.PI / 2; // start angle，in radian\n\n        this.endAngle = Math.PI * 3 / 2; // end angle, in radian\n\n        this.radius = null; // radius\n\n        this.center = null; // center\n      };\n\n      _proto.getOffsetPoint = function getOffsetPoint(value) {\n        var startAngle = this.startAngle,\n            endAngle = this.endAngle;\n        var angle = startAngle + (endAngle - startAngle) * value;\n        return this._getCirclePoint(angle);\n      };\n\n      _proto._getCirclePoint = function _getCirclePoint(angle, radius) {\n        var self = this;\n        var center = self.center;\n        radius = radius || self.radius;\n        return {\n          x: center.x + Math.cos(angle) * radius,\n          y: center.y + Math.sin(angle) * radius\n        };\n      };\n\n      _proto.getTextAlignInfo = function getTextAlignInfo(point, offset) {\n        var self = this;\n        var offsetVector = self.getOffsetVector(point, offset);\n        var align;\n        var baseLine = 'middle';\n\n        if (offsetVector[0] > 0) {\n          align = 'left';\n        } else if (offsetVector[0] < 0) {\n          align = 'right';\n        } else {\n          align = 'center';\n\n          if (offsetVector[1] > 0) {\n            baseLine = 'top';\n          } else if (offsetVector[1] < 0) {\n            baseLine = 'bottom';\n          }\n        }\n\n        return {\n          textAlign: align,\n          textBaseline: baseLine\n        };\n      };\n\n      _proto.getAxisVector = function getAxisVector(point) {\n        var center = this.center;\n        var factor = this.offsetFactor;\n        return [(point.y - center.y) * factor, (point.x - center.x) * -1 * factor];\n      };\n\n      _proto.drawLine = function drawLine(lineCfg) {\n        var center = this.center,\n            radius = this.radius,\n            startAngle = this.startAngle,\n            endAngle = this.endAngle;\n        var container = this.getContainer(lineCfg.top);\n        container.addShape('arc', {\n          className: 'axis-line',\n          attrs: mix({\n            x: center.x,\n            y: center.y,\n            r: radius,\n            startAngle: startAngle,\n            endAngle: endAngle\n          }, lineCfg)\n        });\n      };\n\n      return Circle;\n    }(Abastract);\n\n    Abastract.Circle = Circle$1;\n\n    var KEYWORDS_PERCENT = {\n      min: 0,\n      median: 0.5,\n      max: 1\n    };\n\n    var GuideBase = /*#__PURE__*/function () {\n      var _proto = GuideBase.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {};\n\n      function GuideBase(cfg) {\n        this._initDefaultCfg();\n\n        deepMix(this, cfg);\n      }\n\n      _proto._getNormalizedValue = function _getNormalizedValue(val, scale) {\n        var rst;\n\n        if (isNil(KEYWORDS_PERCENT[val])) {\n          rst = scale.scale(val);\n        } else {\n          rst = KEYWORDS_PERCENT[val];\n        }\n\n        return rst;\n      };\n\n      _proto.parsePercentPoint = function parsePercentPoint(coord, position) {\n        var xPercent = parseFloat(position[0]) / 100;\n        var yPercent = parseFloat(position[1]) / 100;\n        var start = coord.start;\n        var end = coord.end;\n        var width = Math.abs(start.x - end.x);\n        var height = Math.abs(start.y - end.y);\n        var x = width * xPercent + Math.min(start.x, end.x);\n        var y = height * yPercent + Math.min(start.y, end.y);\n        return {\n          x: x,\n          y: y\n        };\n      };\n\n      _proto.parsePoint = function parsePoint(coord, position) {\n        var self = this;\n        var xScale = self.xScale;\n        var yScales = self.yScales;\n\n        if (isFunction(position)) {\n          position = position(xScale, yScales); // position 必须是对象\n        } // 如果数据格式是 ['50%', '50%'] 的格式\n        // fix: 原始数据中可能会包含 'xxx5%xxx' 这样的数据，需要判断下 https://github.com/antvis/f2/issues/590\n\n\n        if (isString(position[0]) && position[0].indexOf('%') !== -1 && !isNaN(position[0].slice(0, -1))) {\n          return this.parsePercentPoint(coord, position);\n        }\n\n        var x = self._getNormalizedValue(position[0], xScale);\n\n        var y = self._getNormalizedValue(position[1], yScales[0]);\n\n        var point = coord.convertPoint({\n          x: x,\n          y: y\n        });\n\n        if (self.limitInPlot) {\n          // limit in chart plotRange\n          if (x >= 0 && x <= 1 && y >= 0 && y <= 1) {\n            return point;\n          }\n\n          return null;\n        }\n\n        return point;\n      }\n      /**\n       * render the guide component\n       * @param  {Coord} coord  coordinate instance\n       * @param  {Canvas.Group} group the container\n       */\n      ;\n\n      _proto.render = function render()\n      /* coord,group */\n      {};\n\n      _proto.repaint = function repaint() {\n        this.remove();\n        var coord = this.coord,\n            container = this.container,\n            canvas = this.canvas;\n\n        if (container && !container.isDestroyed()) {\n          this.render(coord, container);\n          canvas.draw();\n        }\n      };\n\n      _proto.remove = function remove() {\n        var element = this.element;\n        element && element.remove(true);\n      };\n\n      _proto.changeVisible = function changeVisible(visible) {\n        var self = this;\n        self.visible = visible;\n        var element = self.element;\n        if (!element) return;\n\n        if (element.set) {\n          element.set('visible', visible);\n        } else {\n          element.style.display = visible ? '' : 'none';\n        }\n      };\n\n      return GuideBase;\n    }();\n\n    var Arc$1 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Arc, _GuideBase);\n\n      function Arc() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Arc.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'arc';\n        /**\n         * start point\n         * @type {Array | Function}\n         */\n\n        this.start = [];\n        /**\n         * end point\n         * @type {Array | Function}\n         */\n\n        this.end = [];\n        /**\n         * style configuration\n         * @type {Object}\n         */\n\n        this.style = {\n          stroke: '#999',\n          lineWidth: 1\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var self = this;\n        var start = self.parsePoint(coord, self.start);\n        var end = self.parsePoint(coord, self.end);\n\n        if (!start || !end) {\n          return;\n        }\n\n        var coordCenter = coord.center;\n        var radius = Math.sqrt((start.x - coordCenter.x) * (start.x - coordCenter.x) + (start.y - coordCenter.y) * (start.y - coordCenter.y));\n        var startAngle = Math.atan2(start.y - coordCenter.y, start.x - coordCenter.x);\n        var endAngle = Math.atan2(end.y - coordCenter.y, end.x - coordCenter.x);\n        var shape = container.addShape('arc', {\n          className: 'guide-arc',\n          attrs: mix({\n            x: coordCenter.x,\n            y: coordCenter.y,\n            r: radius,\n            startAngle: startAngle,\n            endAngle: endAngle\n          }, self.style)\n        });\n        self.element = shape;\n        return shape;\n      };\n\n      return Arc;\n    }(GuideBase);\n\n    GuideBase.Arc = Arc$1;\n\n    function getOffsetFromAlign(alignX, alignY, width, height) {\n      var result = [];\n\n      if (alignX === 'left' && alignY === 'top') {\n        result[0] = 0;\n        result[1] = 0;\n      } else if (alignX === 'right' && alignY === 'top') {\n        result[0] = -width;\n        result[1] = 0;\n      } else if (alignX === 'left' && alignY === 'bottom') {\n        result[0] = 0;\n        result[1] = Math.floor(-height);\n      } else if (alignX === 'right' && alignY === 'bottom') {\n        result[0] = Math.floor(-width);\n        result[1] = Math.floor(-height);\n      } else if (alignX === 'right' && alignY === 'middle') {\n        result[0] = Math.floor(-width);\n        result[1] = Math.floor(-height / 2);\n      } else if (alignX === 'left' && alignY === 'middle') {\n        result[0] = 0;\n        result[1] = Math.floor(-height / 2);\n      } else if (alignX === 'center' && alignY === 'bottom') {\n        result[0] = Math.floor(-width / 2);\n        result[1] = Math.floor(-height);\n      } else if (alignX === 'center' && alignY === 'top') {\n        result[0] = Math.floor(-width / 2);\n        result[1] = 0;\n      } else {\n        result[0] = Math.floor(-width / 2);\n        result[1] = Math.floor(-height / 2);\n      }\n\n      return result;\n    }\n\n    function modifyCSS(DOM, CSS) {\n      for (var key in CSS) {\n        if (CSS.hasOwnProperty(key)) {\n          DOM.style[key] = CSS[key];\n        }\n      }\n\n      return DOM;\n    }\n\n    function createDom(str) {\n      var container = document.createElement('div');\n      str = str.replace(/(^\\s*)|(\\s*$)/g, '');\n      container.innerHTML = '' + str;\n      return container.childNodes[0];\n    }\n\n    var Html = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Html, _GuideBase);\n\n      function Html() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Html.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'html';\n        /**\n         * dom position\n         * @type {Object | Array}\n         */\n\n        this.position = null;\n        /**\n          * alignment for horizontal direction，can be 'left','center','right'\n          * @type {String}\n          */\n\n        this.alignX = 'center';\n        /**\n          * alignment for vertical direction，can be 'top', 'middle', 'bottom'\n          * @type {String}\n          */\n\n        this.alignY = 'middle';\n        /**\n          * offset for horizontal direction\n          * @type {Number}\n          */\n\n        this.offsetX = null;\n        /**\n          * offset for vertical direction\n          * @type {Number}\n          */\n\n        this.offsetY = null;\n        /**\n        * the html string\n        *@type {String | Function}\n        */\n\n        this.html = null;\n      } // override paint\n      ;\n\n      _proto.render = function render(coord, container) {\n        var self = this;\n        var position = self.parsePoint(coord, self.position);\n\n        if (!position) {\n          return;\n        }\n\n        var myNode = createDom(self.html);\n        myNode = modifyCSS(myNode, {\n          position: 'absolute',\n          top: Math.floor(position.y) + 'px',\n          left: Math.floor(position.x) + 'px',\n          visibility: 'hidden'\n        });\n        var canvasDom = container.get('canvas').get('el');\n        var parentNode = canvasDom.parentNode;\n        parentNode = modifyCSS(parentNode, {\n          position: 'relative'\n        });\n        var wrapperNode = createDom('<div class=\"guideWapper\" style=\"position: absolute;top: 0; left: 0;\"></div>');\n        parentNode.appendChild(wrapperNode);\n        wrapperNode.appendChild(myNode);\n        var canvasOffsetTop = canvasDom.offsetTop;\n        var canvasOffsetLeft = canvasDom.offsetLeft;\n        var alignX = self.alignX,\n            alignY = self.alignY,\n            offsetX = self.offsetX,\n            offsetY = self.offsetY;\n        var width = getWidth(myNode);\n        var height = getHeight(myNode);\n        var newOffset = getOffsetFromAlign(alignX, alignY, width, height);\n        position.x = position.x + newOffset[0] + canvasOffsetLeft;\n        position.y = position.y + newOffset[1] + canvasOffsetTop;\n\n        if (offsetX) {\n          position.x += offsetX;\n        }\n\n        if (offsetY) {\n          position.y += offsetY;\n        }\n\n        modifyCSS(myNode, {\n          top: Math.floor(position.y) + 'px',\n          left: Math.floor(position.x) + 'px',\n          visibility: 'visible'\n        });\n        self.element = wrapperNode;\n      };\n\n      _proto.remove = function remove() {\n        var element = this.element;\n        element && element.parentNode && element.parentNode.removeChild(element);\n      };\n\n      return Html;\n    }(GuideBase);\n\n    GuideBase.Html = Html;\n\n    var Line$4 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Line, _GuideBase);\n\n      function Line() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Line.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'line';\n        this.start = [];\n        this.end = [];\n        this.style = {\n          stroke: '#000',\n          lineWidth: 1\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var points = [];\n        points[0] = this.parsePoint(coord, this.start);\n        points[1] = this.parsePoint(coord, this.end);\n\n        if (!points[0] || !points[1]) {\n          return;\n        }\n\n        var shape = container.addShape('Line', {\n          className: 'guide-line',\n          attrs: mix({\n            x1: points[0].x,\n            y1: points[0].y,\n            x2: points[1].x,\n            y2: points[1].y\n          }, this.style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Line;\n    }(GuideBase);\n\n    GuideBase.Line = Line$4;\n\n    var Rect$2 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Rect, _GuideBase);\n\n      function Rect() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Rect.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'rect';\n        this.start = [];\n        this.end = [];\n        this.style = {\n          fill: '#CCD7EB',\n          opacity: 0.4\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var start = this.parsePoint(coord, this.start);\n        var end = this.parsePoint(coord, this.end);\n\n        if (!start || !end) {\n          return;\n        }\n\n        var shape = container.addShape('rect', {\n          className: 'guide-rect',\n          attrs: mix({\n            x: Math.min(start.x, end.x),\n            y: Math.min(start.y, end.y),\n            width: Math.abs(end.x - start.x),\n            height: Math.abs(start.y - end.y)\n          }, this.style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Rect;\n    }(GuideBase);\n\n    GuideBase.Rect = Rect$2;\n\n    var Text$1 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Text, _GuideBase);\n\n      function Text() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Text.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'text';\n        /**\n         * the position of text\n         * @type {Function | Array}\n         */\n\n        this.position = null;\n        /**\n         * the display content\n         * @type {String}\n         */\n\n        this.content = null;\n        /**\n         * style configuration for text\n         * @type {Object}\n         */\n\n        this.style = {\n          fill: '#000'\n        };\n        /**\n         * offset of horizontal direction\n         * @type {Number}\n         */\n\n        this.offsetX = 0;\n        /**\n         * offset of vertical direction\n         * @type {Number}\n         */\n\n        this.offsetY = 0;\n      };\n\n      _proto.render = function render(coord, container) {\n        var position = this.position;\n        var point = this.parsePoint(coord, position);\n\n        if (!point) {\n          return;\n        }\n\n        var content = this.content,\n            style = this.style,\n            offsetX = this.offsetX,\n            offsetY = this.offsetY;\n\n        if (offsetX) {\n          point.x += offsetX;\n        }\n\n        if (offsetY) {\n          point.y += offsetY;\n        }\n\n        var shape = container.addShape('text', {\n          className: 'guide-text',\n          attrs: mix({\n            x: point.x,\n            y: point.y,\n            text: content\n          }, style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Text;\n    }(GuideBase);\n\n    GuideBase.Text = Text$1;\n\n    var Tag = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Tag, _GuideBase);\n\n      function Tag() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Tag.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'tag';\n        this.position = null;\n        this.content = null;\n        this.direct = 'tl';\n        this.autoAdjust = true;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.side = 4;\n        this.background = {\n          padding: 5,\n          radius: 2,\n          fill: '#1890FF'\n        };\n        this.textStyle = {\n          fontSize: 12,\n          fill: '#fff',\n          textAlign: 'center',\n          textBaseline: 'middle'\n        };\n        this.withPoint = true;\n        this.pointStyle = {\n          fill: '#1890FF',\n          r: 3,\n          lineWidth: 1,\n          stroke: '#fff'\n        };\n      };\n\n      _proto._getDirect = function _getDirect(container, point, tagWidth, tagHeight) {\n        var direct = this.direct;\n        var side = this.side;\n        var canvas = container.get('canvas');\n        var clientWidth = canvas.get('width');\n        var clientHeight = canvas.get('height');\n        var x = point.x,\n            y = point.y;\n        var vertical = direct[0];\n        var horizontal = direct[1]; // adjust for vertical direction\n\n        if (vertical === 't' && y - side - tagHeight < 0) {\n          vertical = 'b';\n        } else if (vertical === 'b' && y + side + tagHeight > clientHeight) {\n          vertical = 't';\n        } // adjust for horizontal direction\n\n\n        var diff = vertical === 'c' ? side : 0;\n\n        if (horizontal === 'l' && x - diff - tagWidth < 0) {\n          horizontal = 'r';\n        } else if (horizontal === 'r' && x + diff + tagWidth > clientWidth) {\n          horizontal = 'l';\n        } else if (horizontal === 'c') {\n          if (tagWidth / 2 + x + diff > clientWidth) {\n            horizontal = 'l';\n          } else if (x - tagWidth / 2 - diff < 0) {\n            horizontal = 'r';\n          }\n        }\n\n        direct = vertical + horizontal;\n        return direct;\n      };\n\n      _proto.render = function render(coord, container) {\n        var position = this.parsePoint(coord, this.position);\n\n        if (!position) {\n          return;\n        } // 数据不在显示范围内时，x/y 会为NaN\n\n\n        if (isNaN(position.x) || isNaN(position.y)) {\n          return;\n        }\n\n        var content = this.content,\n            background = this.background,\n            textStyle = this.textStyle;\n        var shapes = [];\n        var wrapperContainer = container.addGroup({\n          className: 'guide-tag'\n        });\n\n        if (this.withPoint) {\n          var pointShape = wrapperContainer.addShape('Circle', {\n            className: 'guide-tag-point',\n            attrs: mix({\n              x: position.x,\n              y: position.y\n            }, this.pointStyle)\n          });\n          shapes.push(pointShape);\n        }\n\n        var tagContainer = wrapperContainer.addGroup(); // create a text shape\n\n        var tagText = tagContainer.addShape('text', {\n          className: 'guide-tag-text',\n          zIndex: 1,\n          attrs: mix({\n            x: 0,\n            y: 0,\n            text: content\n          }, textStyle)\n        });\n        shapes.push(tagText); // create background box\n\n        var textBBox = tagText.getBBox();\n        var padding = parsePadding(background.padding);\n        var tagWidth = textBBox.width + padding[1] + padding[3];\n        var tagHeight = textBBox.height + padding[0] + padding[2];\n        var yMin = textBBox.minY - padding[0];\n        var xMin = textBBox.minX - padding[3];\n        var tagBg = tagContainer.addShape('rect', {\n          className: 'guide-tag-bg',\n          zIndex: -1,\n          attrs: mix({\n            x: xMin,\n            y: yMin,\n            width: tagWidth,\n            height: tagHeight\n          }, background)\n        });\n        shapes.push(tagBg);\n        var direct = this.autoAdjust ? this._getDirect(container, position, tagWidth, tagHeight) : this.direct;\n        var side = this.side;\n        var x = position.x + this.offsetX;\n        var y = position.y + this.offsetY;\n        var arrowPoints;\n        var radius = parsePadding(background.radius);\n\n        if (direct === 'tl') {\n          arrowPoints = [{\n            x: tagWidth + xMin - side - 1,\n            y: tagHeight + yMin - 1\n          }, // 这个 1 是为了防止出现白边\n          {\n            x: tagWidth + xMin,\n            y: tagHeight + yMin - 1\n          }, {\n            x: tagWidth + xMin,\n            y: tagHeight + side + yMin\n          }];\n          radius[2] = 0;\n          x = x - tagWidth;\n          y = y - side - tagHeight;\n        } else if (direct === 'cl') {\n          arrowPoints = [{\n            x: tagWidth + xMin - 1,\n            y: (tagHeight - side) / 2 + yMin - 1\n          }, {\n            x: tagWidth + xMin - 1,\n            y: (tagHeight + side) / 2 + yMin + 1\n          }, {\n            x: tagWidth + side + xMin,\n            y: tagHeight / 2 + yMin\n          }];\n          x = x - tagWidth - side;\n          y = y - tagHeight / 2;\n        } else if (direct === 'bl') {\n          arrowPoints = [{\n            x: tagWidth + xMin,\n            y: -side + yMin\n          }, {\n            x: tagWidth + xMin - side - 1,\n            y: yMin + 1\n          }, {\n            x: tagWidth + xMin,\n            y: yMin + 1\n          }];\n          radius[1] = 0;\n          x = x - tagWidth;\n          y = y + side;\n        } else if (direct === 'bc') {\n          arrowPoints = [{\n            x: tagWidth / 2 + xMin,\n            y: -side + yMin\n          }, {\n            x: (tagWidth - side) / 2 + xMin - 1,\n            y: yMin + 1\n          }, {\n            x: (tagWidth + side) / 2 + xMin + 1,\n            y: yMin + 1\n          }];\n          x = x - tagWidth / 2;\n          y = y + side;\n        } else if (direct === 'br') {\n          arrowPoints = [{\n            x: xMin,\n            y: yMin - side\n          }, {\n            x: xMin,\n            y: yMin + 1\n          }, {\n            x: xMin + side + 1,\n            y: yMin + 1\n          }];\n          radius[0] = 0;\n          y = y + side;\n        } else if (direct === 'cr') {\n          arrowPoints = [{\n            x: xMin - side,\n            y: tagHeight / 2 + yMin\n          }, {\n            x: xMin + 1,\n            y: (tagHeight - side) / 2 + yMin - 1\n          }, {\n            x: xMin + 1,\n            y: (tagHeight + side) / 2 + yMin + 1\n          }];\n          x = x + side;\n          y = y - tagHeight / 2;\n        } else if (direct === 'tr') {\n          arrowPoints = [{\n            x: xMin,\n            y: tagHeight + side + yMin\n          }, {\n            x: xMin,\n            y: tagHeight + yMin - 1\n          }, {\n            x: side + xMin + 1,\n            y: tagHeight + yMin - 1\n          }];\n          radius[3] = 0;\n          y = y - tagHeight - side;\n        } else if (direct === 'tc') {\n          arrowPoints = [{\n            x: (tagWidth - side) / 2 + xMin - 1,\n            y: tagHeight + yMin - 1\n          }, {\n            x: (tagWidth + side) / 2 + xMin + 1,\n            y: tagHeight + yMin - 1\n          }, {\n            x: tagWidth / 2 + xMin,\n            y: tagHeight + side + yMin\n          }];\n          x = x - tagWidth / 2;\n          y = y - tagHeight - side;\n        }\n\n        var sideShape = tagContainer.addShape('Polygon', {\n          className: 'guide-tag-side',\n          zIndex: 0,\n          attrs: {\n            points: arrowPoints,\n            fill: background.fill\n          }\n        });\n        shapes.push(sideShape);\n        tagBg.attr('radius', radius);\n        tagContainer.moveTo(x - xMin, y - yMin);\n        tagContainer.sort();\n        this.element = wrapperContainer;\n        return shapes;\n      };\n\n      return Tag;\n    }(GuideBase);\n\n    GuideBase.Tag = Tag;\n\n    var Point$2 = /*#__PURE__*/function (_GuideBase) {\n      _inheritsLoose(Point, _GuideBase);\n\n      function Point() {\n        return _GuideBase.apply(this, arguments) || this;\n      }\n\n      var _proto = Point.prototype;\n\n      _proto._initDefaultCfg = function _initDefaultCfg() {\n        this.type = 'point';\n        this.position = null;\n        this.offsetX = 0;\n        this.offsetY = 0;\n        this.style = {\n          fill: '#1890FF',\n          r: 3,\n          lineWidth: 1,\n          stroke: '#fff'\n        };\n      };\n\n      _proto.render = function render(coord, container) {\n        var position = this.parsePoint(coord, this.position);\n        if (!position) return null;\n        var shape = container.addShape('Circle', {\n          className: 'guide-point',\n          attrs: mix({\n            x: position.x + this.offsetX,\n            y: position.y + this.offsetY\n          }, this.style)\n        });\n        this.element = shape;\n        return shape;\n      };\n\n      return Point;\n    }(GuideBase);\n\n    GuideBase.Point = Point$2;\n\n    var SYMBOLS = {\n      circle: function circle(x, y, r, ctx) {\n        ctx.arc(x, y, r, 0, Math.PI * 2, false);\n      },\n      square: function square(x, y, r, ctx) {\n        ctx.moveTo(x - r, y - r);\n        ctx.lineTo(x + r, y - r);\n        ctx.lineTo(x + r, y + r);\n        ctx.lineTo(x - r, y + r);\n        ctx.closePath();\n      }\n    };\n\n    var Marker = /*#__PURE__*/function (_Shape) {\n      _inheritsLoose(Marker, _Shape);\n\n      function Marker() {\n        return _Shape.apply(this, arguments) || this;\n      }\n\n      var _proto = Marker.prototype;\n\n      _proto._initProperties = function _initProperties() {\n        _Shape.prototype._initProperties.call(this);\n\n        this._attrs.canFill = true;\n        this._attrs.canStroke = true;\n        this._attrs.type = 'marker';\n      };\n\n      _proto.getDefaultAttrs = function getDefaultAttrs() {\n        return {\n          x: 0,\n          y: 0,\n          lineWidth: 0\n        };\n      };\n\n      _proto.createPath = function createPath(context) {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            radius = attrs.radius;\n        var symbol = attrs.symbol || 'circle';\n        var method;\n\n        if (isFunction(symbol)) {\n          method = symbol;\n        } else {\n          method = SYMBOLS[symbol];\n        }\n\n        context.beginPath();\n        method(x, y, radius, context, this);\n      };\n\n      _proto.calculateBox = function calculateBox() {\n        var attrs = this.get('attrs');\n        var x = attrs.x,\n            y = attrs.y,\n            radius = attrs.radius;\n        return {\n          minX: x - radius,\n          minY: y - radius,\n          maxX: x + radius,\n          maxY: y + radius\n        };\n      };\n\n      return Marker;\n    }(Shape$2);\n\n    var MARKER_RADIUS = 3;\n\n    var List = /*#__PURE__*/function () {\n      var _proto = List.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          showTitle: false,\n\n          /**\n           * title string\n           * @type {?String}\n           */\n          title: null,\n\n          /**\n           * items array\n           * @type {?Array}\n           */\n          items: null,\n\n          /**\n           * offset between title and items\n           * @type {Number}\n           */\n          titleGap: 12,\n\n          /**\n           * offset between each item\n           * @type {Number}\n           */\n          itemGap: 10,\n\n          /**\n           * the offset between each item in vertical direaction\n           * @type {Number}\n           */\n          itemMarginBottom: 12,\n\n          /**\n           * the formatter for item text\n           * @type {[type]}\n           */\n          itemFormatter: null,\n          itemWidth: null,\n\n          /**\n           * offset between marker and text\n           * @type {Number}\n           */\n          wordSpace: 6,\n          x: 0,\n          y: 0,\n          layout: 'horizontal',\n\n          /**\n           * the join string of `name` and `value`\n           * @type {String}\n           */\n          joinString: ': '\n        };\n      };\n\n      function List(cfg) {\n        deepMix(this, this.getDefaultCfg(), cfg);\n\n        this._init();\n\n        this._renderTitle();\n\n        this._renderItems();\n      }\n\n      _proto._init = function _init() {\n        var container = new Group({\n          zIndex: this.zIndex || 0\n        });\n        this.container = container;\n        var wrapper = container.addGroup();\n        this.wrapper = wrapper;\n        var itemsGroup = wrapper.addGroup({\n          className: 'itemsGroup'\n        });\n        this.itemsGroup = itemsGroup;\n\n        if (this.parent) {\n          this.parent.add(container);\n        }\n      };\n\n      _proto._renderTitle = function _renderTitle(title) {\n        title = title || this.title;\n        var titleShape = this.titleShape;\n        var titleHeight = 0;\n\n        if (this.showTitle && title) {\n          if (titleShape && !titleShape.get('destroyed')) {\n            titleShape.attr('text', title);\n          } else {\n            var wrapper = this.wrapper,\n                titleStyle = this.titleStyle;\n            titleShape = wrapper.addShape('text', {\n              className: 'title',\n              attrs: mix({\n                x: 0,\n                y: 0,\n                text: title\n              }, titleStyle)\n            });\n            this.titleShape = titleShape;\n          }\n\n          titleHeight = titleShape.getBBox().height + this.titleGap;\n        }\n\n        this._titleHeight = titleHeight;\n      };\n\n      _proto._renderItems = function _renderItems(items) {\n        var self = this;\n        items = items || self.items;\n\n        if (!items) {\n          return;\n        }\n\n        if (self.reversed) {\n          items.reverse();\n        }\n\n        each(items, function (item, index) {\n          self._addItem(item, index);\n        });\n\n        if (items.length > 1) {\n          this._adjustItems();\n        }\n\n        this._renderBackground();\n      };\n\n      _proto._renderBackground = function _renderBackground() {\n        var background = this.background;\n\n        if (background) {\n          var container = this.container;\n          var wrapper = this.wrapper;\n\n          var _wrapper$getBBox = wrapper.getBBox(),\n              minX = _wrapper$getBBox.minX,\n              minY = _wrapper$getBBox.minY,\n              width = _wrapper$getBBox.width,\n              height = _wrapper$getBBox.height;\n\n          var padding = background.padding || [0, 0, 0, 0];\n          padding = parsePadding(padding);\n          var attrs = mix({\n            x: minX - padding[3],\n            y: minY - padding[0],\n            width: width + padding[1] + padding[3],\n            height: height + padding[0] + padding[2]\n          }, background);\n          var backShape = this.backShape;\n\n          if (backShape) {\n            backShape.attr(attrs);\n          } else {\n            backShape = container.addShape('Rect', {\n              zIndex: -1,\n              attrs: attrs\n            });\n          }\n\n          this.backShape = backShape;\n          container.sort();\n        }\n      };\n\n      _proto._addItem = function _addItem(item) {\n        var itemsGroup = this.itemsGroup;\n        var itemGroup = itemsGroup.addGroup({\n          name: item.name,\n          value: item.value,\n          dataValue: item.dataValue,\n          checked: item.checked\n        });\n        var unCheckStyle = this.unCheckStyle,\n            unCheckColor = this.unCheckColor,\n            nameStyle = this.nameStyle,\n            valueStyle = this.valueStyle,\n            wordSpace = this.wordSpace;\n        var marker = item.marker,\n            value = item.value;\n        var startX = 0;\n\n        if (unCheckColor) {\n          unCheckStyle.fill = unCheckColor;\n        }\n\n        if (marker) {\n          var radius = marker.radius || MARKER_RADIUS;\n          var markerAttrs = mix({\n            x: radius,\n            y: this._titleHeight\n          }, marker);\n\n          if (item.checked === false) {\n            mix(markerAttrs, unCheckStyle);\n          }\n\n          var markerShape = new Marker({\n            className: 'item-marker',\n            attrs: markerAttrs\n          });\n          itemGroup.add(markerShape);\n          startX += markerShape.getBBox().width + wordSpace;\n        }\n\n        var nameText;\n        var name = item.name;\n\n        if (name) {\n          var joinString = this.joinString || '';\n          name = value ? name + joinString : name;\n          nameText = itemGroup.addShape('text', {\n            className: 'name',\n            attrs: mix({\n              x: startX,\n              y: this._titleHeight,\n              text: this._formatItemValue(name)\n            }, nameStyle, item.checked === false ? unCheckStyle : null)\n          });\n        }\n\n        if (value) {\n          var valueX = startX;\n\n          if (nameText) {\n            valueX += nameText.getBBox().width;\n          }\n\n          itemGroup.addShape('text', {\n            className: 'value',\n            attrs: mix({\n              x: valueX,\n              y: this._titleHeight,\n              text: value\n            }, valueStyle, item.checked === false ? unCheckStyle : null)\n          });\n        }\n\n        return itemGroup;\n      };\n\n      _proto._formatItemValue = function _formatItemValue(value) {\n        var formatter = this.itemFormatter;\n\n        if (formatter) {\n          value = formatter.call(this, value);\n        }\n\n        return value;\n      };\n\n      _proto._getMaxItemWidth = function _getMaxItemWidth() {\n        var width;\n        var itemWidth = this.itemWidth;\n\n        if (isNumber(itemWidth) || isNil(itemWidth)) {\n          return itemWidth;\n        }\n\n        if (itemWidth === 'auto') {\n          var itemsGroup = this.itemsGroup;\n          var children = itemsGroup.get('children');\n          var count = children.length;\n          var maxItemWidth = 0;\n\n          for (var i = 0; i < count; i++) {\n            var _children$i$getBBox = children[i].getBBox(),\n                _width = _children$i$getBBox.width;\n\n            maxItemWidth = Math.max(maxItemWidth, _width);\n          }\n\n          var maxLength = this.maxLength;\n          var itemGap = this.itemGap;\n          var twoAvgWidth = (maxLength - itemGap) / 2;\n          var threeAvgWidth = (maxLength - itemGap * 2) / 3;\n\n          if (count === 2) {\n            width = Math.max(maxItemWidth, twoAvgWidth);\n          } else {\n            // 1. max <= 3Avg, 3Avg\n            // 2. 3Avg < max && max < 2avg, 2avg\n            // 3. max > 2avg, max, one column\n            if (maxItemWidth <= threeAvgWidth) {\n              width = threeAvgWidth;\n            } else if (maxItemWidth <= twoAvgWidth) {\n              width = twoAvgWidth;\n            } else {\n              width = maxItemWidth;\n            }\n          }\n\n          return width;\n        }\n      };\n\n      _proto._adjustHorizontal = function _adjustHorizontal() {\n        var maxLength = this.maxLength,\n            itemsGroup = this.itemsGroup;\n        var children = itemsGroup.get('children');\n        var itemGap = this.itemGap,\n            itemMarginBottom = this.itemMarginBottom;\n        var titleHeight = this._titleHeight;\n        var row = 0;\n        var rowWidth = 0;\n        var width;\n        var height;\n\n        var itemWidth = this._getMaxItemWidth();\n\n        var legendHitBoxes = [];\n\n        for (var i = 0, len = children.length; i < len; i++) {\n          var child = children[i];\n          var box = child.getBBox();\n          var childHeight = box.height;\n          var childWidth = box.width;\n          width = itemWidth || childWidth;\n          height = childHeight + itemMarginBottom;\n\n          if (width - (maxLength - rowWidth) > 0.0001) {\n            row++;\n            rowWidth = 0;\n          }\n\n          child.moveTo(rowWidth, row * height);\n          legendHitBoxes.push({\n            x: rowWidth,\n            y: row * height + titleHeight - childHeight / 2,\n            width: childWidth * 1.375,\n            height: childHeight * 1.375\n          });\n          rowWidth += width + itemGap;\n        }\n\n        this.legendHitBoxes = legendHitBoxes;\n        return;\n      };\n\n      _proto._adjustVertical = function _adjustVertical() {\n        var maxLength = this.maxLength,\n            itemsGroup = this.itemsGroup;\n        var itemGap = this.itemGap,\n            itemMarginBottom = this.itemMarginBottom,\n            itemWidth = this.itemWidth;\n        var titleHeight = this._titleHeight;\n        var children = itemsGroup.get('children');\n        var colHeight = 0;\n        var width;\n        var height;\n        var maxItemWidth = 0;\n        var totalWidth = 0;\n        var legendHitBoxes = [];\n\n        for (var i = 0, length = children.length; i < length; i++) {\n          var child = children[i];\n          var bbox = child.getBBox();\n          width = bbox.width;\n          height = bbox.height;\n\n          if (isNumber(itemWidth)) {\n            maxItemWidth = itemWidth + itemGap;\n          } else if (width > maxItemWidth) {\n            maxItemWidth = width + itemGap;\n          }\n\n          if (maxLength - colHeight < height) {\n            colHeight = 0;\n            totalWidth += maxItemWidth;\n            child.moveTo(totalWidth, 0);\n            legendHitBoxes.push({\n              x: totalWidth,\n              y: titleHeight - height / 2,\n              width: width * 1.375,\n              height: height * 1.375\n            });\n          } else {\n            child.moveTo(totalWidth, colHeight);\n            legendHitBoxes.push({\n              x: totalWidth,\n              y: colHeight - height / 2 + titleHeight,\n              width: width * 1.375,\n              height: height * 1.375\n            });\n          }\n\n          colHeight += height + itemMarginBottom;\n        }\n\n        this.legendHitBoxes = legendHitBoxes;\n        return;\n      };\n\n      _proto._adjustItems = function _adjustItems() {\n        var layout = this.layout;\n\n        if (layout === 'horizontal') {\n          this._adjustHorizontal();\n        } else {\n          this._adjustVertical();\n        }\n      };\n\n      _proto.moveTo = function moveTo(x, y) {\n        this.x = x;\n        this.y = y;\n        var container = this.container;\n        container && container.moveTo(x, y);\n        return this;\n      };\n\n      _proto.setItems = function setItems(items) {\n        this.clearItems();\n\n        this._renderItems(items);\n      };\n\n      _proto.setTitle = function setTitle(title) {\n        this._renderTitle(title);\n      };\n\n      _proto.clearItems = function clearItems() {\n        var itemsGroup = this.itemsGroup;\n        itemsGroup.clear();\n      };\n\n      _proto.getWidth = function getWidth() {\n        var container = this.container;\n        var bbox = container.getBBox();\n        return bbox.width;\n      };\n\n      _proto.getHeight = function getHeight() {\n        var container = this.container;\n        var bbox = container.getBBox();\n        return bbox.height;\n      };\n\n      _proto.show = function show() {\n        var container = this.container;\n        container.show();\n      };\n\n      _proto.hide = function hide() {\n        var container = this.container;\n        container.hide();\n      };\n\n      _proto.clear = function clear() {\n        var container = this.container;\n        container.clear();\n        container.remove(true);\n      };\n\n      return List;\n    }();\n\n    var TextBox = /*#__PURE__*/function () {\n      var _proto = TextBox.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          x: 0,\n          y: 0,\n          content: '',\n          textStyle: {\n            fontSize: 12,\n            fill: '#fff',\n            textAlign: 'center',\n            textBaseline: 'middle',\n            fontFamily: 'Arial'\n          },\n          background: {\n            radius: 1,\n            fill: 'rgba(0, 0, 0, 0.65)',\n            padding: [3, 5]\n          },\n          width: 0,\n          height: 0,\n          className: ''\n        };\n      };\n\n      function TextBox(cfg) {\n        deepMix(this, this.getDefaultCfg(), cfg);\n\n        this._init();\n\n        var content = this.content,\n            x = this.x,\n            y = this.y;\n\n        if (!isNil(content)) {\n          this.updateContent(content);\n        }\n\n        this.updatePosition(x, y);\n      }\n\n      _proto._init = function _init() {\n        var content = this.content,\n            textStyle = this.textStyle,\n            background = this.background,\n            className = this.className,\n            visible = this.visible,\n            context = this.context;\n        var container = new Group({\n          context: context,\n          className: className,\n          zIndex: 0,\n          visible: visible\n        });\n        var text = container.addShape('Text', {\n          className: className + '-text',\n          zIndex: 1,\n          attrs: mix({\n            text: content,\n            x: 0,\n            y: 0\n          }, textStyle)\n        });\n        var backgroundShape = container.addShape('Rect', {\n          className: className + '-bg',\n          zIndex: -1,\n          attrs: mix({\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0\n          }, background)\n        });\n        container.sort();\n        this.container = container;\n        this.textShape = text;\n        this.backgroundShape = backgroundShape;\n      };\n\n      _proto._getBBox = function _getBBox() {\n        var textShape = this.textShape;\n        var background = this.background;\n        var textBBox = textShape.getBBox();\n        var padding = parsePadding(background.padding);\n        var width = textBBox.width + padding[1] + padding[3];\n        var height = textBBox.height + padding[0] + padding[2];\n        var x = textBBox.minX - padding[3];\n        var y = textBBox.minY - padding[0];\n        return {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        };\n      };\n\n      _proto.updateContent = function updateContent(text) {\n        var textShape = this.textShape,\n            backgroundShape = this.backgroundShape;\n\n        if (!isNil(text)) {\n          if (!isObject(text)) {\n            text = {\n              text: text\n            };\n          }\n\n          textShape.attr(text); // update box shape\n\n          var _this$_getBBox = this._getBBox(),\n              x = _this$_getBBox.x,\n              y = _this$_getBBox.y,\n              tipWidth = _this$_getBBox.width,\n              tipHeight = _this$_getBBox.height;\n\n          var width = this.width || tipWidth;\n          var height = this.height || tipHeight;\n          backgroundShape.attr({\n            x: x,\n            y: y,\n            width: width,\n            height: height\n          });\n          this._width = width;\n          this._height = height;\n          this.content = text.text;\n        }\n      };\n\n      _proto.updatePosition = function updatePosition(x, y) {\n        var container = this.container;\n\n        var _this$_getBBox2 = this._getBBox(),\n            xMin = _this$_getBBox2.x,\n            yMin = _this$_getBBox2.y;\n\n        container.moveTo(x - xMin, y - yMin);\n        this.x = x - xMin;\n        this.y = y - yMin;\n      };\n\n      _proto.getWidth = function getWidth() {\n        return this._width;\n      };\n\n      _proto.getHeight = function getHeight() {\n        return this._height;\n      };\n\n      _proto.show = function show() {\n        this.container.show();\n      };\n\n      _proto.hide = function hide() {\n        this.container.hide();\n      };\n\n      _proto.clear = function clear() {\n        var container = this.container;\n        container.clear();\n        container.remove(true);\n        this.container = null;\n        this.textShape = null;\n        this.backgroundShape = null;\n      };\n\n      return TextBox;\n    }();\n\n    var GAP = 4;\n    /**\n     * TODOList：\n     * 1. 移除 fixed 参数\n     */\n\n    var Tooltip = /*#__PURE__*/function () {\n      var _proto = Tooltip.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          /**\n           * wether show the crosshairs\n           * @type {Object}\n           */\n          showCrosshairs: false,\n\n          /**\n           * the style for crosshairs\n           * @type {Object}\n           */\n          crosshairsStyle: {\n            stroke: 'rgba(0, 0, 0, 0.25)',\n            lineWidth: 1\n          },\n\n          /**\n           * the type of crosshairs, optional value is 'x', 'y' or 'xy', default is 'y'\n           */\n          crosshairsType: 'y',\n\n          /**\n           * show or hide the x axis tip\n           */\n          showXTip: false,\n\n          /**\n           * show or hide the y axis tip\n           */\n          showYTip: false,\n          xTip: null,\n          xTipBackground: {\n            radius: 1,\n            fill: 'rgba(0, 0, 0, 0.65)',\n            padding: [3, 5]\n          },\n          xTipTextStyle: {\n            fontSize: 12,\n            fill: '#fff',\n            textAlign: 'center',\n            textBaseline: 'middle'\n          },\n          yTip: null,\n          yTipBackground: {\n            radius: 1,\n            fill: 'rgba(0, 0, 0, 0.65)',\n            padding: [3, 5]\n          },\n          yTipTextStyle: {\n            fontSize: 12,\n            fill: '#fff',\n            textAlign: 'center',\n            textBaseline: 'middle'\n          },\n\n          /**\n           * the style for tooltip container's background\n           * @type {Object}\n           */\n          background: null,\n\n          /**\n           * layout, can be horizontal or vertical\n           * @type {String}\n           */\n          layout: 'horizontal',\n          offsetX: 0,\n          offsetY: 0\n        };\n      };\n\n      function Tooltip(cfg) {\n        deepMix(this, this.getDefaultCfg(), cfg);\n        var frontPlot = this.frontPlot,\n            custom = this.custom;\n\n        if (!custom) {\n          // custom means user do customize\n          var container = new List(mix({\n            parent: frontPlot,\n            zIndex: 3\n          }, cfg));\n          this.container = container;\n          var fixed = this.fixed,\n              background = this.background;\n\n          if (!fixed) {\n            this.tooltipArrow = frontPlot.addShape('Polygon', {\n              className: 'tooltip-arrow',\n              visible: false,\n              zIndex: 2,\n              attrs: mix({\n                points: []\n              }, background)\n            });\n          }\n        }\n\n        if (this.showXTip) {\n          var xTipBackground = this.xTipBackground,\n              xTipTextStyle = this.xTipTextStyle;\n          var xTipBox = new TextBox({\n            context: frontPlot.get('context'),\n            className: 'xTip',\n            background: xTipBackground,\n            textStyle: xTipTextStyle,\n            visible: false\n          });\n          frontPlot.add(xTipBox.container);\n          this.xTipBox = xTipBox;\n        }\n\n        if (this.showYTip) {\n          var yTipBackground = this.yTipBackground,\n              yTipTextStyle = this.yTipTextStyle;\n          var yTipBox = new TextBox({\n            context: frontPlot.get('context'),\n            className: 'yTip',\n            background: yTipBackground,\n            textStyle: yTipTextStyle,\n            visible: false\n          });\n          frontPlot.add(yTipBox.container);\n          this.yTipBox = yTipBox;\n        }\n\n        if (this.showCrosshairs) {\n          this._renderCrosshairs();\n        }\n\n        frontPlot.sort();\n      }\n\n      _proto.setContent = function setContent(title, items) {\n        this.title = title;\n        this.items = items;\n\n        if (!this.custom) {\n          var container = this.container;\n          container.setTitle(title);\n          container.setItems(items);\n        }\n      };\n\n      _proto.setYTipContent = function setYTipContent(val) {\n        var yTip = this.yTip;\n\n        if (isFunction(yTip)) {\n          val = yTip(val);\n        } else {\n          val = mix({\n            text: val\n          }, yTip);\n        }\n\n        this.yTipBox && this.yTipBox.updateContent(val);\n      };\n\n      _proto.setYTipPosition = function setYTipPosition(pos) {\n        var plotRange = this.plotRange;\n        var crosshairsShapeX = this.crosshairsShapeX;\n\n        if (this.showYTip) {\n          var yTipBox = this.yTipBox;\n          var yTipHeight = yTipBox.getHeight();\n          var yTipWidth = yTipBox.getWidth();\n          var posX = plotRange.tl.x - yTipWidth;\n          var posY = pos - yTipHeight / 2;\n\n          if (posY <= plotRange.tl.y) {\n            posY = plotRange.tl.y;\n          }\n\n          if (posY + yTipHeight >= plotRange.br.y) {\n            posY = plotRange.br.y - yTipHeight;\n          }\n\n          if (posX < 0) {\n            posX = plotRange.tl.x;\n            crosshairsShapeX && crosshairsShapeX.attr('x1', plotRange.tl.x + yTipWidth);\n          }\n\n          yTipBox.updatePosition(posX, posY);\n        }\n      };\n\n      _proto.setXTipContent = function setXTipContent(val) {\n        var xTip = this.xTip;\n\n        if (isFunction(xTip)) {\n          val = xTip(val);\n        } else {\n          val = mix({\n            text: val\n          }, xTip);\n        }\n\n        this.xTipBox && this.xTipBox.updateContent(val);\n      };\n\n      _proto.setXTipPosition = function setXTipPosition(pos) {\n        var showXTip = this.showXTip,\n            canvas = this.canvas,\n            plotRange = this.plotRange,\n            xTipBox = this.xTipBox,\n            crosshairsShapeY = this.crosshairsShapeY;\n\n        if (showXTip) {\n          // const el = canvas.get('el');\n          // const canvasHeight = Util.getHeight(el);\n          var canvasHeight = canvas.get('height');\n          var xTipWidth = xTipBox.getWidth();\n          var xTipHeight = xTipBox.getHeight();\n          var posX = pos - xTipWidth / 2;\n          var posY = plotRange.br.y;\n\n          if (posX <= plotRange.tl.x) {\n            posX = plotRange.tl.x;\n          }\n\n          if (posX + xTipWidth >= plotRange.tr.x) {\n            posX = plotRange.tr.x - xTipWidth;\n          }\n\n          if (canvasHeight - posY < xTipHeight) {\n            posY -= xTipHeight;\n          }\n\n          xTipBox.updatePosition(posX, posY);\n          crosshairsShapeY && crosshairsShapeY.attr('y1', posY);\n        }\n      };\n\n      _proto.setXCrosshairPosition = function setXCrosshairPosition(pos) {\n        this.crosshairsShapeX && this.crosshairsShapeX.moveTo(0, pos);\n      };\n\n      _proto.setYCrosshairPosition = function setYCrosshairPosition(pos) {\n        this.crosshairsShapeY && this.crosshairsShapeY.moveTo(pos, 0);\n      };\n\n      _proto.setPosition = function setPosition(items) {\n        var container = this.container,\n            plotRange = this.plotRange,\n            offsetX = this.offsetX,\n            offsetY = this.offsetY,\n            fixed = this.fixed,\n            tooltipArrow = this.tooltipArrow;\n\n        if (!container) {\n          return;\n        }\n\n        var containerBBox = container.container.getBBox();\n        var minX = containerBBox.minX,\n            minY = containerBBox.minY,\n            width = containerBBox.width,\n            height = containerBBox.height;\n        var tl = plotRange.tl,\n            tr = plotRange.tr;\n        var posX = 0;\n        var posY = tl.y - height - GAP + offsetY;\n\n        if (fixed) {\n          var x = (tl.x + tr.x) / 2;\n          posX = x - width / 2 + offsetX;\n        } else {\n          var _x;\n\n          if (items.length > 1) {\n            _x = (items[0].x + items[items.length - 1].x) / 2;\n          } else {\n            _x = items[0].x;\n          }\n\n          posX = _x - width / 2 + offsetX;\n\n          if (posX < tl.x) {\n            posX = tl.x;\n          }\n\n          if (posX + width > tr.x) {\n            posX = tr.x - width;\n          }\n\n          if (tooltipArrow) {\n            tooltipArrow.attr('points', [{\n              x: _x - 3,\n              y: tl.y - GAP + offsetY\n            }, {\n              x: _x + 3,\n              y: tl.y - GAP + offsetY\n            }, {\n              x: _x,\n              y: tl.y + offsetY\n            }]);\n            var backShape = container.backShape;\n            var radius = parsePadding(backShape.attr('radius'));\n\n            if (_x === tl.x) {\n              radius[3] = 0;\n              tooltipArrow.attr('points', [{\n                x: tl.x,\n                y: tl.y + offsetY\n              }, {\n                x: tl.x,\n                y: tl.y - GAP + offsetY\n              }, {\n                x: tl.x + GAP,\n                y: tl.y - GAP + offsetY\n              }]);\n            } else if (_x === tr.x) {\n              radius[2] = 0;\n              tooltipArrow.attr('points', [{\n                x: tr.x,\n                y: tl.y + offsetY\n              }, {\n                x: tr.x - GAP,\n                y: tl.y - GAP + offsetY\n              }, {\n                x: tr.x,\n                y: tl.y - GAP + offsetY\n              }]);\n            }\n\n            backShape.attr('radius', radius);\n          }\n        }\n\n        container.moveTo(posX - minX, posY - minY);\n      };\n\n      _proto.setMarkers = function setMarkers(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var self = this;\n        var _cfg = cfg,\n            items = _cfg.items,\n            style = _cfg.style,\n            type = _cfg.type;\n\n        var markerGroup = self._getMarkerGroup(type);\n\n        if (type === 'circle') {\n          for (var i = 0, length = items.length; i < length; i++) {\n            var item = items[i];\n            var marker = new Marker({\n              className: 'tooltip-circle-marker',\n              attrs: mix({\n                x: item.x,\n                y: item.y,\n                stroke: item.color\n              }, style)\n            });\n            markerGroup.add(marker);\n          }\n        } else {\n          markerGroup.addShape('rect', {\n            className: 'tooltip-rect-marker',\n            attrs: style\n          });\n        }\n      };\n\n      _proto.clearMarkers = function clearMarkers() {\n        var markerGroup = this.markerGroup;\n        markerGroup && markerGroup.clear();\n      };\n\n      _proto.show = function show() {\n        var crosshairsShapeX = this.crosshairsShapeX;\n        var crosshairsShapeY = this.crosshairsShapeY;\n        var markerGroup = this.markerGroup;\n        var container = this.container;\n        var tooltipArrow = this.tooltipArrow;\n        var xTipBox = this.xTipBox;\n        var yTipBox = this.yTipBox;\n        var canvas = this.canvas;\n        crosshairsShapeX && crosshairsShapeX.show();\n        crosshairsShapeY && crosshairsShapeY.show();\n        markerGroup && markerGroup.show();\n        container && container.show();\n        tooltipArrow && tooltipArrow.show();\n        xTipBox && xTipBox.show();\n        yTipBox && yTipBox.show();\n        canvas.draw();\n      };\n\n      _proto.hide = function hide() {\n        var crosshairsShapeX = this.crosshairsShapeX;\n        var crosshairsShapeY = this.crosshairsShapeY;\n        var markerGroup = this.markerGroup;\n        var container = this.container;\n        var tooltipArrow = this.tooltipArrow;\n        var xTipBox = this.xTipBox;\n        var yTipBox = this.yTipBox;\n        crosshairsShapeX && crosshairsShapeX.hide();\n        crosshairsShapeY && crosshairsShapeY.hide();\n        markerGroup && markerGroup.hide();\n        container && container.hide();\n        tooltipArrow && tooltipArrow.hide();\n        xTipBox && xTipBox.hide();\n        yTipBox && yTipBox.hide();\n      };\n\n      _proto.destroy = function destroy() {\n        var crosshairsShapeX = this.crosshairsShapeX;\n        var crosshairsShapeY = this.crosshairsShapeY;\n        var markerGroup = this.markerGroup;\n        var container = this.container;\n        var tooltipArrow = this.tooltipArrow;\n        var xTipBox = this.xTipBox;\n        var yTipBox = this.yTipBox;\n        crosshairsShapeX && crosshairsShapeX.remove(true);\n        crosshairsShapeY && crosshairsShapeY.remove(true);\n        markerGroup && markerGroup.remove(true);\n        tooltipArrow && tooltipArrow.remove(true);\n        container && container.clear();\n        xTipBox && xTipBox.clear();\n        yTipBox && yTipBox.clear();\n        this.destroyed = true;\n      };\n\n      _proto._getMarkerGroup = function _getMarkerGroup(type) {\n        var markerGroup = this.markerGroup;\n\n        if (!markerGroup) {\n          if (type === 'circle') {\n            markerGroup = this.frontPlot.addGroup({\n              zIndex: 1\n            });\n            this.frontPlot.sort();\n          } else {\n            markerGroup = this.backPlot.addGroup();\n          }\n\n          this.markerGroup = markerGroup;\n        } else {\n          markerGroup.clear();\n        }\n\n        return markerGroup;\n      };\n\n      _proto._renderCrosshairs = function _renderCrosshairs() {\n        var crosshairsType = this.crosshairsType,\n            crosshairsStyle = this.crosshairsStyle,\n            frontPlot = this.frontPlot,\n            plotRange = this.plotRange;\n        var tl = plotRange.tl,\n            br = plotRange.br;\n\n        if (directionEnabled(crosshairsType, 'x')) {\n          this.crosshairsShapeX = frontPlot.addShape('Line', {\n            className: 'tooltip-crosshairs-x',\n            zIndex: 0,\n            visible: false,\n            attrs: mix({\n              x1: tl.x,\n              y1: 0,\n              x2: br.x,\n              y2: 0\n            }, crosshairsStyle)\n          });\n        }\n\n        if (directionEnabled(crosshairsType, 'y')) {\n          this.crosshairsShapeY = frontPlot.addShape('Line', {\n            className: 'tooltip-crosshairs-y',\n            zIndex: 0,\n            visible: false,\n            attrs: mix({\n              x1: 0,\n              y1: br.y,\n              x2: 0,\n              y2: tl.y\n            }, crosshairsStyle)\n          });\n        }\n      };\n\n      return Tooltip;\n    }();\n\n    Global.tooltip = deepMix({\n      triggerOn: 'press',\n      triggerOff: 'pressend',\n      alwaysShow: false,\n      showTitle: false,\n      showCrosshairs: false,\n      crosshairsStyle: {\n        stroke: 'rgba(0, 0, 0, 0.25)',\n        lineWidth: 1\n      },\n      showTooltipMarker: true,\n      background: {\n        radius: 1,\n        fill: 'rgba(0, 0, 0, 0.65)',\n        padding: [3, 5]\n      },\n      titleStyle: {\n        fontSize: 12,\n        fill: '#fff',\n        textAlign: 'start',\n        textBaseline: 'top'\n      },\n      nameStyle: {\n        fontSize: 12,\n        fill: 'rgba(255, 255, 255, 0.65)',\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      valueStyle: {\n        fontSize: 12,\n        fill: '#fff',\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      showItemMarker: true,\n      itemMarkerStyle: {\n        radius: 3,\n        symbol: 'circle',\n        lineWidth: 1,\n        stroke: '#fff'\n      },\n      layout: 'horizontal',\n      snap: false\n    }, Global.tooltip || {});\n\n    function _getTooltipValueScale(geom) {\n      var colorAttr = geom.getAttr('color');\n\n      if (colorAttr) {\n        var colorScale = colorAttr.getScale(colorAttr.type);\n\n        if (colorScale.isLinear) {\n          return colorScale;\n        }\n      }\n\n      var xScale = geom.getXScale();\n      var yScale = geom.getYScale();\n\n      if (yScale) {\n        return yScale;\n      }\n\n      return xScale;\n    }\n\n    function getTooltipName(geom, origin) {\n      var name;\n      var nameScale;\n\n      var groupScales = geom._getGroupScales();\n\n      if (groupScales.length) {\n        each(groupScales, function (scale) {\n          nameScale = scale;\n          return false;\n        });\n      }\n\n      if (nameScale) {\n        var field = nameScale.field;\n        name = nameScale.getText(origin[field]);\n      } else {\n        var valueScale = _getTooltipValueScale(geom);\n\n        name = valueScale.alias || valueScale.field;\n      }\n\n      return name;\n    }\n\n    function getTooltipValue(geom, origin) {\n      var scale = _getTooltipValueScale(geom);\n\n      return scale.getText(origin[scale.field]);\n    }\n\n    function getTooltipTitle(geom, origin) {\n      var position = geom.getAttr('position');\n      var field = position.getFields()[0];\n      var scale = geom.get('scales')[field];\n      return scale.getText(origin[scale.field]);\n    }\n\n    function _indexOfArray(items, item) {\n      var rst = -1;\n      each(items, function (sub, index) {\n        if (sub.title === item.title && sub.name === item.name && sub.value === item.value && sub.color === item.color) {\n          rst = index;\n          return false;\n        }\n      });\n      return rst;\n    }\n\n    function _uniqItems(items) {\n      var tmp = [];\n      each(items, function (item) {\n        var index = _indexOfArray(tmp, item);\n\n        if (index === -1) {\n          tmp.push(item);\n        } else {\n          tmp[index] = item;\n        }\n      });\n      return tmp;\n    }\n\n    function isEqual$1(arr1, arr2) {\n      return JSON.stringify(arr1) === JSON.stringify(arr2);\n    }\n\n    var TooltipController = /*#__PURE__*/function () {\n      function TooltipController(cfg) {\n        var _this = this;\n\n        _defineProperty(this, \"handleShowEvent\", function (ev) {\n          var chart = _this.chart;\n          if (!_this.enable) return;\n          var plot = chart.get('plotRange');\n          var point = createEvent(ev, chart);\n\n          if (!isPointInPlot(point, plot) && !_this._tooltipCfg.alwaysShow) {\n            // not in chart plot\n            _this.hideTooltip();\n\n            return;\n          }\n\n          var lastTimeStamp = _this.timeStamp;\n          var timeStamp = +new Date();\n\n          if (timeStamp - lastTimeStamp > 16) {\n            _this.showTooltip(point);\n\n            _this.timeStamp = timeStamp;\n          }\n        });\n\n        _defineProperty(this, \"handleHideEvent\", function () {\n          if (!_this.enable) return;\n\n          _this.hideTooltip();\n        });\n\n        this.enable = true;\n        this.cfg = {};\n        this.tooltip = null;\n        this.chart = null;\n        this.timeStamp = 0;\n        mix(this, cfg);\n        var _chart = this.chart;\n\n        var canvas = _chart.get('canvas');\n\n        this.canvas = canvas;\n        this.canvasDom = canvas.get('el');\n      }\n\n      var _proto = TooltipController.prototype;\n\n      _proto._setCrosshairsCfg = function _setCrosshairsCfg() {\n        var self = this;\n        var chart = self.chart;\n        var defaultCfg = mix({}, Global.tooltip);\n        var geoms = chart.get('geoms');\n        var shapes = [];\n        each(geoms, function (geom) {\n          var type = geom.get('type');\n\n          if (shapes.indexOf(type) === -1) {\n            shapes.push(type);\n          }\n        });\n        var coordType = chart.get('coord').type;\n\n        if (geoms.length && (coordType === 'cartesian' || coordType === 'rect')) {\n          if (shapes.length === 1 && ['line', 'area', 'path', 'point'].indexOf(shapes[0]) !== -1) {\n            mix(defaultCfg, {\n              showCrosshairs: true\n            });\n          }\n        }\n\n        return defaultCfg;\n      };\n\n      _proto._getMaxLength = function _getMaxLength(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var _cfg = cfg,\n            layout = _cfg.layout,\n            plotRange = _cfg.plotRange;\n        return layout === 'horizontal' ? plotRange.br.x - plotRange.bl.x : plotRange.bl.y - plotRange.tr.y;\n      };\n\n      _proto.render = function render() {\n        var self = this;\n\n        if (self.tooltip) {\n          return;\n        }\n\n        var chart = self.chart;\n        var canvas = chart.get('canvas');\n        var frontPlot = chart.get('frontPlot').addGroup({\n          className: 'tooltipContainer',\n          zIndex: 10\n        });\n        var backPlot = chart.get('backPlot').addGroup({\n          className: 'tooltipContainer'\n        });\n        var plotRange = chart.get('plotRange');\n        var coord = chart.get('coord');\n\n        var defaultCfg = self._setCrosshairsCfg();\n\n        var cfg = self.cfg; // 通过 chart.tooltip() 接口传入的 tooltip 配置项\n\n        var tooltipCfg = deepMix({\n          plotRange: plotRange,\n          frontPlot: frontPlot,\n          backPlot: backPlot,\n          canvas: canvas,\n          fixed: coord.transposed || coord.isPolar\n        }, defaultCfg, cfg); // 创建 tooltip 实例需要的配置，不应该修改 this.cfg，即用户传入的配置\n\n        tooltipCfg.maxLength = self._getMaxLength(tooltipCfg);\n        this._tooltipCfg = tooltipCfg;\n        var tooltip = new Tooltip(tooltipCfg);\n        self.tooltip = tooltip; // 需要保持tooltip一直显示\n\n        if (tooltipCfg.alwaysShow && self.prePoint) {\n          this.showTooltip(self.prePoint);\n        }\n\n        self.bindEvents();\n      };\n\n      _proto.clear = function clear() {\n        var tooltip = this.tooltip;\n\n        if (tooltip) {\n          tooltip.destroy();\n          this.unBindEvents();\n        }\n\n        this.tooltip = null;\n        this._lastActive = null;\n      };\n\n      _proto._getTooltipMarkerStyle = function _getTooltipMarkerStyle(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var _cfg2 = cfg,\n            type = _cfg2.type,\n            items = _cfg2.items;\n        var tooltipCfg = this._tooltipCfg;\n\n        if (type === 'rect') {\n          var x;\n          var y;\n          var width;\n          var height;\n          var chart = this.chart;\n\n          var _chart$get = chart.get('plotRange'),\n              tl = _chart$get.tl,\n              br = _chart$get.br;\n\n          var coord = chart.get('coord');\n          var firstItem = items[0];\n          var lastItem = items[items.length - 1];\n          var intervalWidth = firstItem.width;\n\n          if (coord.transposed) {\n            x = tl.x;\n            y = lastItem.y - intervalWidth * 0.75;\n            width = br.x - tl.x;\n            height = firstItem.y - lastItem.y + 1.5 * intervalWidth;\n          } else {\n            x = firstItem.x - intervalWidth * 0.75;\n            y = tl.y;\n            width = lastItem.x - firstItem.x + 1.5 * intervalWidth;\n            height = br.y - tl.y;\n          }\n\n          cfg.style = mix({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            fill: '#CCD6EC',\n            opacity: 0.3\n          }, tooltipCfg.tooltipMarkerStyle);\n        } else {\n          cfg.style = mix({\n            radius: 4,\n            fill: '#fff',\n            lineWidth: 2\n          }, tooltipCfg.tooltipMarkerStyle);\n        }\n\n        return cfg;\n      };\n\n      _proto._setTooltip = function _setTooltip(point, items, tooltipMarkerCfg) {\n        if (tooltipMarkerCfg === void 0) {\n          tooltipMarkerCfg = {};\n        }\n\n        this.prePoint = point;\n        var lastActive = this._lastActive;\n        var tooltip = this.tooltip;\n        var cfg = this._tooltipCfg;\n        items = _uniqItems(items);\n        var chart = this.chart;\n        var coord = chart.get('coord');\n        var yScale = chart.getYScales()[0];\n        var snap = cfg.snap;\n\n        if (snap === false && yScale.isLinear) {\n          var invertPoint = coord.invertPoint(point);\n          var plot = chart.get('plotRange');\n          var tip;\n          var pos;\n\n          if (isPointInPlot(point, plot)) {\n            if (coord.transposed) {\n              tip = yScale.invert(invertPoint.x);\n              pos = point.x;\n              tooltip.setXTipContent(tip);\n              tooltip.setXTipPosition(pos);\n              tooltip.setYCrosshairPosition(pos);\n            } else {\n              tip = yScale.invert(invertPoint.y);\n              pos = point.y;\n              tooltip.setYTipContent(tip);\n              tooltip.setYTipPosition(pos);\n              tooltip.setXCrosshairPosition(pos);\n            }\n          }\n        }\n\n        if (cfg.onShow) {\n          cfg.onShow({\n            x: point.x,\n            y: point.y,\n            tooltip: tooltip,\n            items: items,\n            tooltipMarkerCfg: tooltipMarkerCfg\n          });\n        }\n\n        if (isEqual$1(lastActive, items)) {\n          if (snap === false && (directionEnabled(cfg.crosshairsType, 'y') || cfg.showYTip)) {\n            var canvas = this.chart.get('canvas');\n            canvas.draw();\n          }\n\n          return;\n        }\n\n        this._lastActive = items;\n        var onChange = cfg.onChange;\n\n        if (onChange) {\n          onChange({\n            x: point.x,\n            y: point.y,\n            tooltip: tooltip,\n            items: items,\n            tooltipMarkerCfg: tooltipMarkerCfg\n          });\n        }\n\n        var first = items[0];\n        var title = first.title || first.name;\n        var xTipPosX = first.x;\n\n        if (items.length > 1) {\n          xTipPosX = (items[0].x + items[items.length - 1].x) / 2;\n        }\n\n        tooltip.setContent(title, items, coord.transposed);\n        tooltip.setPosition(items, point);\n\n        if (coord.transposed) {\n          var yTipPosY = first.y;\n\n          if (items.length > 1) {\n            yTipPosY = (items[0].y + items[items.length - 1].y) / 2;\n          }\n\n          tooltip.setYTipContent(title);\n          tooltip.setYTipPosition(yTipPosY);\n          tooltip.setXCrosshairPosition(yTipPosY);\n\n          if (snap) {\n            tooltip.setXTipContent(first.value);\n            tooltip.setXTipPosition(xTipPosX);\n            tooltip.setYCrosshairPosition(xTipPosX);\n          }\n        } else {\n          tooltip.setXTipContent(title);\n          tooltip.setXTipPosition(xTipPosX);\n          tooltip.setYCrosshairPosition(xTipPosX);\n\n          if (snap) {\n            tooltip.setYTipContent(first.value);\n            tooltip.setYTipPosition(first.y);\n            tooltip.setXCrosshairPosition(first.y);\n          }\n        }\n\n        var markerItems = tooltipMarkerCfg.items;\n\n        if (cfg.showTooltipMarker && markerItems.length) {\n          tooltipMarkerCfg = this._getTooltipMarkerStyle(tooltipMarkerCfg);\n          tooltip.setMarkers(tooltipMarkerCfg);\n        } else {\n          tooltip.clearMarkers();\n        }\n\n        tooltip.show();\n      };\n\n      _proto.showTooltip = function showTooltip(point) {\n        var self = this;\n        var chart = self.chart;\n        var tooltipMarkerType;\n        var tooltipMarkerItems = [];\n        var items = [];\n        var cfg = self._tooltipCfg;\n        var showItemMarker = cfg.showItemMarker,\n            itemMarkerStyle = cfg.itemMarkerStyle,\n            alwaysShow = cfg.alwaysShow;\n        var marker;\n\n        if (showItemMarker) {\n          marker = itemMarkerStyle;\n        }\n\n        var geoms = chart.get('geoms');\n        var coord = chart.get('coord');\n        each(geoms, function (geom) {\n          if (geom.get('visible')) {\n            var type = geom.get('type');\n            var records = geom.getSnapRecords(point);\n            var adjust = geom.get('adjust'); // 漏斗图和金子塔图tooltip位置有问题，暂时不开放显示\n\n            if (type === 'interval' && adjust && adjust.type === 'symmetric') {\n              return;\n            }\n\n            each(records, function (record) {\n              if (record.x && record.y) {\n                var x = record.x,\n                    y = record.y,\n                    _origin = record._origin,\n                    color = record.color;\n                var tooltipItem = {\n                  x: x,\n                  y: isArray(y) ? y[1] : y,\n                  color: color || Global.defaultColor,\n                  origin: _origin,\n                  name: getTooltipName(geom, _origin),\n                  value: getTooltipValue(geom, _origin),\n                  title: getTooltipTitle(geom, _origin)\n                };\n\n                if (marker) {\n                  tooltipItem.marker = mix({\n                    fill: color || Global.defaultColor\n                  }, marker);\n                }\n\n                items.push(tooltipItem);\n\n                if (['line', 'area', 'path'].indexOf(type) !== -1) {\n                  tooltipMarkerType = 'circle';\n                  tooltipMarkerItems.push(tooltipItem);\n                } else if (type === 'interval' && (coord.type === 'cartesian' || coord.type === 'rect')) {\n                  tooltipMarkerType = 'rect';\n                  tooltipItem.width = geom.getSize(record._origin);\n                  tooltipMarkerItems.push(tooltipItem);\n                }\n              }\n            });\n          }\n        });\n\n        if (items.length) {\n          var tooltipMarkerCfg = {\n            items: tooltipMarkerItems,\n            type: tooltipMarkerType\n          };\n\n          self._setTooltip(point, items, tooltipMarkerCfg);\n\n          return;\n        }\n\n        if (!alwaysShow) {\n          self.hideTooltip();\n        }\n      };\n\n      _proto.hideTooltip = function hideTooltip() {\n        var cfg = this._tooltipCfg;\n        this._lastActive = null;\n        var tooltip = this.tooltip;\n\n        if (tooltip) {\n          tooltip.hide();\n\n          if (cfg.onHide) {\n            cfg.onHide({\n              tooltip: tooltip\n            });\n          }\n\n          var canvas = this.chart.get('canvas');\n          canvas.draw();\n        }\n      };\n\n      _proto._handleEvent = function _handleEvent(methodName, method, action) {\n        var canvas = this.canvas;\n        each([].concat(methodName), function (aMethod) {\n          if (action === 'bind') {\n            canvas.on(aMethod, method);\n          } else {\n            canvas.off(aMethod, method);\n          }\n        });\n      };\n\n      _proto.bindEvents = function bindEvents() {\n        var cfg = this._tooltipCfg;\n        var triggerOn = cfg.triggerOn,\n            triggerOff = cfg.triggerOff,\n            alwaysShow = cfg.alwaysShow;\n        triggerOn && this._handleEvent(triggerOn, this.handleShowEvent, 'bind'); // 如果 !alwaysShow, 则在手势离开后就隐藏\n\n        if (!alwaysShow) {\n          this._handleEvent(triggerOff, this.handleHideEvent, 'bind');\n        }\n      };\n\n      _proto.unBindEvents = function unBindEvents() {\n        var cfg = this._tooltipCfg;\n        var triggerOn = cfg.triggerOn,\n            triggerOff = cfg.triggerOff,\n            alwaysShow = cfg.alwaysShow;\n        triggerOn && this._handleEvent(triggerOn, this.handleShowEvent, 'unBind');\n\n        if (!alwaysShow) {\n          this._handleEvent(triggerOff, this.handleHideEvent, 'unBind');\n        }\n      };\n\n      return TooltipController;\n    }();\n\n    function init(chart) {\n      var tooltipController = new TooltipController({\n        chart: chart\n      });\n      chart.set('tooltipController', tooltipController);\n\n      chart.tooltip = function (enable, cfg) {\n        if (isObject(enable)) {\n          cfg = enable;\n          enable = true;\n        }\n\n        tooltipController.enable = enable;\n\n        if (cfg) {\n          tooltipController.cfg = cfg;\n        }\n\n        return this;\n      };\n    }\n\n    function afterGeomDraw(chart) {\n      var tooltipController = chart.get('tooltipController');\n      tooltipController.render();\n\n      chart.showTooltip = function (point) {\n        tooltipController.showTooltip(point);\n        return this;\n      };\n\n      chart.hideTooltip = function () {\n        tooltipController.hideTooltip();\n        return this;\n      };\n    }\n\n    function clearInner(chart) {\n      var tooltipController = chart.get('tooltipController');\n      tooltipController.clear();\n    }\n    var tooltip = {\n      init: init,\n      afterGeomDraw: afterGeomDraw,\n      clearInner: clearInner\n    };\n\n    var Tooltip$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init,\n        afterGeomDraw: afterGeomDraw,\n        clearInner: clearInner,\n        'default': tooltip\n    });\n\n    Global.guide = deepMix({\n      line: {\n        style: {\n          stroke: '#a3a3a3',\n          lineWidth: 1\n        },\n        top: true\n      },\n      text: {\n        style: {\n          fill: '#787878',\n          textAlign: 'center',\n          textBaseline: 'middle'\n        },\n        offsetX: 0,\n        offsetY: 0,\n        top: true\n      },\n      rect: {\n        style: {\n          fill: '#fafafa'\n        },\n        top: false\n      },\n      arc: {\n        style: {\n          stroke: '#a3a3a3'\n        },\n        top: true\n      },\n      html: {\n        offsetX: 0,\n        offsetY: 0,\n        alignX: 'center',\n        alignY: 'middle'\n      },\n      tag: {\n        top: true,\n        offsetX: 0,\n        offsetY: 0,\n        side: 4,\n        background: {\n          padding: 5,\n          radius: 2,\n          fill: '#1890FF'\n        },\n        textStyle: {\n          fontSize: 12,\n          fill: '#fff',\n          textAlign: 'center',\n          textBaseline: 'middle'\n        }\n      },\n      point: {\n        top: true,\n        offsetX: 0,\n        offsetY: 0,\n        style: {\n          fill: '#fff',\n          r: 3,\n          lineWidth: 2,\n          stroke: '#1890ff'\n        }\n      }\n    }, Global.guide || {});\n\n    var GuideController = /*#__PURE__*/function () {\n      function GuideController(cfg) {\n        this.guides = [];\n        this.xScale = null;\n        this.yScales = null;\n        this.guideShapes = [];\n        mix(this, cfg);\n      }\n\n      var _proto = GuideController.prototype;\n\n      _proto._toString = function _toString(position) {\n        if (isFunction(position)) {\n          position = position(this.xScale, this.yScales);\n        }\n\n        position = position.toString();\n        return position;\n      };\n\n      _proto._getId = function _getId(shape, guide) {\n        var id = guide.id;\n\n        if (!id) {\n          var type = guide.type;\n\n          if (type === 'arc' || type === 'line' || type === 'rect') {\n            id = this._toString(guide.start) + '-' + this._toString(guide.end);\n          } else {\n            id = this._toString(guide.position);\n          }\n        }\n\n        return id;\n      };\n\n      _proto.paint = function paint(coord) {\n        var self = this;\n        var chart = self.chart,\n            guides = self.guides,\n            xScale = self.xScale,\n            yScales = self.yScales;\n        var guideShapes = [];\n        each(guides, function (guide, idx) {\n          guide.xScale = xScale;\n          guide.yScales = yScales;\n          var container;\n\n          if (guide.type === 'regionFilter') {\n            // TODO: RegionFilter support animation\n            guide.chart = chart;\n          } else {\n            container = guide.top ? self.frontPlot : self.backPlot;\n          }\n\n          guide.coord = coord;\n          guide.container = container;\n          guide.canvas = chart.get('canvas');\n          var shape = guide.render(coord, container);\n\n          if (shape) {\n            var id = self._getId(shape, guide);\n\n            [].concat(shape).forEach(function (s) {\n              s._id = s.get('className') + '-' + id;\n              s.set('index', idx);\n              guideShapes.push(s);\n            });\n          }\n        });\n        self.guideShapes = guideShapes;\n      };\n\n      _proto.clear = function clear() {\n        this.reset();\n        this.guides = [];\n        return this;\n      };\n\n      _proto.reset = function reset() {\n        var guides = this.guides;\n        each(guides, function (guide) {\n          guide.remove();\n        });\n      };\n\n      _proto._createGuide = function _createGuide(type, cfg) {\n        var ClassName = upperFirst(type);\n        var guide = new GuideBase[ClassName](deepMix({}, Global.guide[type], cfg));\n        this.guides.push(guide);\n        return guide;\n      };\n\n      _proto.line = function line(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('line', cfg);\n      };\n\n      _proto.text = function text(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('text', cfg);\n      };\n\n      _proto.arc = function arc(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('arc', cfg);\n      };\n\n      _proto.html = function html(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('html', cfg);\n      };\n\n      _proto.rect = function rect(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('rect', cfg);\n      };\n\n      _proto.tag = function tag(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('tag', cfg);\n      };\n\n      _proto.point = function point(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('point', cfg);\n      };\n\n      _proto.regionFilter = function regionFilter(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        return this._createGuide('regionFilter', cfg);\n      };\n\n      return GuideController;\n    }();\n\n    function init$1(chart) {\n      var guideController = new GuideController({\n        frontPlot: chart.get('frontPlot').addGroup({\n          zIndex: 20,\n          className: 'guideContainer'\n        }),\n        backPlot: chart.get('backPlot').addGroup({\n          className: 'guideContainer'\n        })\n      });\n      chart.set('guideController', guideController);\n      /**\n       * 为图表添加 guide\n       * @return {GuideController} 返回 guide 控制器\n       */\n\n      chart.guide = function () {\n        return guideController;\n      };\n    }\n\n    function afterGeomDraw$1(chart) {\n      var guideController = chart.get('guideController');\n\n      if (!guideController.guides.length) {\n        return;\n      }\n\n      var xScale = chart.getXScale();\n      var yScales = chart.getYScales();\n      var coord = chart.get('coord');\n      guideController.xScale = xScale;\n      guideController.yScales = yScales;\n      guideController.chart = chart; // for regionFilter\n\n      guideController.paint(coord);\n    }\n\n    function clear(chart) {\n      chart.get('guideController').clear();\n    }\n\n    function repaint(chart) {\n      chart.get('guideController').reset();\n    }\n    var guide = {\n      init: init$1,\n      afterGeomDraw: afterGeomDraw$1,\n      clear: clear,\n      repaint: repaint\n    };\n\n    var Guide = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$1,\n        afterGeomDraw: afterGeomDraw$1,\n        clear: clear,\n        repaint: repaint,\n        'default': guide\n    });\n\n    var LEGEND_GAP = 12;\n    var MARKER_SIZE = 3;\n    var DEFAULT_CFG = {\n      itemMarginBottom: 12,\n      itemGap: 10,\n      showTitle: false,\n      titleStyle: {\n        fontSize: 12,\n        fill: '#808080',\n        textAlign: 'start',\n        textBaseline: 'top'\n      },\n      nameStyle: {\n        fill: '#808080',\n        fontSize: 12,\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      valueStyle: {\n        fill: '#000000',\n        fontSize: 12,\n        textAlign: 'start',\n        textBaseline: 'middle'\n      },\n      unCheckStyle: {\n        fill: '#bfbfbf'\n      },\n      itemWidth: 'auto',\n      wordSpace: 6,\n      selectedMode: 'multiple' // 'multiple' or 'single'\n\n    }; // Register the default configuration for Legend\n\n    Global.legend = deepMix({\n      common: DEFAULT_CFG,\n      // common legend configuration\n      right: mix({\n        position: 'right',\n        layout: 'vertical'\n      }, DEFAULT_CFG),\n      left: mix({\n        position: 'left',\n        layout: 'vertical'\n      }, DEFAULT_CFG),\n      top: mix({\n        position: 'top',\n        layout: 'horizontal'\n      }, DEFAULT_CFG),\n      bottom: mix({\n        position: 'bottom',\n        layout: 'horizontal'\n      }, DEFAULT_CFG)\n    }, Global.legend || {});\n\n    function getPaddingByPos(pos, appendPadding) {\n      var padding = 0;\n      appendPadding = parsePadding(appendPadding);\n\n      switch (pos) {\n        case 'top':\n          padding = appendPadding[0];\n          break;\n\n        case 'right':\n          padding = appendPadding[1];\n          break;\n\n        case 'bottom':\n          padding = appendPadding[2];\n          break;\n\n        case 'left':\n          padding = appendPadding[3];\n          break;\n      }\n\n      return padding;\n    }\n\n    var LegendController = /*#__PURE__*/function () {\n      function LegendController(cfg) {\n        var _this = this;\n\n        _defineProperty(this, \"handleEvent\", function (ev) {\n          var self = _this;\n\n          function findItem(x, y) {\n            var result = null;\n            var legends = self.legends;\n            each(legends, function (legendItems) {\n              each(legendItems, function (legend) {\n                var itemsGroup = legend.itemsGroup,\n                    legendHitBoxes = legend.legendHitBoxes;\n                var children = itemsGroup.get('children');\n\n                if (children.length) {\n                  var legendPosX = legend.x;\n                  var legendPosY = legend.y;\n                  each(legendHitBoxes, function (box, index) {\n                    if (x >= box.x + legendPosX && x <= box.x + box.width + legendPosX && y >= box.y + legendPosY && y <= box.height + box.y + legendPosY) {\n                      // inbox\n                      result = {\n                        clickedItem: children[index],\n                        clickedLegend: legend\n                      };\n                      return false;\n                    }\n                  });\n                }\n              });\n            });\n            return result;\n          }\n\n          var chart = self.chart;\n\n          var _createEvent = createEvent(ev, chart),\n              x = _createEvent.x,\n              y = _createEvent.y;\n\n          var clicked = findItem(x, y);\n\n          if (clicked && clicked.clickedLegend.clickable !== false) {\n            var clickedItem = clicked.clickedItem,\n                clickedLegend = clicked.clickedLegend;\n\n            if (clickedLegend.onClick) {\n              ev.clickedItem = clickedItem;\n              clickedLegend.onClick(ev);\n            } else if (!clickedLegend.custom) {\n              var checked = clickedItem.get('checked');\n              var value = clickedItem.get('dataValue');\n              var filteredVals = clickedLegend.filteredVals,\n                  field = clickedLegend.field,\n                  selectedMode = clickedLegend.selectedMode;\n              var isSingeSelected = selectedMode === 'single';\n\n              if (isSingeSelected) {\n                chart.filter(field, function (val) {\n                  return val === value;\n                });\n              } else {\n                if (checked) {\n                  filteredVals.push(value);\n                } else {\n                  remove(filteredVals, value);\n                }\n\n                chart.filter(field, function (val) {\n                  return filteredVals.indexOf(val) === -1;\n                });\n              }\n\n              chart.repaint();\n            }\n          }\n        });\n\n        this.legendCfg = {};\n        this.enable = true;\n        this.position = 'top';\n        mix(this, cfg);\n        var _chart = this.chart;\n        this.canvasDom = _chart.get('canvas').get('el');\n        this.clear();\n      }\n\n      var _proto = LegendController.prototype;\n\n      _proto.addLegend = function addLegend(scale, items, filteredVals) {\n        var self = this;\n        var legendCfg = self.legendCfg;\n        var field = scale.field;\n        var fieldCfg = legendCfg[field];\n\n        if (fieldCfg === false) {\n          return null;\n        }\n\n        if (fieldCfg && fieldCfg.custom) {\n          self.addCustomLegend(field);\n        } else {\n          var position = legendCfg.position || self.position;\n\n          if (fieldCfg && fieldCfg.position) {\n            position = fieldCfg.position;\n          }\n\n          if (scale.isCategory) {\n            self._addCategoryLegend(scale, items, position, filteredVals);\n          }\n        }\n      };\n\n      _proto.addCustomLegend = function addCustomLegend(field) {\n        var self = this;\n        var legendCfg = self.legendCfg;\n\n        if (field && legendCfg[field]) {\n          legendCfg = legendCfg[field];\n        }\n\n        var position = legendCfg.position || self.position;\n        var legends = self.legends;\n        legends[position] = legends[position] || [];\n        var items = legendCfg.items;\n\n        if (!items) {\n          return null;\n        }\n\n        var container = self.container;\n        each(items, function (item) {\n          if (!isPlainObject(item.marker)) {\n            item.marker = {\n              symbol: item.marker || 'circle',\n              fill: item.fill,\n              radius: MARKER_SIZE\n            };\n          } else {\n            item.marker.radius = item.marker.radius || MARKER_SIZE;\n          }\n\n          item.checked = isNil(item.checked) ? true : item.checked;\n          item.name = item.name || item.value;\n        });\n        var legend = new List(deepMix({}, Global.legend[position], legendCfg, {\n          maxLength: self._getMaxLength(position),\n          items: items,\n          parent: container\n        }));\n        legends[position].push(legend);\n      };\n\n      _proto.clear = function clear() {\n        var legends = this.legends;\n        each(legends, function (legendItems) {\n          each(legendItems, function (legend) {\n            legend.clear();\n          });\n        });\n        this.legends = {};\n        this.unBindEvents();\n      };\n\n      _proto._isFiltered = function _isFiltered(scale, values, value) {\n        var rst = false;\n        each(values, function (val) {\n          rst = rst || scale.getText(val) === scale.getText(value);\n\n          if (rst) {\n            return false;\n          }\n        });\n        return rst;\n      };\n\n      _proto._getMaxLength = function _getMaxLength(position) {\n        var chart = this.chart;\n        var appendPadding = parsePadding(chart.get('appendPadding'));\n        return position === 'right' || position === 'left' ? chart.get('height') - (appendPadding[0] + appendPadding[2]) : chart.get('width') - (appendPadding[1] + appendPadding[3]);\n      };\n\n      _proto._addCategoryLegend = function _addCategoryLegend(scale, items, position, filteredVals) {\n        var self = this;\n        var legendCfg = self.legendCfg,\n            legends = self.legends,\n            container = self.container,\n            chart = self.chart;\n        var field = scale.field;\n        legends[position] = legends[position] || [];\n        var symbol = 'circle';\n\n        if (legendCfg[field] && legendCfg[field].marker) {\n          symbol = legendCfg[field].marker;\n        } else if (legendCfg.marker) {\n          symbol = legendCfg.marker;\n        }\n\n        each(items, function (item) {\n          if (isPlainObject(symbol)) {\n            mix(item.marker, symbol);\n          } else {\n            item.marker.symbol = symbol;\n          }\n\n          if (filteredVals) {\n            item.checked = !self._isFiltered(scale, filteredVals, item.dataValue);\n          }\n        });\n        var legendItems = chart.get('legendItems');\n        legendItems[field] = items;\n        var lastCfg = deepMix({}, Global.legend[position], legendCfg[field] || legendCfg, {\n          maxLength: self._getMaxLength(position),\n          items: items,\n          field: field,\n          filteredVals: filteredVals,\n          parent: container\n        });\n\n        if (lastCfg.showTitle) {\n          deepMix(lastCfg, {\n            title: scale.alias || scale.field\n          });\n        }\n\n        var legend = new List(lastCfg);\n        legends[position].push(legend);\n        return legend;\n      };\n\n      _proto._alignLegend = function _alignLegend(legend, pre, position) {\n        var self = this;\n        var _self$plotRange = self.plotRange,\n            tl = _self$plotRange.tl,\n            bl = _self$plotRange.bl;\n        var chart = self.chart;\n        var offsetX = legend.offsetX || 0;\n        var offsetY = legend.offsetY || 0;\n        var chartWidth = chart.get('width');\n        var chartHeight = chart.get('height');\n        var appendPadding = parsePadding(chart.get('appendPadding'));\n        var legendHeight = legend.getHeight();\n        var legendWidth = legend.getWidth();\n        var x = 0;\n        var y = 0;\n\n        if (position === 'left' || position === 'right') {\n          var verticalAlign = legend.verticalAlign || 'middle';\n          var height = Math.abs(tl.y - bl.y);\n          x = position === 'left' ? appendPadding[3] : chartWidth - legendWidth - appendPadding[1];\n          y = (height - legendHeight) / 2 + tl.y;\n\n          if (verticalAlign === 'top') {\n            y = tl.y;\n          } else if (verticalAlign === 'bottom') {\n            y = bl.y - legendHeight;\n          }\n\n          if (pre) {\n            y = pre.get('y') - legendHeight - LEGEND_GAP;\n          }\n        } else {\n          var align = legend.align || 'left';\n          x = appendPadding[3];\n\n          if (align === 'center') {\n            x = chartWidth / 2 - legendWidth / 2;\n          } else if (align === 'right') {\n            x = chartWidth - (legendWidth + appendPadding[1]);\n          }\n\n          y = position === 'top' ? appendPadding[0] + Math.abs(legend.container.getBBox().minY) : chartHeight - legendHeight;\n\n          if (pre) {\n            var preWidth = pre.getWidth();\n            x = pre.x + preWidth + LEGEND_GAP;\n          }\n        }\n\n        if (position === 'bottom' && offsetY > 0) {\n          offsetY = 0;\n        }\n\n        if (position === 'right' && offsetX > 0) {\n          offsetX = 0;\n        }\n\n        legend.moveTo(x + offsetX, y + offsetY);\n      };\n\n      _proto.alignLegends = function alignLegends() {\n        var self = this;\n        var legends = self.legends;\n        each(legends, function (legendItems, position) {\n          each(legendItems, function (legend, index) {\n            var pre = legendItems[index - 1];\n\n            self._alignLegend(legend, pre, position);\n          });\n        });\n        return self;\n      };\n\n      _proto.bindEvents = function bindEvents() {\n        var legendCfg = this.legendCfg;\n        var triggerOn = legendCfg.triggerOn || 'touchstart';\n        addEventListener(this.canvasDom, triggerOn, this.handleEvent);\n      };\n\n      _proto.unBindEvents = function unBindEvents() {\n        var legendCfg = this.legendCfg;\n        var triggerOn = legendCfg.triggerOn || 'touchstart';\n        removeEventListener(this.canvasDom, triggerOn, this.handleEvent);\n      };\n\n      return LegendController;\n    }();\n\n    function init$2(chart) {\n      var legendController = new LegendController({\n        container: chart.get('backPlot'),\n        plotRange: chart.get('plotRange'),\n        chart: chart\n      });\n      chart.set('legendController', legendController);\n\n      chart.legend = function (field, cfg) {\n        var legendCfg = legendController.legendCfg;\n        legendController.enable = true;\n\n        if (isBoolean(field)) {\n          legendController.enable = field;\n          legendCfg = cfg || {};\n        } else if (isObject(field)) {\n          legendCfg = field;\n        } else {\n          legendCfg[field] = cfg;\n        }\n\n        legendController.legendCfg = legendCfg;\n        return this;\n      };\n    }\n\n    function beforeGeomDraw(chart) {\n      var legendController = chart.get('legendController');\n      if (!legendController.enable) return null; // legend is not displayed\n\n      var legendCfg = legendController.legendCfg;\n\n      if (legendCfg && legendCfg.custom) {\n        legendController.addCustomLegend();\n      } else {\n        var legendItems = chart.getLegendItems();\n        var scales = chart.get('scales');\n        var filters = chart.get('filters');\n        each(legendItems, function (items, field) {\n          var scale = scales[field];\n          var values = scale.values;\n          var filteredVals;\n\n          if (filters && filters[field]) {\n            filteredVals = values.filter(function (v) {\n              return !filters[field](v);\n            });\n          } else {\n            filteredVals = [];\n          }\n\n          legendController.addLegend(scale, items, filteredVals);\n        });\n      }\n\n      if (legendCfg && legendCfg.clickable !== false) {\n        legendController.bindEvents();\n      }\n\n      var legends = legendController.legends;\n      var legendRange = {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n      each(legends, function (legendItems, position) {\n        var padding = 0;\n        each(legendItems, function (legend) {\n          var width = legend.getWidth();\n          var height = legend.getHeight();\n\n          if (position === 'top' || position === 'bottom') {\n            padding = Math.max(padding, height);\n\n            if (legend.offsetY > 0) {\n              padding += legend.offsetY;\n            }\n          } else {\n            padding = Math.max(padding, width);\n\n            if (legend.offsetX > 0) {\n              padding += legend.offsetX;\n            }\n          }\n        });\n        legendRange[position] = padding + getPaddingByPos(position, chart.get('appendPadding'));\n      });\n      chart.set('legendRange', legendRange);\n    }\n\n    function afterGeomDraw$2(chart) {\n      var legendController = chart.get('legendController');\n      legendController.alignLegends();\n    }\n\n    function clearInner$1(chart) {\n      var legendController = chart.get('legendController');\n      legendController.clear();\n      chart.set('legendRange', null);\n    }\n    var legend = {\n      init: init$2,\n      beforeGeomDraw: beforeGeomDraw,\n      afterGeomDraw: afterGeomDraw$2,\n      clearInner: clearInner$1\n    };\n\n    var Legend = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$2,\n        beforeGeomDraw: beforeGeomDraw,\n        afterGeomDraw: afterGeomDraw$2,\n        clearInner: clearInner$1,\n        'default': legend\n    });\n\n    var clock = typeof performance === 'object' && performance.now ? performance : Date;\n\n    var Timeline = /*#__PURE__*/function () {\n      function Timeline() {\n        this.anims = [];\n        this.time = null;\n        this.playing = false;\n        this.canvas = [];\n      }\n\n      var _proto = Timeline.prototype;\n\n      _proto.play = function play() {\n        var self = this;\n        self.time = clock.now();\n        self.playing = true;\n\n        function step() {\n          if (self.playing) {\n            requestAnimationFrame(step);\n            self.update();\n          }\n        }\n\n        requestAnimationFrame(step);\n      };\n\n      _proto.stop = function stop() {\n        this.playing = false;\n        this.time = null;\n        this.canvas = [];\n      };\n\n      _proto.pushAnim = function pushAnim(animInfo) {\n        this.anims.push(animInfo);\n\n        if (this.playing) {\n          return;\n        }\n\n        this.play();\n      };\n\n      _proto.update = function update() {\n        var currentTime = clock.now();\n        this.canvas = [];\n\n        if (!this.anims.length) {\n          this.stop();\n          return;\n        }\n\n        for (var i = 0; i < this.anims.length; i++) {\n          var propertyAnim = this.anims[i];\n\n          if (currentTime < propertyAnim.startTime || propertyAnim.hasEnded) {\n            continue;\n          }\n\n          var shape = propertyAnim.shape; // shape\n\n          if (shape.get('destroyed')) {\n            this.anims.splice(i, 1);\n            i--;\n            continue;\n          }\n\n          var startState = propertyAnim.startState,\n              endState = propertyAnim.endState,\n              interpolate = propertyAnim.interpolate,\n              duration = propertyAnim.duration;\n\n          if (currentTime >= propertyAnim.startTime && !propertyAnim.hasStarted) {\n            propertyAnim.hasStarted = true;\n\n            if (propertyAnim.onStart) {\n              propertyAnim.onStart();\n            }\n          }\n\n          var t = (currentTime - propertyAnim.startTime) / duration;\n          t = Math.max(0, Math.min(t, 1));\n          t = propertyAnim.easing(t);\n\n          if (propertyAnim.onFrame) {\n            propertyAnim.onFrame(t);\n          } else {\n            for (var key in interpolate) {\n              var diff = interpolate[key];\n              var value = diff(t);\n              var newValue = void 0;\n\n              if (key === 'points') {\n                newValue = [];\n                var aLen = Math.max(startState.points.length, endState.points.length);\n\n                for (var j = 0; j < aLen; j += 2) {\n                  newValue.push({\n                    x: value[j],\n                    y: value[j + 1]\n                  });\n                }\n              } else {\n                newValue = value;\n              }\n\n              shape._attrs.attrs[key] = newValue;\n              shape._attrs.bbox = null; // should clear calculated bbox\n            }\n          }\n\n          var canvas = shape.get('canvas');\n\n          if (this.canvas.indexOf(canvas) === -1) {\n            this.canvas.push(canvas);\n          }\n\n          if (propertyAnim.onUpdate) {\n            propertyAnim.onUpdate(t);\n          }\n\n          if (currentTime >= propertyAnim.endTime && !propertyAnim.hasEnded) {\n            propertyAnim.hasEnded = true;\n\n            if (propertyAnim.onEnd) {\n              propertyAnim.onEnd();\n            }\n          }\n\n          if (t === 1) {\n            // end\n            this.anims.splice(i, 1);\n            i--;\n          }\n        }\n\n        this.canvas.map(function (c) {\n          c.draw();\n          return c;\n        });\n        this.time = clock.now();\n      };\n\n      return Timeline;\n    }();\n\n    function linear$1(k) {\n      return k;\n    }\n\n    function quadraticIn(k) {\n      return k * k;\n    }\n\n    function quadraticOut(k) {\n      return k * (2 - k);\n    }\n\n    function quadraticInOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    }\n\n    function cubicIn(k) {\n      return k * k * k;\n    }\n\n    function cubicOut(k) {\n      return --k * k * k + 1;\n    }\n\n    function cubicInOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    }\n\n    function elasticIn(k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n      if (k === 0) return 0;\n      if (k === 1) return 1;\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    }\n\n    function elasticOut(k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n      if (k === 0) return 0;\n      if (k === 1) return 1;\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;\n    }\n\n    function elasticInOut(k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n      if (k === 0) return 0;\n      if (k === 1) return 1;\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      if ((k *= 2) < 1) {\n        return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n      }\n\n      return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    }\n\n    function backIn(k) {\n      var s = 1.70158;\n      return k * k * ((s + 1) * k - s);\n    }\n\n    function backOut(k) {\n      var s = 1.70158;\n      return (k = k - 1) * k * ((s + 1) * k + s) + 1;\n    }\n\n    function backInOut(k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    }\n\n    function bounceIn(k) {\n      return 1 - bounceOut(1 - k);\n    }\n\n    function bounceOut(k) {\n      if ((k /= 1) < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      }\n\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n\n    function bounceInOut(k) {\n      if (k < 0.5) {\n        return bounceIn(k * 2) * 0.5;\n      }\n\n      return bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n\n    var Easing = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        linear: linear$1,\n        quadraticIn: quadraticIn,\n        quadraticOut: quadraticOut,\n        quadraticInOut: quadraticInOut,\n        cubicIn: cubicIn,\n        cubicOut: cubicOut,\n        cubicInOut: cubicInOut,\n        elasticIn: elasticIn,\n        elasticOut: elasticOut,\n        elasticInOut: elasticInOut,\n        backIn: backIn,\n        backOut: backOut,\n        backInOut: backInOut,\n        bounceIn: bounceIn,\n        bounceOut: bounceOut,\n        bounceInOut: bounceInOut\n    });\n\n    function plainArray(arr) {\n      var result = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        if (arr[i]) {\n          result.push(arr[i].x);\n          result.push(arr[i].y);\n        }\n      }\n\n      return result;\n    }\n\n    function interpolateNumber(a, b) {\n      a = +a;\n      b -= a;\n      return function (t) {\n        return a + b * t;\n      };\n    }\n\n    function interpolateArray(a, b) {\n      var nb = b ? b.length : 0;\n      var na = a ? Math.min(nb, a.length) : 0;\n      var x = new Array(na);\n      var c = new Array(nb);\n      var i;\n\n      for (i = 0; i < na; ++i) {\n        x[i] = interpolateNumber(a[i], b[i]);\n      }\n\n      for (; i < nb; ++i) {\n        c[i] = b[i];\n      }\n\n      return function (t) {\n        for (i = 0; i < na; ++i) {\n          c[i] = x[i](t);\n        }\n\n        return c;\n      };\n    }\n\n    var Animator = /*#__PURE__*/function () {\n      function Animator(shape, source, timeline) {\n        this.hasStarted = false;\n        this.hasEnded = false;\n        this.shape = shape;\n        this.source = source;\n        this.timeline = timeline;\n        this.animate = null;\n      } // delay, attrs, duration, easing\n\n\n      var _proto = Animator.prototype;\n\n      _proto.to = function to(cfg) {\n        if (cfg === void 0) {\n          cfg = {};\n        }\n\n        var delay = cfg.delay || 0;\n        var attrs = cfg.attrs || {};\n        var duration = cfg.duration || 1000;\n        var easing; // 缓动函数\n\n        if (typeof cfg.easing === 'function') {\n          easing = cfg.easing;\n        } else {\n          easing = Easing[cfg.easing] || linear$1;\n        }\n\n        var animInfo = {\n          shape: this.shape,\n          startTime: this.timeline.time + delay,\n          duration: duration,\n          easing: easing\n        };\n        var interpolate = {}; // 差值函数\n\n        for (var attrName in attrs) {\n          var startValue = this.source[attrName];\n          var endValue = attrs[attrName];\n\n          if (attrName === 'points') {\n            startValue = plainArray(startValue);\n            endValue = plainArray(endValue);\n            interpolate.points = interpolateArray(startValue, endValue);\n            this.source.points = startValue;\n            attrs.points = endValue;\n          } else if (attrName === 'matrix') {\n            interpolate.matrix = interpolateArray(startValue, endValue);\n          } else {\n            interpolate[attrName] = interpolateNumber(startValue, endValue);\n          }\n        }\n\n        animInfo.interpolate = interpolate;\n        animInfo.startState = this.source;\n        animInfo.endState = attrs;\n        animInfo.endTime = animInfo.startTime + duration;\n        this.timeline.pushAnim(animInfo);\n        this.animate = animInfo;\n        return this;\n      };\n\n      _proto.onFrame = function onFrame(callback) {\n        // 自定义每一帧动画的动作\n        if (this.animate) {\n          this.animate.onFrame = function (frame) {\n            callback(frame);\n          };\n        }\n\n        return this;\n      };\n\n      _proto.onStart = function onStart(callback) {\n        if (this.animate) {\n          this.animate.onStart = function () {\n            callback();\n          };\n        }\n\n        return this;\n      };\n\n      _proto.onUpdate = function onUpdate(callback) {\n        if (this.animate) {\n          this.animate.onUpdate = function (frame) {\n            callback(frame);\n          };\n        }\n\n        return this;\n      };\n\n      _proto.onEnd = function onEnd(callback) {\n        if (this.animate) {\n          this.animate.onEnd = function () {\n            callback();\n          };\n        }\n\n        return this;\n      };\n\n      return Animator;\n    }();\n\n    var defaultAnimationCfg = {\n      appear: {\n        duration: 450,\n        easing: 'quadraticOut'\n      },\n      // 'appear' animation options\n      update: {\n        duration: 300,\n        easing: 'quadraticOut'\n      },\n      // 'update' animation options\n      enter: {\n        duration: 300,\n        easing: 'quadraticOut'\n      },\n      // 'enter' animation options\n      leave: {\n        duration: 350,\n        easing: 'quadraticIn'\n      } // 'leave' animation options\n\n    };\n    var Animate = {\n      defaultCfg: {},\n      Action: {},\n      getAnimation: function getAnimation(geomType, coord, animationType) {\n        var geomAnimateCfg = this.defaultCfg[geomType];\n\n        if (geomAnimateCfg) {\n          var animation = geomAnimateCfg[animationType];\n\n          if (isFunction(animation)) {\n            return animation(coord);\n          }\n        }\n\n        return false;\n      },\n      getAnimateCfg: function getAnimateCfg(geomType, animationType) {\n        var defaultCfg = defaultAnimationCfg[animationType];\n        var geomConfig = this.defaultCfg[geomType];\n\n        if (geomConfig && geomConfig.cfg && geomConfig.cfg[animationType]) {\n          return deepMix({}, defaultCfg, geomConfig.cfg[animationType]);\n        }\n\n        return defaultCfg;\n      },\n      registerAnimation: function registerAnimation(animationName, animationFun) {\n        var _extends2;\n\n        if (!this.Action) {\n          this.Action = {};\n        }\n\n        this.Action = _extends({}, this.Action, (_extends2 = {}, _extends2[animationName] = animationFun, _extends2));\n      }\n    };\n\n    /**\n     * Utility\n     * @author sima.zhang1990@gmail.com\n     */\n\n    function getCoordInfo(coord) {\n      var start = coord.start;\n      var end = coord.end;\n      return {\n        start: start,\n        end: end,\n        width: end.x - start.x,\n        height: Math.abs(end.y - start.y)\n      };\n    }\n\n    function getScaledMatrix(shape, v, direct) {\n      var scaledMatrix;\n      shape.apply(v);\n      var x = v[0];\n      var y = v[1];\n\n      if (direct === 'x') {\n        shape.transform([['t', x, y], ['s', 0.01, 1], ['t', -x, -y]]);\n        var matrix = shape.getMatrix();\n        scaledMatrix = Matrix.transform(matrix, [['t', x, y], ['s', 100, 1], ['t', -x, -y]]);\n      } else if (direct === 'y') {\n        shape.transform([['t', x, y], ['s', 1, 0.01], ['t', -x, -y]]);\n\n        var _matrix = shape.getMatrix();\n\n        scaledMatrix = Matrix.transform(_matrix, [['t', x, y], ['s', 1, 100], ['t', -x, -y]]);\n      } else if (direct === 'xy') {\n        shape.transform([['t', x, y], ['s', 0.01, 0.01], ['t', -x, -y]]);\n\n        var _matrix2 = shape.getMatrix();\n\n        scaledMatrix = Matrix.transform(_matrix2, [['t', x, y], ['s', 100, 100], ['t', -x, -y]]);\n      }\n\n      return scaledMatrix;\n    }\n\n    function getAnimateParam(animateCfg, index, id) {\n      var result = {};\n\n      if (animateCfg.delay) {\n        result.delay = isFunction(animateCfg.delay) ? animateCfg.delay(index, id) : animateCfg.delay;\n      }\n\n      result.easing = animateCfg.easing;\n      result.duration = animateCfg.duration;\n      result.delay = animateCfg.delay;\n      return result;\n    }\n\n    function doAnimation(shape, endState, animateCfg, callback) {\n      var id = shape._id;\n      var index = shape.get('index');\n\n      var _getAnimateParam = getAnimateParam(animateCfg, index, id),\n          easing = _getAnimateParam.easing,\n          delay = _getAnimateParam.delay,\n          duration = _getAnimateParam.duration;\n\n      var anim = shape.animate().to({\n        attrs: endState,\n        duration: duration,\n        delay: delay,\n        easing: easing\n      });\n\n      if (callback) {\n        anim.onEnd(function () {\n          callback();\n        });\n      }\n    }\n\n    /**\n     * Animation functions for shape\n     * @author sima.zhang1990@gmail.com\n     */\n    /*\n    function waveIn(shape, animateCfg, coord) {\n      const clip = Helpers.getClip(coord);\n      clip.set('canvas', shape.get('canvas'));\n      shape.attr('clip', clip);\n      const onEnd = function() {\n        shape.attr('clip', null);\n        clip.remove(true);\n      };\n      Helpers.doAnimation(clip, clip.endState, animateCfg, onEnd);\n    }\n\n    function scaleInX(shape, animateCfg) {\n      const box = shape.getBBox();\n      const points = shape.get('origin').points;\n      let x;\n      const y = (box.minY + box.maxY) / 2;\n\n      if (points[0].y - points[1].y > 0) { // 当顶点在零点之下\n        x = box.maxX;\n      } else {\n        x = box.minX;\n      }\n      const scaledMatrix = Helpers.getScaledMatrix(shape, [ x, y ], 'x');\n      Helpers.doAnimation(shape, { matrix: scaledMatrix }, animateCfg);\n    }\n\n    function scaleInY(shape, animateCfg) {\n      const box = shape.getBBox();\n      const points = shape.get('origin').points;\n      const x = (box.minX + box.maxX) / 2;\n      let y;\n\n      if (points[0].y - points[1].y <= 0) { // 当顶点在零点之下\n        y = box.maxY;\n      } else {\n        y = box.minY;\n      }\n      const scaledMatrix = Helpers.getScaledMatrix(shape, [ x, y ], 'x');\n      Helpers.doAnimation(shape, { matrix: scaledMatrix }, animateCfg);\n    }\n    */\n\n    function fadeIn(shape, animateCfg) {\n      var fillOpacity = isNil(shape.attr('fillOpacity')) ? 1 : shape.attr('fillOpacity');\n      var strokeOpacity = isNil(shape.attr('strokeOpacity')) ? 1 : shape.attr('strokeOpacity');\n      shape.attr('fillOpacity', 0);\n      shape.attr('strokeOpacity', 0);\n      var endState = {\n        fillOpacity: fillOpacity,\n        strokeOpacity: strokeOpacity\n      };\n      doAnimation(shape, endState, animateCfg);\n    }\n\n    var ShapeAction = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        fadeIn: fadeIn\n    });\n\n    /**\n     * Group animate functions\n     * @author sima.zhang1990@gmail.com\n     */\n\n    function _groupScaleIn(container, animateCfg, coord, zeroY, type) {\n      var _getCoordInfo = getCoordInfo(coord),\n          start = _getCoordInfo.start,\n          end = _getCoordInfo.end,\n          width = _getCoordInfo.width,\n          height = _getCoordInfo.height;\n\n      var x;\n      var y;\n      var clip = new Shape$2.Rect({\n        attrs: {\n          x: start.x,\n          y: end.y,\n          width: width,\n          height: height\n        }\n      });\n\n      if (type === 'y') {\n        x = start.x + width / 2;\n        y = zeroY.y < start.y ? zeroY.y : start.y;\n      } else if (type === 'x') {\n        x = zeroY.x > start.x ? zeroY.x : start.x;\n        y = start.y + height / 2;\n      } else if (type === 'xy') {\n        if (coord.isPolar) {\n          x = coord.center.x;\n          y = coord.center.y;\n        } else {\n          x = (start.x + end.x) / 2;\n          y = (start.y + end.y) / 2;\n        }\n      }\n\n      var endMatrix = getScaledMatrix(clip, [x, y], type);\n      clip.isClip = true;\n      clip.endState = {\n        matrix: endMatrix\n      };\n      clip.set('canvas', container.get('canvas'));\n      container.attr('clip', clip);\n\n      var onEnd = function onEnd() {\n        container.attr('clip', null);\n        clip.remove(true);\n      };\n\n      doAnimation(clip, clip.endState, animateCfg, onEnd);\n    }\n\n    function _shapeScale(container, animateCfg, type) {\n      var shapes = container.get('children');\n      var x;\n      var y;\n      var endMatrix;\n\n      for (var i = 0, len = shapes.length; i < len; i++) {\n        var shape = shapes[i];\n        var box = shape.getBBox();\n        x = (box.minX + box.maxX) / 2;\n        y = (box.minY + box.maxY) / 2;\n        endMatrix = getScaledMatrix(shape, [x, y], type);\n        doAnimation(shape, {\n          matrix: endMatrix\n        }, animateCfg);\n      }\n    }\n\n    function groupScaleInX(container, animateCfg, coord, zeroY) {\n      _groupScaleIn(container, animateCfg, coord, zeroY, 'x');\n    }\n\n    function groupScaleInY(container, animateCfg, coord, zeroY) {\n      _groupScaleIn(container, animateCfg, coord, zeroY, 'y');\n    }\n\n    function groupScaleInXY(container, animateCfg, coord, zeroY) {\n      _groupScaleIn(container, animateCfg, coord, zeroY, 'xy');\n    }\n\n    function shapesScaleInX(container, animateCfg) {\n      _shapeScale(container, animateCfg, 'x');\n    }\n\n    function shapesScaleInY(container, animateCfg) {\n      _shapeScale(container, animateCfg, 'y');\n    }\n\n    function shapesScaleInXY(container, animateCfg) {\n      _shapeScale(container, animateCfg, 'xy');\n    }\n\n    function groupWaveIn(container, animateCfg, coord) {\n      var clip = getClip(coord);\n      clip.set('canvas', container.get('canvas'));\n      container.attr('clip', clip);\n\n      var onEnd = function onEnd() {\n        container.attr('clip', null);\n        clip.remove(true);\n      };\n\n      var endState = {};\n\n      if (coord.isPolar) {\n        var startAngle = coord.startAngle,\n            endAngle = coord.endAngle;\n        endState.endAngle = endAngle;\n        clip.attr('endAngle', startAngle);\n      } else {\n        var start = coord.start,\n            end = coord.end;\n        var width = Math.abs(start.x - end.x);\n        var height = Math.abs(start.y - end.y);\n\n        if (coord.isTransposed) {\n          clip.attr('height', 0);\n          endState.height = height;\n        } else {\n          clip.attr('width', 0);\n          endState.width = width;\n        }\n      }\n\n      doAnimation(clip, endState, animateCfg, onEnd);\n    }\n\n    var GroupAction = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        groupWaveIn: groupWaveIn,\n        groupScaleInX: groupScaleInX,\n        groupScaleInY: groupScaleInY,\n        groupScaleInXY: groupScaleInXY,\n        shapesScaleInX: shapesScaleInX,\n        shapesScaleInY: shapesScaleInY,\n        shapesScaleInXY: shapesScaleInXY\n    });\n\n    /**\n     * Handle the detail animations\n     * @author sima.zhang1990@gmail.com\n     */\n    var timeline;\n\n    Element.prototype.animate = function () {\n      var attrs = mix({}, this.get('attrs'));\n      return new Animator(this, attrs, timeline);\n    };\n\n    Chart.prototype.animate = function (cfg) {\n      this.set('animate', cfg);\n      return this;\n    };\n\n    Animate.Action = ShapeAction;\n    Animate.defaultCfg = {\n      interval: {\n        enter: function enter(coord) {\n          if (coord.isPolar && coord.transposed) {\n            // for pie chart\n            return function (shape) {\n              shape.set('zIndex', -1);\n              var container = shape.get('parent');\n              container.sort();\n            };\n          }\n\n          return fadeIn;\n        }\n      },\n      area: {\n        enter: function enter(coord) {\n          if (coord.isPolar) return null;\n          return fadeIn;\n        }\n      },\n      line: {\n        enter: function enter(coord) {\n          if (coord.isPolar) return null;\n          return fadeIn;\n        }\n      },\n      path: {\n        enter: function enter(coord) {\n          if (coord.isPolar) return null;\n          return fadeIn;\n        }\n      }\n    };\n    var GROUP_ANIMATION = {\n      line: function line(coord) {\n        if (coord.isPolar) {\n          return groupScaleInXY;\n        }\n\n        return groupWaveIn;\n      },\n      area: function area(coord) {\n        if (coord.isPolar) {\n          return groupScaleInXY;\n        }\n\n        return groupWaveIn;\n      },\n      path: function path(coord) {\n        if (coord.isPolar) {\n          return groupScaleInXY;\n        }\n\n        return groupWaveIn;\n      },\n      point: function point() {\n        return shapesScaleInXY;\n      },\n      interval: function interval(coord) {\n        var result;\n\n        if (coord.isPolar) {\n          // polar coodinate\n          result = groupScaleInXY;\n\n          if (coord.transposed) {\n            // pie chart\n            result = groupWaveIn;\n          }\n        } else {\n          result = coord.transposed ? groupScaleInX : groupScaleInY;\n        }\n\n        return result;\n      },\n      schema: function schema() {\n        return groupWaveIn;\n      }\n    };\n\n    function diff(fromAttrs, toAttrs) {\n      var endState = {};\n\n      for (var k in toAttrs) {\n        if (isNumber(fromAttrs[k]) && fromAttrs[k] !== toAttrs[k]) {\n          endState[k] = toAttrs[k];\n        } else if (isArray(fromAttrs[k]) && JSON.stringify(fromAttrs[k]) !== JSON.stringify(toAttrs[k])) {\n          endState[k] = toAttrs[k];\n        }\n      }\n\n      return endState;\n    } // Add a unique id identifier to each shape\n\n\n    function _getShapeId(geom, dataObj, geomIdx) {\n      var type = geom.get('type');\n      var id = 'geom' + geomIdx + '-' + type;\n      var xScale = geom.getXScale();\n      var yScale = geom.getYScale();\n      var xField = xScale.field || 'x';\n      var yField = yScale.field || 'y';\n      var yVal = dataObj[yField];\n      var xVal;\n\n      if (xScale.isIdentity) {\n        xVal = xScale.value;\n      } else {\n        xVal = dataObj[xField];\n      }\n\n      if (type === 'interval' || type === 'schema') {\n        id += '-' + xVal;\n      } else if (type === 'line' || type === 'area' || type === 'path') {\n        id += '-' + type;\n      } else {\n        id += xScale.isCategory ? '-' + xVal : '-' + xVal + '-' + yVal;\n      }\n\n      var groupScales = geom._getGroupScales();\n\n      each(groupScales, function (groupScale) {\n        var field = groupScale.field;\n\n        if (groupScale.type !== 'identity') {\n          id += '-' + dataObj[field];\n        }\n      });\n      return id;\n    } // get geometry's shapes\n\n\n    function getShapes(geoms, chart, coord) {\n      var shapes = [];\n      each(geoms, function (geom, geomIdx) {\n        var geomContainer = geom.get('container');\n        var geomShapes = geomContainer.get('children');\n        var type = geom.get('type');\n        var animateCfg = isNil(geom.get('animateCfg')) ? _getAnimateCfgByShapeType(type, chart) : geom.get('animateCfg');\n\n        if (animateCfg !== false) {\n          each(geomShapes, function (shape, index) {\n            if (shape.get('className') === type) {\n              shape._id = _getShapeId(geom, shape.get('origin')._origin, geomIdx);\n              shape.set('coord', coord);\n              shape.set('animateCfg', animateCfg);\n              shape.set('index', index);\n              shapes.push(shape);\n            }\n          });\n        }\n\n        geom.set('shapes', geomShapes);\n      });\n      return shapes;\n    }\n\n    function cache(shapes) {\n      var rst = {};\n\n      for (var i = 0, len = shapes.length; i < len; i++) {\n        var shape = shapes[i];\n        if (!shape._id || shape.isClip) continue;\n        var id = shape._id;\n        rst[id] = {\n          _id: id,\n          type: shape.get('type'),\n          // the type of shape\n          attrs: mix({}, shape._attrs.attrs),\n          // the graphics attributes of shape\n          className: shape.get('className'),\n          geomType: shape.get('className'),\n          index: shape.get('index'),\n          coord: shape.get('coord'),\n          animateCfg: shape.get('animateCfg')\n        };\n      }\n\n      return rst;\n    }\n\n    function getAnimate(geomType, coord, animationType, animationName) {\n      var result;\n\n      if (isFunction(animationName)) {\n        result = animationName;\n      } else if (isString(animationName)) {\n        result = Animate.Action[animationName];\n      } else {\n        result = Animate.getAnimation(geomType, coord, animationType);\n      }\n\n      return result;\n    }\n\n    function getAnimateCfg(geomType, animationType, animateCfg) {\n      if (animateCfg === false || isObject(animateCfg) && animateCfg[animationType] === false) {\n        return false;\n      }\n\n      var defaultCfg = Animate.getAnimateCfg(geomType, animationType);\n\n      if (animateCfg && animateCfg[animationType]) {\n        return deepMix({}, defaultCfg, animateCfg[animationType]);\n      }\n\n      return defaultCfg;\n    }\n\n    function addAnimate(cache, shapes, canvas) {\n      var animate;\n      var animateCfg; // the order of animation: leave -> update -> enter\n\n      var updateShapes = [];\n      var newShapes = [];\n      each(shapes, function (shape) {\n        var result = cache[shape._id];\n\n        if (!result) {\n          newShapes.push(shape);\n        } else {\n          shape.set('cacheShape', result);\n          updateShapes.push(shape);\n          delete cache[shape._id];\n        }\n      }); // first do the leave animation\n\n      each(cache, function (deletedShape) {\n        var className = deletedShape.className,\n            coord = deletedShape.coord,\n            _id = deletedShape._id,\n            attrs = deletedShape.attrs,\n            index = deletedShape.index,\n            type = deletedShape.type;\n        animateCfg = getAnimateCfg(className, 'leave', deletedShape.animateCfg);\n        if (animateCfg === false) return true;\n        animate = getAnimate(className, coord, 'leave', animateCfg.animation);\n\n        if (isFunction(animate)) {\n          var tempShape = canvas.addShape(type, {\n            attrs: attrs,\n            index: index,\n            canvas: canvas,\n            className: className\n          });\n          tempShape._id = _id;\n          animate(tempShape, animateCfg, coord);\n        }\n      }); // then do the update animation\n\n      each(updateShapes, function (updateShape) {\n        var className = updateShape.get('className');\n        animateCfg = getAnimateCfg(className, 'update', updateShape.get('animateCfg'));\n        if (animateCfg === false) return true;\n        var coord = updateShape.get('coord');\n        var cacheAttrs = updateShape.get('cacheShape').attrs;\n        var endState = diff(cacheAttrs, updateShape._attrs.attrs); // 判断如果属性相同的话就不进行变换\n\n        if (Object.keys(endState).length) {\n          animate = getAnimate(className, coord, 'update', animateCfg.animation);\n\n          if (isFunction(animate)) {\n            animate(updateShape, animateCfg, coord);\n          } else {\n            updateShape.attr(cacheAttrs);\n            updateShape.animate().to({\n              attrs: endState,\n              duration: animateCfg.duration,\n              easing: animateCfg.easing,\n              delay: animateCfg.delay\n            }).onEnd(function () {\n              updateShape.set('cacheShape', null);\n            });\n          }\n        }\n      }); // last, enter animation\n\n      each(newShapes, function (newShape) {\n        // 新图形元素的进场元素\n        var className = newShape.get('className');\n        var coord = newShape.get('coord');\n        animateCfg = getAnimateCfg(className, 'enter', newShape.get('animateCfg'));\n        if (animateCfg === false) return true;\n        animate = getAnimate(className, coord, 'enter', animateCfg.animation);\n\n        if (isFunction(animate)) {\n          if (className === 'interval' && coord.isPolar && coord.transposed) {\n            var index = newShape.get('index');\n            var lastShape = updateShapes[index - 1];\n            animate(newShape, animateCfg, lastShape);\n          } else {\n            animate(newShape, animateCfg, coord);\n          }\n        }\n      });\n    }\n\n    function _getAnimateCfgByShapeType(type, chart) {\n      if (!type) {\n        return null;\n      }\n\n      var animateCfg = chart.get('animate');\n\n      if (type.indexOf('guide-tag') > -1) {\n        type = 'guide-tag';\n      }\n\n      if (isObject(animateCfg)) {\n        return animateCfg[type];\n      }\n\n      if (animateCfg === false) {\n        return false;\n      }\n\n      return null;\n    }\n\n    function afterCanvasInit()\n    /* chart */\n    {\n      timeline = new Timeline();\n      timeline.play();\n    }\n\n    function beforeCanvasDraw(chart) {\n      if (chart.get('animate') === false) {\n        return;\n      }\n\n      var isUpdate = chart.get('isUpdate');\n      var canvas = chart.get('canvas');\n      var coord = chart.get('coord');\n      var geoms = chart.get('geoms');\n      var caches = canvas.get('caches') || [];\n\n      if (caches.length === 0) {\n        isUpdate = false;\n      }\n\n      var cacheShapes = getShapes(geoms, chart, coord);\n\n      var _chart$get = chart.get('axisController'),\n          frontPlot = _chart$get.frontPlot,\n          backPlot = _chart$get.backPlot;\n\n      var axisShapes = frontPlot.get('children').concat(backPlot.get('children'));\n      var guideShapes = [];\n\n      if (chart.get('guideController')) {\n        guideShapes = chart.get('guideController').guideShapes;\n      }\n\n      var componentShapes = [];\n      axisShapes.concat(guideShapes).forEach(function (s) {\n        var className = s.get('className');\n\n        var animateCfg = _getAnimateCfgByShapeType(className, chart);\n\n        s.set('coord', coord);\n        s.set('animateCfg', animateCfg);\n        componentShapes.push(s);\n        cacheShapes.push(s);\n      });\n      canvas.set('caches', cache(cacheShapes));\n\n      if (isUpdate) {\n        addAnimate(caches, cacheShapes, canvas);\n      } else {\n        // do the appear animation\n        var animateCfg;\n        var animate;\n        each(geoms, function (geom) {\n          var type = geom.get('type');\n          var geomCfg = isNil(geom.get('animateCfg')) ? _getAnimateCfgByShapeType(type, chart) : geom.get('animateCfg');\n\n          if (geomCfg !== false) {\n            animateCfg = getAnimateCfg(type, 'appear', geomCfg);\n            animate = getAnimate(type, coord, 'appear', animateCfg.animation);\n\n            if (isFunction(animate)) {\n              var shapes = geom.get('shapes');\n              each(shapes, function (shape) {\n                animate(shape, animateCfg, coord);\n              });\n            } else if (GROUP_ANIMATION[type]) {\n              // do the default animation\n              animate = GroupAction[animateCfg.animation] || GROUP_ANIMATION[type](coord);\n              var yScale = geom.getYScale();\n              var zeroY = coord.convertPoint({\n                x: 0,\n                y: yScale.scale(geom.getYMinValue())\n              });\n              var container = geom.get('container');\n              animate && animate(container, animateCfg, coord, zeroY);\n            }\n          }\n        }); // do the animation of components\n\n        each(componentShapes, function (shape) {\n          var animateCfg = shape.get('animateCfg');\n          var className = shape.get('className');\n\n          if (animateCfg && animateCfg.appear) {\n            // if user configure\n            var defaultCfg = Animate.getAnimateCfg(className, 'appear');\n            var appearCfg = deepMix({}, defaultCfg, animateCfg.appear);\n\n            var _animate = getAnimate(className, coord, 'appear', appearCfg.animation);\n\n            if (isFunction(_animate)) {\n              _animate(shape, appearCfg, coord);\n            }\n          }\n        });\n      }\n    }\n\n    function afterCanvasDestroyed()\n    /* chart */\n    {\n      timeline.stop();\n    }\n    var detail = {\n      afterCanvasInit: afterCanvasInit,\n      beforeCanvasDraw: beforeCanvasDraw,\n      afterCanvasDestroyed: afterCanvasDestroyed\n    };\n\n    var Animation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        afterCanvasInit: afterCanvasInit,\n        beforeCanvasDraw: beforeCanvasDraw,\n        afterCanvasDestroyed: afterCanvasDestroyed,\n        'default': detail\n    });\n\n    Chart._Interactions = {};\n\n    Chart.registerInteraction = function (type, constructor) {\n      Chart._Interactions[type] = constructor;\n    };\n\n    Chart.getInteraction = function (type) {\n      return Chart._Interactions[type];\n    };\n\n    Chart.prototype.interaction = function (type, cfg) {\n      var interactions = this._interactions || {};\n\n      if (interactions[type]) {\n        // if reprated, destroy last\n        interactions[type].destroy();\n      }\n\n      var Ctor = Chart.getInteraction(type);\n      var interact = new Ctor(cfg, this);\n      interactions[type] = interact;\n      this._interactions = interactions;\n      return this;\n    };\n\n    Chart.prototype.clearInteraction = function (type) {\n      var interactions = this._interactions;\n      if (!interactions) return;\n\n      if (type) {\n        interactions[type] && interactions[type].destroy();\n        delete interactions[type];\n      } else {\n        each(interactions, function (interaction, key) {\n          interaction.destroy();\n          delete interactions[key];\n        });\n      }\n\n      return this;\n    };\n\n    function isValuesEqual(values, newValues) {\n      if (values.length !== newValues.length) {\n        return false;\n      }\n\n      var lastIndex = values.length - 1;\n      return values[0] === newValues[0] && values[lastIndex] === newValues[lastIndex];\n    } // 不同交互之间共享的上下文\n\n\n    var defaultRange = [0, 1];\n\n    var Context = /*#__PURE__*/function () {\n      // 最开始的原始值\n      // 当前显示的范围\n      // 缩放最小的点数\n      // 最小的缩放比例, 默认通过minCount计算\n      // minScale = 0.01;\n      // 交互开始时，ticks个数，主要为了每次缩放后，更新ticks个数\n      // lastTickCount;\n      function Context(chart) {\n        var _this = this;\n\n        _defineProperty(this, \"chart\", null);\n\n        _defineProperty(this, \"values\", null);\n\n        _defineProperty(this, \"range\", defaultRange);\n\n        _defineProperty(this, \"startRange\", defaultRange);\n\n        _defineProperty(this, \"minCount\", 10);\n\n        _defineProperty(this, \"_afterinit\", function () {\n          // 初始化value值\n          var scale = _this.getPinchScale(); // 记录原始全量数据\n\n\n          var values = [].concat(scale.values);\n          _this.values = values; // 最小的缩放比例\n\n          if (!_this.minScale) {\n            _this.minScale = _this.minCount / values.length;\n          } // 初始化的时候有设置range，则初始化成默认比例\n\n\n          if (_this.range !== defaultRange) {\n            _this.updateRange(_this.range);\n\n            _this.updateTicks();\n          }\n        });\n\n        _defineProperty(this, \"_afterdatachange\", function () {\n          _this.updateRange(_this.range);\n        });\n\n        this.chart = chart;\n\n        this._initEvent(chart);\n      }\n\n      var _proto = Context.prototype;\n\n      _proto._initEvent = function _initEvent(chart) {\n        // 在整体初始化后还需要设置一些初始状态\n        chart.on(EVENT_AFTER_INIT, this._afterinit);\n        chart.on(EVENT_AFTER_DATA_CHANGE, this._afterdatachange);\n      } // 缩放的主轴scale\n      ;\n\n      _proto.getPinchScale = function getPinchScale() {\n        var chart = this.chart; // 默认缩放x轴\n\n        var scale = chart.getXScale();\n        return scale;\n      } // 跟随轴的scale\n      ;\n\n      _proto.getFollowScale = function getFollowScale() {\n        var chart = this.chart; // 默认缩放x轴\n\n        var scales = chart.getYScales() || [];\n        return scales[0];\n      };\n\n      _proto.start = function start() {\n        var range = this.range;\n        var scale = this.getPinchScale();\n        var start = range[0],\n            end = range[1]; // 记录交互起始的范围\n\n        this.startRange = [start, end]; // 记录开始时的ticks个数\n\n        this.lastTickCount = scale.tickCount;\n      };\n\n      _proto.doZoom = function doZoom(leftScale, rightScale, zoom) {\n        var range = this.startRange,\n            minScale = this.minScale;\n        var start = range[0],\n            end = range[1];\n        var zoomOffset = 1 - zoom;\n        var rangeLen = end - start;\n        var rangeOffset = rangeLen * zoomOffset;\n        var leftOffset = rangeOffset * leftScale;\n        var rightOffset = rangeOffset * rightScale;\n        var newStart = Math.max(0, start - leftOffset);\n        var newEnd = Math.min(1, end + rightOffset);\n        var newRange = [newStart, newEnd]; // 如果已经到了最小比例，则不能再继续再放大\n\n        if (newEnd - newStart < minScale) {\n          return;\n        }\n\n        this.updateRange(newRange);\n      };\n\n      _proto.doMove = function doMove(ratio) {\n        // 不管是0， 还是其他，都不用处理\n        if (!ratio) return;\n        var range = this.startRange;\n        var start = range[0],\n            end = range[1];\n        var rangeLen = end - start;\n        var rangeOffset = rangeLen * ratio;\n        var newStart = start - rangeOffset;\n        var newEnd = end - rangeOffset; // 处理边界值\n\n        var newRange;\n\n        if (newStart < 0) {\n          newRange = [0, rangeLen];\n        } else if (newEnd > 1) {\n          newRange = [1 - rangeLen, 1];\n        } else {\n          newRange = [newStart, newEnd];\n        }\n\n        this.updateRange(newRange);\n      };\n\n      _proto.updateRange = function updateRange(range) {\n        var values = this.values; // 0， 1 的范围之间\n\n        var start = range[0],\n            end = range[1]; // start 不能小于0\n\n        start = Math.max(0, start); // end 不能大于1\n\n        end = Math.min(1, end); // 设置当前的范围\n\n        this.range = [start, end];\n        var len = values.length;\n        var valueStart = start * len;\n        var valueEnd = end * len; // 从原始数据里截取需要显示的数据\n\n        var newValues = values.slice(valueStart, valueEnd);\n        this.repaint(newValues);\n      };\n\n      _proto.repaint = function repaint(newValues) {\n        var chart = this.chart;\n        var scale = this.getPinchScale();\n        var currentValues = scale.values,\n            ticks = scale.ticks; // 如果新数组和当前显示的数组相同，则不更新\n\n        if (isValuesEqual(currentValues, newValues)) {\n          return;\n        } // 更新主轴values\n\n\n        this.updateScale(scale, {\n          ticks: ticks,\n          values: newValues\n        });\n        this.updateFollowScale(scale, newValues);\n        chart.repaint();\n      };\n\n      _proto.updateFollowScale = function updateFollowScale(pinchScale, pinchValues) {\n        var chart = this.chart;\n        var followScale = this.getFollowScale();\n        var pinchField = pinchScale.field,\n            pinchScaleType = pinchScale.type;\n        var followField = followScale.field; // 根据主轴的value值，找到所有从轴的value值\n\n        var values = []; // 转成map，让查找性能更高\n\n        var pinchValueMap = {};\n        pinchValues.forEach(function (item) {\n          pinchValueMap[item] = true;\n        });\n        var data = chart.get('data');\n        data.forEach(function (item) {\n          if (pinchScaleType === 'timeCat') {\n            var value = toTimeStamp(item[pinchField]);\n\n            if (pinchValueMap[value]) {\n              values.push(item[followField]);\n            }\n          }\n        });\n\n        var _getRange = getRange$1(values),\n            min = _getRange.min,\n            max = _getRange.max;\n\n        this.updateScale(followScale, {\n          min: min,\n          max: max,\n          nice: true\n        });\n      };\n\n      _proto.updateScale = function updateScale(scale, cfg) {\n        if (!scale) {\n          return;\n        }\n\n        scale.change(cfg);\n      } // 上一次的tick个数\n      ;\n\n      _proto.updateTicks = function updateTicks() {\n        var chart = this.chart,\n            values = this.values;\n        var scale = this.getPinchScale();\n        var currentValues = scale.values,\n            tickCount = scale.tickCount; // 根据当前数据的比例，和定义的tickCount计算应该需要多少个ticks\n\n        var newTickCount = Math.round(tickCount * values.length / currentValues.length);\n        var catTicks = getTickMethod('cat');\n        var ticks = catTicks({\n          tickCount: newTickCount,\n          values: values\n        });\n        this.updateScale(scale, {\n          ticks: ticks,\n          values: currentValues\n        }); // 更新完后，需要重新绘制一次\n\n        chart.repaint();\n      };\n\n      _proto.destroy = function destroy() {\n        var chart = this.chart;\n        chart.off(EVENT_AFTER_INIT, this._afterinit);\n        chart.off(EVENT_AFTER_DATA_CHANGE, this._afterdatachange);\n      };\n\n      return Context;\n    }();\n\n    var Base$2 = /*#__PURE__*/function () {\n      var _proto = Base.prototype;\n\n      // 交互的上下文\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {};\n      };\n\n      _proto.getInteractionContext = function getInteractionContext(chart) {\n        var interactionContext = chart.get('interactionContext');\n\n        if (interactionContext) {\n          return interactionContext;\n        }\n\n        interactionContext = new Context(chart);\n        chart.set('interactionContext', interactionContext);\n        return interactionContext;\n      };\n\n      function Base(cfg, chart) {\n        var _this = this;\n\n        _defineProperty(this, \"type\", '');\n\n        _defineProperty(this, \"startEvent\", 'touchstart');\n\n        _defineProperty(this, \"processEvent\", 'touchmove');\n\n        _defineProperty(this, \"endEvent\", 'touchend');\n\n        _defineProperty(this, \"resetEvent\", null);\n\n        _defineProperty(this, \"context\", null);\n\n        _defineProperty(this, \"_start\", function (ev) {\n          _this.preStart && _this.preStart(ev);\n\n          _this.start(ev);\n\n          _this.onStart && _this.onStart(ev);\n        });\n\n        _defineProperty(this, \"_process\", function (ev) {\n          _this.preProcess && _this.preProcess(ev);\n\n          _this.process(ev);\n\n          _this.onProcess && _this.onProcess(ev);\n        });\n\n        _defineProperty(this, \"_end\", function (ev) {\n          _this.preEnd && _this.preEnd(ev);\n\n          _this.end(ev);\n\n          _this.onEnd && _this.onEnd(ev);\n        });\n\n        _defineProperty(this, \"_reset\", function (ev) {\n          _this.preReset && _this.preReset(ev);\n\n          _this.reset(ev);\n\n          _this.onReset && _this.onReset(ev);\n        });\n\n        mix(this, this.getDefaultCfg(), cfg);\n        this.context = this.getInteractionContext(chart);\n        this.chart = chart; // 只处理range, 暂时先这么处理后面再看情况调整\n\n        var range = this.range;\n\n        if (range) {\n          this.context.range = range;\n        }\n\n        this._bindEvents(chart);\n      }\n\n      _proto._bindEvents = function _bindEvents(chart) {\n        var startEvent = this.startEvent,\n            processEvent = this.processEvent,\n            endEvent = this.endEvent,\n            resetEvent = this.resetEvent;\n        var canvas = chart.get('canvas'); // 统一绑定事件\n\n        canvas.on(startEvent, this._start);\n        canvas.on(processEvent, this._process);\n        canvas.on(endEvent, this._end);\n        canvas.on(resetEvent, this._reset);\n      };\n\n      _proto._clearEvents = function _clearEvents() {\n        var chart = this.chart,\n            startEvent = this.startEvent,\n            processEvent = this.processEvent,\n            endEvent = this.endEvent,\n            resetEvent = this.resetEvent;\n        var canvas = chart.get('canvas'); // 统一绑定事件\n\n        canvas.off(startEvent, this._start);\n        canvas.off(processEvent, this._process);\n        canvas.off(endEvent, this._end);\n        canvas.off(resetEvent, this._start);\n      };\n\n      // override\n      _proto.start = function start() {} // override\n      ;\n\n      _proto.process = function process() {} // override\n      ;\n\n      _proto.end = function end() {} // override\n      ;\n\n      _proto.reset = function reset() {};\n\n      _proto.destroy = function destroy() {\n        this.context.destroy();\n\n        this._clearEvents();\n      };\n\n      return Base;\n    }();\n\n    var Pan = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Pan, _Base);\n\n      function Pan() {\n        return _Base.apply(this, arguments) || this;\n      }\n\n      var _proto = Pan.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          type: 'pan',\n          startEvent: 'panstart',\n          processEvent: 'pan',\n          endEvent: 'panend'\n        };\n      };\n\n      _proto.start = function start() {\n        var context = this.context;\n        context.start();\n      };\n\n      _proto.process = function process(e) {\n        var direction = e.direction,\n            deltaX = e.deltaX;\n\n        if (direction === 'up' || direction === 'down') {\n          return;\n        }\n\n        e.preventDefault && e.preventDefault();\n        var context = this.context;\n        var chart = context.chart;\n        var coord = chart.get('coord');\n        var start = coord.start,\n            end = coord.end;\n        var coordWidth = end.x - start.x;\n        var ratio = deltaX / coordWidth;\n        context.doMove(ratio);\n      };\n\n      return Pan;\n    }(Base$2);\n\n    var Pinch = /*#__PURE__*/function (_Base) {\n      _inheritsLoose(Pinch, _Base);\n\n      var _proto = Pinch.prototype;\n\n      _proto.getDefaultCfg = function getDefaultCfg() {\n        return {\n          type: 'pinch',\n          startEvent: 'pinchstart',\n          processEvent: 'pinch',\n          endEvent: 'pinchend'\n        };\n      };\n\n      function Pinch(cfg, chart) {\n        var _this;\n\n        _this = _Base.call(this, cfg, chart) || this;\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            context = _assertThisInitialize.context;\n\n        mix(context, cfg);\n        return _this;\n      }\n\n      _proto.start = function start() {\n        var context = this.context;\n        context.start();\n      };\n\n      _proto.process = function process(e) {\n        e.preventDefault && e.preventDefault();\n        var zoom = e.zoom,\n            center = e.center;\n        var context = this.context;\n        var chart = context.chart;\n        var coord = chart.get('coord');\n        var start = coord.start,\n            end = coord.end;\n        var coordWidth = end.x - start.x;\n        var leftLen = Math.abs(center.x - start.x);\n        var rightLen = Math.abs(end.x - center.x); // 计算左右缩放的比例\n\n        var leftScale = leftLen / coordWidth;\n        var rightScale = rightLen / coordWidth;\n        context.doZoom(leftScale, rightScale, zoom);\n      };\n\n      _proto.end = function end() {\n        // 缩放完成后再更新ticks\n        var context = this.context;\n        context.updateTicks();\n      };\n\n      return Pinch;\n    }(Base$2);\n\n    Chart.registerInteraction('pan', Pan);\n    Chart.registerInteraction('pinch', Pinch);\n\n    /**\n     * Default, without interactins\n     */\n    var Component = {\n      Marker: Marker\n    }; // register plugins\n\n    Chart.plugins.register([Tooltip$1, Legend, Guide, Animation]); // 默认添加交互\n    var index = {\n      Component: Component,\n      Global: Global,\n      Chart: Chart,\n      Shape: Shape$1,\n      G: G,\n      Util: Util,\n      Helper: Helper,\n      track: track,\n      Animate: Animate\n    };\n\n    exports.Animate = Animate;\n    exports.Chart = Chart;\n    exports.Component = Component;\n    exports.G = G;\n    exports.Global = Global;\n    exports.Helper = Helper;\n    exports.Shape = Shape$1;\n    exports.Util = Util;\n    exports.default = index;\n    exports.track = track;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],"sourceRoot":""}